<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head>  <title>Sedna Programmer&#8217;s Guide</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 1,html --> 
<meta name="src" content="ProgGuide.tex"> 
<meta name="date" content="2011-11-26 03:09:00"> 
<link rel="stylesheet" type="text/css" href="ProgGuide.css"> 
</head><body 
>
   <style type="text/css"><!-- @import url("../styles/main.css"); --></style><style type="text/css"><!-- @import url("../styles/doc.css"); --></style><p style="margin-bottom:15px;"/><table width="843" align="center" cellpadding="0" cellspacing="0"><tr><td><table cellpadding="0" cellspacing="0"><tr><td><a href="../index.html"><img src="../images/3.gif" width="341" height="125" alt="Sedna Logo"/></a></td><td><img src="../images/4.jpg" width="502" height="125" alt="Background Top"/></td></tr></table></td></tr></table> <table align="center" width="843" border="0" cellpadding="0" cellspacing="0" class="ver8"><tr><td height="15">&nbsp;</td></tr><tr><td><span class="style3"><a href="/" class="style3">Home</a> &nbsp;|&nbsp; <a href="/quick-start.html" class="style3">Getting Started</a> &nbsp;|&nbsp; <a href="/documentation.html" class="style3">Documentation</a> &nbsp;|&nbsp; <a href="http://wikixmldb.org" class="style3">Demo</a> &nbsp;|&nbsp; <a href="/download.html" class="style3">Download</a> &nbsp;|&nbsp; <a href="/index.html#support" class="style3">Support</a>&nbsp;</span></td></tr></table><p style="margin-bottom:20px;"/><table width="843" border="0" align="center" cellpadding="0" cellspacing="0" class="ver9"><tr><td align="justify">     <div class="maketitle">
                                                                          

                                                                          
                                                                          

                                                                          

<h2 class="titleHead">Sedna Programmer&#8217;s Guide</h2>
<div class="author" ></div><br />
<div class="date" ></div>
   </div>
   <div class="tableofcontents">
   <span class="likesectionToc" ><a 
href="#x1-1000" id="QQ2-1-1">Contents</a></span>
<br />   <span class="sectionToc" >1 <a 
href="#x1-20001" id="QQ2-1-2">Client Application Programming Interfaces</a></span>
<br />   <span class="sectionToc" >2 <a 
href="#x1-270002" id="QQ2-1-27">Database Language</a></span>
<br />   <span class="likesectionToc" ><a 
href="#x1-660002.7.4" id="QQ2-1-67">References</a></span>
   </div>
   <h3 class="likesectionHead"><a 
 id="x1-1000"></a>Contents</h3>
   <div class="tableofcontents">
   <span class="sectionToc" >1 <a 
href="#x1-20001">Client Application Programming Interfaces</a></span>
<br />   &#x00A0;<span class="subsectionToc" >1.1 <a 
href="#x1-30001.1" id="QQ2-1-3">Java API</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.1 <a 
href="#x1-40001.1.1" id="QQ2-1-4">Sessions</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.2 <a 
href="#x1-50001.1.2" id="QQ2-1-5">Transactions Management</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.3 <a 
href="#x1-60001.1.3" id="QQ2-1-6">Statements</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.4 <a 
href="#x1-70001.1.4" id="QQ2-1-7">Results</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.5 <a 
href="#x1-80001.1.5" id="QQ2-1-8">Exceptions</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.6 <a 
href="#x1-90001.1.6" id="QQ2-1-9">Code Example</a></span>
<br />   &#x00A0;<span class="subsectionToc" >1.2 <a 
href="#x1-100001.2" id="QQ2-1-10">C API</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.1 <a 
href="#x1-110001.2.1" id="QQ2-1-11">Errors Handling</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.2 <a 
href="#x1-120001.2.2" id="QQ2-1-12">Connecting to a Database</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.3 <a 
href="#x1-130001.2.3" id="QQ2-1-13">Setting Session Options</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.4 <a 
href="#x1-140001.2.4" id="QQ2-1-14">Transactions Management</a></span>
                                                                          

                                                                          
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.5 <a 
href="#x1-150001.2.5" id="QQ2-1-15">Getting Connection and Transaction Status</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.6 <a 
href="#x1-160001.2.6" id="QQ2-1-16">Executing Queries and Updates</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.7 <a 
href="#x1-170001.2.7" id="QQ2-1-17">Loading Data</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.8 <a 
href="#x1-180001.2.8" id="QQ2-1-18">Example Code</a></span>
<br />   &#x00A0;<span class="subsectionToc" >1.3 <a 
href="#x1-190001.3" id="QQ2-1-19">Scheme API</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.3.1 <a 
href="#x1-200001.3.1" id="QQ2-1-20">Sessions</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.3.2 <a 
href="#x1-210001.3.2" id="QQ2-1-21">Manage Transactions</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.3.3 <a 
href="#x1-220001.3.3" id="QQ2-1-22">Executing Queries and Updates</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.3.4 <a 
href="#x1-230001.3.4" id="QQ2-1-23">Bulk Load from Stream</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.3.5 <a 
href="#x1-240001.3.5" id="QQ2-1-24">Higher-level Function for a Transaction</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.3.6 <a 
href="#x1-250001.3.6" id="QQ2-1-25">Error handling</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.3.7 <a 
href="#x1-260001.3.7" id="QQ2-1-26">Code Example</a></span>
<br />   <span class="sectionToc" >2 <a 
href="#x1-270002">Database Language</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.1 <a 
href="#x1-280002.1" id="QQ2-1-28">XQuery Support</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.2 <a 
href="#x1-290002.2" id="QQ2-1-29">XQuery Options and Extensions</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.2.1 <a 
href="#x1-300002.2.1" id="QQ2-1-30">Controlling Serialization</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.2.2 <a 
href="#x1-310002.2.2" id="QQ2-1-31">Value index-scan Functions</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.2.3 <a 
href="#x1-320002.2.3" id="QQ2-1-32">Full-Text Search Functions</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.2.4 <a 
href="#x1-330002.2.4" id="QQ2-1-33">SQL Connection</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.2.5 <a 
href="#x1-390002.2.5" id="QQ2-1-39">External Functions</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.2.6 <a 
href="#x1-430002.2.6" id="QQ2-1-43">Runtime Properties</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.3 <a 
href="#x1-440002.3" id="QQ2-1-44">Update Language</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.4 <a 
href="#x1-500002.4" id="QQ2-1-50">Bulk Load</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.4.1 <a 
href="#x1-510002.4.1" id="QQ2-1-51">CDATA section preserving</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.5 <a 
href="#x1-520002.5" id="QQ2-1-52">Data Definition Language</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.5.1 <a 
href="#x1-530002.5.1" id="QQ2-1-53">Managing Standalone Documents</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.5.2 <a 
href="#x1-540002.5.2" id="QQ2-1-54">Managing Collections</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.5.3 <a 
href="#x1-550002.5.3" id="QQ2-1-55">Managing Value Indices</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.5.4 <a 
href="#x1-560002.5.4" id="QQ2-1-56">Managing Full-Text Indices</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.5.5 <a 
href="#x1-570002.5.5" id="QQ2-1-57">Managing Modules</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.5.6 <a 
href="#x1-580002.5.6" id="QQ2-1-58">Retrieving Metadata</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.6 <a 
href="#x1-590002.6" id="QQ2-1-59">XQuery Triggers</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.6.1 <a 
href="#x1-600002.6.1" id="QQ2-1-61">Trigger Examples</a></span>
<br />   &#x00A0;<span class="subsectionToc" >2.7 <a 
href="#x1-610002.7" id="QQ2-1-62">Debug and Profile Facilities</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.7.1 <a 
href="#x1-620002.7.1" id="QQ2-1-63">Trace</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.7.2 <a 
href="#x1-630002.7.2" id="QQ2-1-64">Debug Mode</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.7.3 <a 
href="#x1-640002.7.3" id="QQ2-1-65">Explain Query</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >2.7.4 <a 
href="#x1-650002.7.4" id="QQ2-1-66">Profile Query</a></span>
   </div>
                                                                          

                                                                          
   <h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-20001"></a>Client Application Programming Interfaces</h3>
<!--l. 59--><p class="noindent" >The Sedna client application programming interfaces (APIs) provides
programmatic access to Sedna from client applications developed in host
programming languages. This section describes the client APIs distributed with
Sedna.
<!--l. 63--><p class="noindent" >
   <div class="subsectionTOCS">
   &#x00A0;<span class="subsectionToc" >1.1 <a 
href="#x1-30001.1">Java API</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.1 <a 
href="#x1-40001.1.1">Sessions</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.2 <a 
href="#x1-50001.1.2">Transactions Management</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.3 <a 
href="#x1-60001.1.3">Statements</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.4 <a 
href="#x1-70001.1.4">Results</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.5 <a 
href="#x1-80001.1.5">Exceptions</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.6 <a 
href="#x1-90001.1.6">Code Example</a></span>
<br />   &#x00A0;<span class="subsectionToc" >1.2 <a 
href="#x1-100001.2">C API</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.1 <a 
href="#x1-110001.2.1">Errors Handling</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.2 <a 
href="#x1-120001.2.2">Connecting to a Database</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.3 <a 
href="#x1-130001.2.3">Setting Session Options</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.4 <a 
href="#x1-140001.2.4">Transactions Management</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.5 <a 
href="#x1-150001.2.5">Getting Connection and Transaction Status</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.6 <a 
href="#x1-160001.2.6">Executing Queries and Updates</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.7 <a 
href="#x1-170001.2.7">Loading Data</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.2.8 <a 
href="#x1-180001.2.8">Example Code</a></span>
<br />   &#x00A0;<span class="subsectionToc" >1.3 <a 
href="#x1-190001.3">Scheme API</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.3.1 <a 
href="#x1-200001.3.1">Sessions</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.3.2 <a 
href="#x1-210001.3.2">Manage Transactions</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.3.3 <a 
href="#x1-220001.3.3">Executing Queries and Updates</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.3.4 <a 
href="#x1-230001.3.4">Bulk Load from Stream</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.3.5 <a 
href="#x1-240001.3.5">Higher-level Function for a Transaction</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.3.6 <a 
href="#x1-250001.3.6">Error handling</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.3.7 <a 
href="#x1-260001.3.7">Code Example</a></span>
   </div>
   <h4 class="subsectionHead"><span class="titlemark">1.1   </span> <a 
 id="x1-30001.1"></a>Java API</h4>
<!--l. 64--><p class="noindent" >The Java API provides programmatic access to XML data from the Java
programming language. Using the Java API, applications written in the Java can
access one or more databases of the Sedna DBMS and manipulate database data
                                                                          

                                                                          
using the database language described in Section <a 
href="#x1-270002">2<!--tex4ht:ref: sec:DBLang --></a>.
<!--l. 69--><p class="indent" >   Application working with the Sedna DBMS through the Java API operates
with the following notions of the Java API: session, transaction, statement,
result.
<!--l. 72--><p class="noindent" >
   <div class="subsubsectionTOCS">
   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.1 <a 
href="#x1-40001.1.1">Sessions</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.2 <a 
href="#x1-50001.1.2">Transactions Management</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.3 <a 
href="#x1-60001.1.3">Statements</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.4 <a 
href="#x1-70001.1.4">Results</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.5 <a 
href="#x1-80001.1.5">Exceptions</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsubsectionToc" >1.1.6 <a 
href="#x1-90001.1.6">Code Example</a></span>
   </div>
   <h5 class="subsubsectionHead"><span class="titlemark">1.1.1   </span> <a 
 id="x1-40001.1.1"></a>Sessions</h5>
<!--l. 73--><p class="noindent" >To start working with Sedna application has to open a session via establishing
an authenticated connection with the server. The Java API defines the
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">SednaConnection</span></span></span> interface to represent a session.
<!--l. 77--><p class="indent" >   To open a session application uses static method <span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">getConnection</span></span></span> of the
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-12">DatabaseManager</span></span></span> class.
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-1">
&#x00A0;SednaConnection&#x00A0;getConnection(String&#x00A0;url,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;String&#x00A0;DBName,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;String&#x00A0;user,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;String&#x00A0;password)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;throws&#x00A0;DriverException
</div>
<!--l. 87--><p class="nopar" >
<!--l. 90--><p class="indent" >   <span 
class="cmr-10x-x-109">Parameters:</span>
<!--l. 92--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">url</span></span></span> <span 
class="cmr-10x-x-109">- the name of the computer where the Sedna DBMS is running. This parameter</span>
<span 
class="cmr-10x-x-109">may contain a port number. If the port number is not specified, the default port number</span>
<span 
class="cmr-10x-x-109">(5050) is used.</span>
<!--l. 96--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DBName</span></span></span> <span 
class="cmr-10x-x-109">- the name of the database to connect.</span>
<!--l. 98--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">user</span></span></span> <span 
class="cmr-10x-x-109">- user name.</span>
<!--l. 100--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">password</span></span></span> <span 
class="cmr-10x-x-109">- user password.</span>
<!--l. 102--><p class="indent" >   <span 
class="cmr-10x-x-109">If the connection is established and authentication succeeds the method returns an</span>
<span 
class="cmr-10x-x-109">object that implements the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">interface. Otherwise, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DriverException</span></span></span> <span 
class="cmr-10x-x-109">is</span>
<span 
class="cmr-10x-x-109">thrown.</span>
<!--l. 106--><p class="indent" >   <span 
class="cmr-10x-x-109">Application can close session using the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">close</span></span></span> <span 
class="cmr-10x-x-109">method of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span>
<span 
class="cmr-10x-x-109">interface.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-2">
&#x00A0;public&#x00A0;void&#x00A0;close()&#x00A0;throws&#x00A0;DriverException
</div>
<!--l. 111--><p class="nopar" >
<!--l. 113--><p class="indent" >   <span 
class="cmr-10x-x-109">If the server does not manage to close connection properly the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">close</span></span></span> <span 
class="cmr-10x-x-109">method throws</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DriverException</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 116--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">isClosed</span></span></span> <span 
class="cmr-10x-x-109">method retrieves whether this connection has been closed or not. A</span>
<span 
class="cmr-10x-x-109">connection is closed if the method </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">close</span></span></span> <span 
class="cmr-10x-x-109">has been called on it or if certain fatal errors</span>
<span 
class="cmr-10x-x-109">have occurred.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-3">
&#x00A0;public&#x00A0;boolean&#x00A0;isClosed()
</div>
<!--l. 122--><p class="nopar" >
<!--l. 124--><p class="indent" >   <span 
class="cmr-10x-x-109">Setting connection into debug mode allows getting debug information when XQuery</span>
<span 
class="cmr-10x-x-109">query fails due to some reason (see </span><a 
href="#x1-630002.7.2"><span 
class="cmr-10x-x-109">2.7.2</span><!--tex4ht:ref: debug-mode --></a> <span 
class="cmr-10x-x-109">for details). To set the connection into debug</span>
<span 
class="cmr-10x-x-109">mode use </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">setDebugMode</span></span></span> <span 
class="cmr-10x-x-109">method of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">interface:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-4">
&#x00A0;public&#x00A0;void&#x00A0;setDebugMode(boolean&#x00A0;debug)
</div>
<!--l. 131--><p class="nopar" >
<!--l. 133--><p class="indent" >   <span 
class="cmr-10x-x-109">Parameters:</span>
<!--l. 135--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">debug</span></span></span> <span 
class="cmr-10x-x-109">- set to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">true</span></span></span> <span 
class="cmr-10x-x-109">to turn debug mode on; set to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">false</span></span></span> <span 
class="cmr-10x-x-109">to turn debug mode off.</span>
<span 
class="cmr-10x-x-109">Debug mode is off by default.</span>
<!--l. 138--><p class="indent" >   <span 
class="cmr-10x-x-109">Sedna supports </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">fn:trace</span></span></span> <span 
class="cmr-10x-x-109">function for debugging purpose also (see </span><a 
href="#x1-620002.7.1"><span 
class="cmr-10x-x-109">2.7.1</span><!--tex4ht:ref: trace --></a> <span 
class="cmr-10x-x-109">for details).</span>
<span 
class="cmr-10x-x-109">By default trace output is included into XQuery query result. You can turn</span>
<span 
class="cmr-10x-x-109">trace output on/off using </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">setTraceOutput</span></span></span> <span 
class="cmr-10x-x-109">method of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span>
<span 
class="cmr-10x-x-109">interface:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-5">
&#x00A0;public&#x00A0;void&#x00A0;setTraceOutput(boolean&#x00A0;doTrace)
</div>
<!--l. 145--><p class="nopar" >
<!--l. 147--><p class="indent" >   <span 
class="cmr-10x-x-109">Parameters:</span>
<!--l. 149--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">doTrace</span></span></span> <span 
class="cmr-10x-x-109">- set to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">true</span></span></span> <span 
class="cmr-10x-x-109">to turn trace output on; set to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">false</span></span></span> <span 
class="cmr-10x-x-109">to turn trace output off.</span>
<span 
class="cmr-10x-x-109">Trace output is on by default.</span>
<!--l. 156--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.1.2   </span></span> <a 
 id="x1-50001.1.2"></a><span 
class="cmr-10x-x-109">Transactions Management</span></h5>
<!--l. 157--><p class="noindent" ><span 
class="cmr-10x-x-109">Application can execute queries and updates against specified database only in the</span>
<span 
class="cmr-10x-x-109">scope of a transaction. That is, once a session has been opened, application</span>
<span 
class="cmr-10x-x-109">can begin a transaction, execute statements and commit (or rollback) this</span>
<span 
class="cmr-10x-x-109">transaction.</span>
<!--l. 162--><p class="indent" >   <span 
class="cmr-10x-x-109">In the session transactions are processed sequentially. That is, application must</span>
<span 
class="cmr-10x-x-109">commit a begun transaction before beginning a new one.</span>
<!--l. 165--><p class="indent" >   <span 
class="cmr-10x-x-109">To specify transaction boundaries application uses methods of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span>
<span 
class="cmr-10x-x-109">interface: </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">begin</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">commit</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 168--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">begin</span></span></span> <span 
class="cmr-10x-x-109">method begins a new transaction.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-6">
&#x00A0;public&#x00A0;void&#x00A0;begin()&#x00A0;throws&#x00A0;DriverException
</div>
<!--l. 172--><p class="nopar" >
<!--l. 174--><p class="indent" >   <span 
class="cmr-10x-x-109">If the transaction has not begun successfully the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">begin</span></span></span> <span 
class="cmr-10x-x-109">method throws</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DriverException</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 177--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">commit</span></span></span> <span 
class="cmr-10x-x-109">method commits a transaction.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-7">
&#x00A0;public&#x00A0;void&#x00A0;commit()&#x00A0;throws&#x00A0;DriverException
</div>
<!--l. 181--><p class="nopar" >
<!--l. 183--><p class="indent" >   <span 
class="cmr-10x-x-109">If the transaction has not been committed successfully the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">commit</span></span></span> <span 
class="cmr-10x-x-109">method throws</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DriverException</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 186--><p class="indent" >   <span 
class="cmr-10x-x-109">To rollback transaction the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">rollback</span></span></span> <span 
class="cmr-10x-x-109">method is used.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-8">
&#x00A0;public&#x00A0;void&#x00A0;rollback()&#x00A0;throws&#x00A0;DriverException
</div>
<!--l. 190--><p class="nopar" >
<!--l. 192--><p class="indent" >   <span 
class="cmr-10x-x-109">If the transaction has not been rollback successfully the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">rollback</span></span></span> <span 
class="cmr-10x-x-109">method throws</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DriverException</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 195--><p class="indent" >   <span 
class="cmr-10x-x-109">The Java API does not provide auto-commit mode for transactions. That is, every</span>
<span 
class="cmr-10x-x-109">transaction must be explicitly started (by means of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">begin</span></span></span><span 
class="cmr-10x-x-109">) and committed (by means of</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">commit</span></span></span><span 
class="cmr-10x-x-109">). If session is closed (by means of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">close</span></span></span><span 
class="cmr-10x-x-109">) before a transaction committed, server</span>
<span 
class="cmr-10x-x-109">does rollback for that transaction, and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">close</span></span></span> <span 
class="cmr-10x-x-109">throws </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DriverException</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 205--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.1.3   </span></span> <a 
 id="x1-60001.1.3"></a><span 
class="cmr-10x-x-109">Statements</span></h5>
<!--l. 207--><p class="noindent" ><span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaStatement</span></span></span> <span 
class="cmr-10x-x-109">interface provides methods for loading documents into the</span>
<span 
class="cmr-10x-x-109">database, executing statements of the database language defined in Section </span><a 
href="#x1-270002"><span 
class="cmr-10x-x-109">2</span><!--tex4ht:ref: sec:DBLang --></a> <span 
class="cmr-10x-x-109">and</span>
<span 
class="cmr-10x-x-109">retrieving results that statements produce. </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaStatement</span></span></span> <span 
class="cmr-10x-x-109">object is created using the</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">createStatement</span></span></span> <span 
class="cmr-10x-x-109">method of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">interface:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-9">
&#x00A0;public&#x00A0;SednaStatement&#x00A0;createStatement()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;throws&#x00A0;DriverException
</div>
<!--l. 216--><p class="nopar" >
<!--l. 218--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaStatement</span></span></span> <span 
class="cmr-10x-x-109">object may only be created on an open connection. Otherwise, the</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">createStatement</span></span></span> <span 
class="cmr-10x-x-109">method throws </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DriverException</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 221--><p class="indent" >   <span 
class="cmr-10x-x-109">To load the document into the database use:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-10">
&#x00A0;public&#x00A0;void&#x00A0;loadDocument(InputStream&#x00A0;in,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;String&#x00A0;doc_name)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;throws&#x00A0;DriverException,&#x00A0;IOException
</div>
<!--l. 227--><p class="nopar" >
<!--l. 229--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">in</span></span></span> <span 
class="cmr-10x-x-109">parameter is an input stream to get the document from. The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">doc_name</span></span></span>
<span 
class="cmr-10x-x-109">parameter is the name for this document in the database.</span>
<!--l. 232--><p class="indent" >   <span 
class="cmr-10x-x-109">To load the document into the specified collection of the database use:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-11">
&#x00A0;public&#x00A0;void&#x00A0;loadDocument(InputStream&#x00A0;in,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;String&#x00A0;doc_name,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;String&#x00A0;col_name)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;throws&#x00A0;DriverException,&#x00A0;IOException
</div>
<!--l. 239--><p class="nopar" >
<!--l. 241--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">in</span></span></span> <span 
class="cmr-10x-x-109">parameter is an input stream to get the document from. The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">doc_name</span></span></span>
<span 
class="cmr-10x-x-109">parameter is the name for this document in the database. The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">col_name</span></span></span> <span 
class="cmr-10x-x-109">parameter is</span>
<span 
class="cmr-10x-x-109">the name of the collection to load the document into.</span>
<!--l. 246--><p class="indent" >   <span 
class="cmr-10x-x-109">To execute a statement the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">execute</span></span></span> <span 
class="cmr-10x-x-109">methods of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaStatement</span></span></span> <span 
class="cmr-10x-x-109">are</span>
<span 
class="cmr-10x-x-109">used.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-12">
&#x00A0;public&#x00A0;boolean&#x00A0;execute(String&#x00A0;queryText)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;throws&#x00A0;DriverException
</div>
<!--l. 252--><p class="nopar" >
<!--l. 254--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">queryText</span></span></span> <span 
class="cmr-10x-x-109">parameter contains the text of the statement.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-13">
&#x00A0;public&#x00A0;boolean&#x00A0;execute(InputSteram&#x00A0;in)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;throws&#x00A0;DriverException
</div>
<!--l. 259--><p class="nopar" >
<!--l. 261--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">in</span></span></span> <span 
class="cmr-10x-x-109">parameter is some input stream to read an XQuery statement from.</span>
<!--l. 263--><p class="indent" >   <span 
class="cmr-10x-x-109">Some statements (such as XQuery statements or the retrieve metadata command)</span>
<span 
class="cmr-10x-x-109">produce the result. In case of such statements, the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">execute</span></span></span> <span 
class="cmr-10x-x-109">methods return true and</span>
<span 
class="cmr-10x-x-109">the result can be obtained as described in Section </span><a 
href="#x1-70001.1.4"><span 
class="cmr-10x-x-109">1.1.4</span><!--tex4ht:ref: sec:results --></a><span 
class="cmr-10x-x-109">. In case of statements that do</span>
<span 
class="cmr-10x-x-109">not produce the result (such as updates or bulk load), the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">execute</span></span></span> <span 
class="cmr-10x-x-109">methods return</span>
<span 
class="cmr-10x-x-109">false.</span>
<!--l. 269--><p class="indent" >   <span 
class="cmr-10x-x-109">The results of XQuery queries to the Sedna DBMS can be represented either in</span>
<span 
class="cmr-10x-x-109">XML or SXML</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:sxml"><span 
class="cmr-10x-x-109">11</span></a><span 
class="cmr-10x-x-109">]</span></span><span 
class="cmr-10x-x-109">. To specify the type of the result use the following extended</span>
<span 
class="cmr-10x-x-109">versions of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">execute</span></span></span> <span 
class="cmr-10x-x-109">method:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-14">
&#x00A0;boolean&#x00A0;execute(InputStream&#x00A0;in,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;ResultType&#x00A0;resultType)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;throws&#x00A0;DriverException,&#x00A0;IOException;
</div>
<!--l. 277--><p class="nopar" >
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-15">
&#x00A0;boolean&#x00A0;execute(String&#x00A0;queryText,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;ResultType&#x00A0;resultType)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;throws&#x00A0;DriverException,&#x00A0;IOException;
</div>
<!--l. 283--><p class="nopar" >
<!--l. 285--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">resultType</span></span></span> <span 
class="cmr-10x-x-109">parameter is either </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">ResultType.XML</span></span></span> <span 
class="cmr-10x-x-109">or </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">ResultType.SXML</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 292--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.1.4   </span></span> <a 
 id="x1-70001.1.4"></a><span 
class="cmr-10x-x-109">Results</span></h5>
<!--l. 295--><p class="noindent" ><span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaSerializedResult</span></span></span> <span 
class="cmr-10x-x-109">interface represents the result of the statement</span>
<span 
class="cmr-10x-x-109">evaluation. Application can obtain the result using the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">getSerializedResult</span></span></span> <span 
class="cmr-10x-x-109">method</span>
<span 
class="cmr-10x-x-109">of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaStatement</span></span></span> <span 
class="cmr-10x-x-109">interface.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-16">
&#x00A0;public&#x00A0;SednaSerializedResult&#x00A0;getSerializedResult()
</div>
<!--l. 301--><p class="nopar" >
<!--l. 303--><p class="indent" >   <span 
class="cmr-10x-x-109">The result of the non-XQuery statement evaluation is retrieved as a sequence with</span>
<span 
class="cmr-10x-x-109">only one item, where the item is a string. For example, in case of the retrieve</span>
<span 
class="cmr-10x-x-109">descriptive schema command the result is a sequence with an item that is a</span>
<span 
class="cmr-10x-x-109">descriptive schema represented as a string. The result of the XQuery statement</span>
<span 
class="cmr-10x-x-109">evaluation is retrieved as a sequence of items, where every item is represented as a</span>
<span 
class="cmr-10x-x-109">string.</span>
<!--l. 310--><p class="indent" >   <span 
class="cmr-10x-x-109">Application can use the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">next</span></span></span> <span 
class="cmr-10x-x-109">methods of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaSerializedResult</span></span></span> <span 
class="cmr-10x-x-109">interface to</span>
<span 
class="cmr-10x-x-109">iterate over the result sequence:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-17">
&#x00A0;public&#x00A0;String&#x00A0;next()&#x00A0;throws&#x00A0;DriverException
</div>
<!--l. 315--><p class="nopar" >
<!--l. 317--><p class="indent" >   <span 
class="cmr-10x-x-109">The method returns an item of the result sequence as a string. If the sequence has</span>
<span 
class="cmr-10x-x-109">ended it returns null. It throws </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DriverException</span></span></span> <span 
class="cmr-10x-x-109">in the case of error.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-18">
&#x00A0;public&#x00A0;int&#x00A0;next(Writer&#x00A0;writer)&#x00A0;throws&#x00A0;DriverException
</div>
<!--l. 323--><p class="nopar" >
<!--l. 325--><p class="indent" >   <span 
class="cmr-10x-x-109">The method writes an item of the result sequence to some output stream using</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">writer</span></span></span><span 
class="cmr-10x-x-109">. It returns 0 if an item was retrieved and written successful, and 1</span>
<span 
class="cmr-10x-x-109">if the result sequence has ended. It throws </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DriverException</span></span></span> <span 
class="cmr-10x-x-109">in the case of</span>
<span 
class="cmr-10x-x-109">error.</span>
<!--l. 330--><p class="indent" >   <span 
class="cmr-10x-x-109">Please, notice, that in the current version of the Sedna DBMS application has to</span>
<span 
class="cmr-10x-x-109">execute statements and use the results of their execution sequentially. To explain</span>
<span 
class="cmr-10x-x-109">this note, suppose application execute a statement, obtains a result of that</span>
<span 
class="cmr-10x-x-109">statement execution and iterates over this result. If, after that, application executes</span>
<span 
class="cmr-10x-x-109">next statement, it cannot iterate over the result of the previous statement any</span>
<span 
class="cmr-10x-x-109">more.</span>
<!--l. 341--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.1.5   </span></span> <a 
 id="x1-80001.1.5"></a><span 
class="cmr-10x-x-109">Exceptions</span></h5>
<!--l. 343--><p class="noindent" ><span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DriverException</span></span></span> <span 
class="cmr-10x-x-109">class provides information about errors that occur while</span>
<span 
class="cmr-10x-x-109">application works with the Sedna DBMS through the Java API. </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DriverException</span></span></span> <span 
class="cmr-10x-x-109">is</span>
<span 
class="cmr-10x-x-109">also thrown when application loses its connection with the server.</span>
<!--l. 352--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.1.6   </span></span> <a 
 id="x1-90001.1.6"></a><span 
class="cmr-10x-x-109">Code Example</span></h5>
<!--l. 354--><p class="noindent" ><span 
class="cmr-10x-x-109">In this section we provide an example program that uses the Java API to work</span>
<span 
class="cmr-10x-x-109">with Sedna DBMS. This application connects to the Sedna DBMS, opens a</span>
<span 
class="cmr-10x-x-109">session. The session consists of one transaction. Application loads data from</span>
<span 
class="cmr-10x-x-109">the file </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">region.xml</span></span></span> <span 
class="cmr-10x-x-109">and executes the XQuery statement. When statement is</span>
<span 
class="cmr-10x-x-109">executed, application drop the document, commits the transaction and closes the</span>
<span 
class="cmr-10x-x-109">session.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-19">
import&#x00A0;ru.ispras.sedna.driver.*;
&#x00A0;<br />class&#x00A0;Client&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;public&#x00A0;static&#x00A0;void&#x00A0;main(String&#x00A0;args[])&#x00A0;{
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;SednaConnection&#x00A0;con&#x00A0;=&#x00A0;null;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;try&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;/*&#x00A0;Get&#x00A0;a&#x00A0;connection&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;con&#x00A0;=&#x00A0;DatabaseManager.getConnection("localhost",
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"testdb",
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"SYSTEM",
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"MANAGER");
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;/*&#x00A0;Begin&#x00A0;a&#x00A0;new&#x00A0;transaction&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;con.begin();
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;/*&#x00A0;Create&#x00A0;statement&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;SednaStatement&#x00A0;st&#x00A0;=&#x00A0;con.createStatement();
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;/*&#x00A0;Load&#x00A0;XML&#x00A0;into&#x00A0;the&#x00A0;database&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;System.out.println("Loading&#x00A0;data&#x00A0;...");
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;boolean&#x00A0;res;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;res&#x00A0;=&#x00A0;st.execute("LOAD&#x00A0;&#8217;C:/region.xml&#8217;&#x00A0;&#8217;region&#8217;");
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;System.out.println("Document&#x00A0;&#8217;region.xml&#8217;&#x00A0;"+
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"has&#x00A0;been&#x00A0;loaded&#x00A0;successfully");
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;/*&#x00A0;Execute&#x00A0;query&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;System.out.println("Executing&#x00A0;query");
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;res&#x00A0;=&#x00A0;st.execute("doc(&#8217;region&#8217;)/*/*");
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;/*&#x00A0;Print&#x00A0;query&#x00A0;results&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;printQueryResults(st);
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;/*&#x00A0;Remove&#x00A0;document&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;System.out.println("Removing&#x00A0;document&#x00A0;...");
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;res&#x00A0;=&#x00A0;st.execute("DROP&#x00A0;DOCUMENT&#x00A0;&#8217;region&#8217;");
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;System.out.println("Document&#x00A0;&#8217;region&#8217;&#x00A0;"&#x00A0;+
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"has&#x00A0;been&#x00A0;dropped&#x00A0;successfully");
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;/*&#x00A0;Commit&#x00A0;current&#x00A0;transaction&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;con.commit();
                                                                          

                                                                          
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;catch(DriverException&#x00A0;e)&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;e.printStackTrace();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;finally&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;/*&#x00A0;Properly&#x00A0;close&#x00A0;connection&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;try&#x00A0;{&#x00A0;if(con&#x00A0;!=&#x00A0;null)&#x00A0;con.close();&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;catch(DriverException&#x00A0;e)&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;e.printStackTrace();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;}
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;/*&#x00A0;Pretty&#x00A0;printing&#x00A0;for&#x00A0;query&#x00A0;results&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;private&#x00A0;static&#x00A0;void&#x00A0;printQueryResults(SednaStatement&#x00A0;st)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;throws&#x00A0;DriverException&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;int&#x00A0;count&#x00A0;=&#x00A0;1;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;String&#x00A0;item;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;SednaSerializedResult&#x00A0;pr&#x00A0;=&#x00A0;st.getSerializedResult();
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;while&#x00A0;((item&#x00A0;=&#x00A0;pr.next())&#x00A0;!=&#x00A0;null)&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;System.out.println(count&#x00A0;+&#x00A0;"&#x00A0;item:&#x00A0;"&#x00A0;+&#x00A0;item);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;count++;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;}
&#x00A0;<br />&#x00A0;&#x00A0;}
&#x00A0;<br />}
</div>
<!--l. 427--><p class="nopar" >
<!--l. 429--><p class="indent" >   <span 
class="cmr-10x-x-109">The full-version source code of this example program can be found at:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-20">
[win:]&#x00A0;INSTALL_DIR\examples\api\java\Client.java
&#x00A0;<br />[nix:]&#x00A0;INSTALL_DIR/examples/api/java/Client.java
</div>
<!--l. 433--><p class="nopar" > <span 
class="cmr-10x-x-109">where </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">INSTALL_DIR</span></span></span> <span 
class="cmr-10x-x-109">refers to the directory where Sedna is installed.</span>
<!--l. 436--><p class="indent" >   <span 
class="cmr-10x-x-109">Before running the example make sure that the Sedna DBMS is installed and do the</span>
<span 
class="cmr-10x-x-109">following steps:</span>
<!--l. 439--><p class="indent" >
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-9002x1"><span 
class="cmr-10x-x-109">Start Sedna by running the following command:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-21">
      se_gov
</div>
      <!--l. 443--><p class="nopar" > <span 
class="cmr-10x-x-109">If Sedna is started successfully it prints &#8221;GOVERNOR has been started in the</span>
      <span 
class="cmr-10x-x-109">background mode&#8221;.</span>
      </li>
      <li 
  class="enumerate" id="x1-9004x2"><span 
class="cmr-10x-x-109">Create a new database </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">testdb</span></span></span> <span 
class="cmr-10x-x-109">by running the following command:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-22">
      se_cdb&#x00A0;testdb
</div>
      <!--l. 449--><p class="nopar" > <span 
class="cmr-10x-x-109">If the database is created successfully it prints &#8221;The database &#8217;testdb&#8217; has been</span>
      <span 
class="cmr-10x-x-109">created successfully&#8221;.</span>
      </li>
      <li 
  class="enumerate" id="x1-9006x3"><span 
class="cmr-10x-x-109">Start the testdb database by running the following command:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-23">
      se_sm&#x00A0;testdb
</div>
      <!--l. 455--><p class="nopar" > <span 
class="cmr-10x-x-109">If the database is started successfully it prints &#8221;SM has been started in the</span>
      <span 
class="cmr-10x-x-109">background mode&#8221;.</span></li></ol>
<!--l. 460--><p class="indent" >   <span 
class="cmr-10x-x-109">You can compile and run the example following the steps listed below:</span>
<!--l. 462--><p class="indent" >
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-9008x1"><span 
class="cmr-10x-x-109">To compile the example, run the script:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-24">
      &#x00A0;&#x00A0;&#x00A0;&#x00A0;[win:]&#x00A0;Clientbuild.bat
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;[nix:]&#x00A0;./Clientbuild.sh
</div>
      <!--l. 467--><p class="nopar" > <span 
class="cmr-10x-x-109">located in the same folder as </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Client.java</span></span></span><span 
class="cmr-10x-x-109">.</span>
      </li>
      <li 
  class="enumerate" id="x1-9010x2"><span 
class="cmr-10x-x-109">To run the compiled example, use the script:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-25">
      &#x00A0;&#x00A0;&#x00A0;&#x00A0;[win:]&#x00A0;Client.bat
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;[nix:]&#x00A0;./Client.sh
</div>
      <!--l. 474--><p class="nopar" > <span 
class="cmr-10x-x-109">located in the same folder as </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Client.java</span></span></span><span 
class="cmr-10x-x-109">.</span></li></ol>
<!--l. 482--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.2   </span></span> <a 
 id="x1-100001.2"></a><span 
class="cmr-10x-x-109">C API</span></h4>
<!--l. 485--><p class="noindent" ><span 
class="cmr-10x-x-109">libsedna is the C application programmer&#8217;s interface to Sedna XML DBMS. libsedna is</span>
<span 
class="cmr-10x-x-109">a set of library functions that allow client programs to access one or more databases of</span>
<span 
class="cmr-10x-x-109">Sedna XML DBMS and manipulate database data using database language (XQuery</span>
<span 
class="cmr-10x-x-109">and XUpdate) described in Section 2.</span>
<!--l. 490--><p class="indent" >   <span 
class="cmr-10x-x-109">libsedna library is supplied with two header files: </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"libsedna.h"</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"sp_defs.h"</span></span></span><span 
class="cmr-10x-x-109">.</span>
<span 
class="cmr-10x-x-109">Client programs that use libsedna must include the header file libsedna.h, must link</span>
<span 
class="cmr-10x-x-109">with the libsedna library and provide the compiler with the path to the directory where</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"libsedna.h"</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sp_defs.h</span></span></span> <span 
class="cmr-10x-x-109">files are stored.</span>
<!--l. 496--><p class="indent" >   <span 
class="cmr-10x-x-109">For convenience three versions of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">libsedna</span></span></span> <span 
class="cmr-10x-x-109">are provided on the Windows operating</span>
<span 
class="cmr-10x-x-109">system:</span>
<!--l. 499--><p class="indent" >
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-10002x1"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">libsednamt.lib</span></span></span> <span 
class="cmr-10x-x-109">- static multi-threaded version built with /MT option. Use</span>
      <span 
class="cmr-10x-x-109">it if you compile your project with /MT[d] option.</span>
      </li>
      <li 
  class="enumerate" id="x1-10004x2"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">libsednamd.lib</span></span></span> <span 
class="cmr-10x-x-109">- static multi-threaded version built with /MD option. Use</span>
      <span 
class="cmr-10x-x-109">it if you compile your project with /MD[d] option.</span>
      </li>
      <li 
  class="enumerate" id="x1-10006x3"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sednamt.dll</span></span></span> <span 
class="cmr-10x-x-109">- dynamic version. </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sednamt.lib</span></span></span> <span 
class="cmr-10x-x-109">is import library.</span></li></ol>
<!--l. 507--><p class="indent" >   <span 
class="cmr-10x-x-109">On Unix-like operating systems the following versions of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">libsedna</span></span></span> <span 
class="cmr-10x-x-109">are</span>
<span 
class="cmr-10x-x-109">provided:</span>
<!--l. 510--><p class="indent" >
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-10008x1"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">libsedna.so</span></span></span> <span 
class="cmr-10x-x-109">- dynamic shared library.</span>
      </li>
      <li 
  class="enumerate" id="x1-10010x2"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">libsedna.a</span></span></span> <span 
class="cmr-10x-x-109">- static version of the library.</span>
                                                                          

                                                                          
      </li>
      <li 
  class="enumerate" id="x1-10012x3"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">libsedna_pic.a</span></span></span> <span 
class="cmr-10x-x-109">- static version of the library with PIC enabled. You may</span>
      <span 
class="cmr-10x-x-109">need it to build drivers for Sedna which are based on </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">libsedna</span></span></span><span 
class="cmr-10x-x-109">.</span></li></ol>
<!--l. 521--><p class="noindent" >
   <div class="subsubsectionTOCS">
   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">1.2.1 </span><a 
href="#x1-110001.2.1"><span 
class="cmr-10x-x-109">Errors Handling</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">1.2.2 </span><a 
href="#x1-120001.2.2"><span 
class="cmr-10x-x-109">Connecting to a Database</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">1.2.3 </span><a 
href="#x1-130001.2.3"><span 
class="cmr-10x-x-109">Setting Session Options</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">1.2.4 </span><a 
href="#x1-140001.2.4"><span 
class="cmr-10x-x-109">Transactions Management</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">1.2.5 </span><a 
href="#x1-150001.2.5"><span 
class="cmr-10x-x-109">Getting Connection and Transaction Status</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">1.2.6 </span><a 
href="#x1-160001.2.6"><span 
class="cmr-10x-x-109">Executing Queries and Updates</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">1.2.7 </span><a 
href="#x1-170001.2.7"><span 
class="cmr-10x-x-109">Loading Data</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">1.2.8 </span><a 
href="#x1-180001.2.8"><span 
class="cmr-10x-x-109">Example Code</span></a></span>
   </div>
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.2.1   </span></span> <a 
 id="x1-110001.2.1"></a><span 
class="cmr-10x-x-109">Errors Handling</span></h5>
<!--l. 523--><p class="noindent" ><span 
class="cmr-10x-x-109">C API provides set of functions for sessions and transactions management, query and</span>
<span 
class="cmr-10x-x-109">update statements execution, etc. If the function fails it returns negative value. In this</span>
<span 
class="cmr-10x-x-109">case application can obtain the error message and code which help to understand the</span>
<span 
class="cmr-10x-x-109">reason of the error occurred.</span>
<!--l. 528--><p class="indent" >   <span 
class="cmr-10x-x-109">To get the last error message use </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEgetLastErrorMsg</span></span></span> <span 
class="cmr-10x-x-109">function:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-26">
char*&#x00A0;SEgetLastErrorMsg(SednaConnection*&#x00A0;conn)
</div>
<!--l. 532--><p class="nopar" >
<!--l. 534--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type (see </span><a 
href="#x1-120001.2.2"><span 
class="cmr-10x-x-109">1.2.2</span><!--tex4ht:ref: c-api-connecting --></a><span 
class="cmr-10x-x-109">,</span>
      <span 
class="cmr-10x-x-109">Connecting to a Database section for details on how to obtain a connection</span>
      <span 
class="cmr-10x-x-109">instance).</span></li></ul>
<!--l. 543--><p class="indent" >   <span 
class="cmr-10x-x-109">The function </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEgetLastErrorCode</span></span></span> <span 
class="cmr-10x-x-109">returns the last error code occurred in the</span>
<span 
class="cmr-10x-x-109">session:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-27">
int&#x00A0;SEgetLastErrorCode(struct&#x00A0;SednaConnection&#x00A0;*conn)
</div>
<!--l. 548--><p class="nopar" >
<!--l. 550--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type (see </span><a 
href="#x1-120001.2.2"><span 
class="cmr-10x-x-109">1.2.2</span><!--tex4ht:ref: c-api-connecting --></a><span 
class="cmr-10x-x-109">,</span>
      <span 
class="cmr-10x-x-109">Connecting to a Database section for details on how to obtain a connection</span>
      <span 
class="cmr-10x-x-109">instance).</span></li></ul>
<!--l. 563--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.2.2   </span></span> <a 
 id="x1-120001.2.2"></a><span 
class="cmr-10x-x-109">Connecting to a Database</span></h5>
<!--l. 566--><p class="noindent" ><span 
class="cmr-10x-x-109">Before working with Sedna an application has to declare variable of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span>
<span 
class="cmr-10x-x-109">type and initialize it in the following manner:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-28">
struct&#x00A0;SednaConnection&#x00A0;conn&#x00A0;=&#x00A0;SEDNA_CONNECTION_INITIALIZER;
</div>
<!--l. 571--><p class="nopar" >
   <div class="newtheorem">
<!--l. 573--><p class="noindent" ><span class="head">
<span 
class="cmbx-10x-x-109">Note</span><span 
class="cmbx-10x-x-109">&#x00A0;1</span> </span><span 
class="cmti-10x-x-109">The initialization with </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_CONNECTION_INITIALIZER</span></span></span> <span 
class="cmti-10x-x-109">is mandatory</span>
<span 
class="cmti-10x-x-109">for Sedna version 0.5 and earlier.</span>
   </div>
<!--l. 578--><p class="indent" >   <span 
class="cmr-10x-x-109">To start working with Sedna an application has to open a session via establishing an</span>
<span 
class="cmr-10x-x-109">authenticated connection with the server using </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEconnect</span></span></span><span 
class="cmr-10x-x-109">:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-29">
int&#x00A0;SEconnect(SednaConnection*&#x00A0;conn,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;const&#x00A0;char*&#x00A0;url,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;const&#x00A0;char*&#x00A0;db_name,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;const&#x00A0;char*&#x00A0;login,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;const&#x00A0;char*&#x00A0;password)
</div>
<!--l. 587--><p class="nopar" >
<!--l. 589--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- is a pointer to an instance of SednaConnection type, that is associated</span>
      <span 
class="cmr-10x-x-109">with a session. The instance of SednaConnection type is initialized by the</span>
      <span 
class="cmr-10x-x-109">SEconnect if the session is open successfully.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">url</span></span></span> <span 
class="cmr-10x-x-109">- the name of the computer where the Sedna DBMS is running. This</span>
      <span 
class="cmr-10x-x-109">parameter may contain a port number. If the port number is not specified,</span>
      <span 
class="cmr-10x-x-109">the default port number (5050) is used.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">db_name</span></span></span> <span 
class="cmr-10x-x-109">- the name of the database to connect to.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">login</span></span></span> <span 
class="cmr-10x-x-109">- user login.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">password</span></span></span> <span 
class="cmr-10x-x-109">- user password.</span></li></ul>
<!--l. 604--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
<!--l. 609--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function succeeds, the return value is positive:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_SESSION_OPEN</span></span></span>  <span 
class="cmr-10x-x-109">-   connection   to   the   database   is   established,</span>
      <span 
class="cmr-10x-x-109">authentication passed successfully.</span></li></ul>
<!--l. 617--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function fails, the return value is negative and session is not opened:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_AUTHENTICATION_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- authentication failed.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_OPEN_SESSION_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- failed to open session.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR</span></span></span> <span 
class="cmr-10x-x-109">- some error occurred.</span></li></ul>
                                                                          

                                                                          
<!--l. 626--><p class="indent" >   <span 
class="cmr-10x-x-109">To access multiple databases at one time or to better process its complex logic an</span>
<span 
class="cmr-10x-x-109">application can have several sessions open at one time.</span>
<!--l. 629--><p class="indent" >   <span 
class="cmr-10x-x-109">When an application finished it&#8217;s work with the database, it must close the session.</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEclose</span></span></span> <span 
class="cmr-10x-x-109">finishes the session and closes the connection to the server. </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEclose</span></span></span> <span 
class="cmr-10x-x-109">also frees</span>
<span 
class="cmr-10x-x-109">resources that were equipped by the call to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEconnect</span></span></span> <span 
class="cmr-10x-x-109">function, that is for every</span>
<span 
class="cmr-10x-x-109">successful call to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEconnect</span></span></span> <span 
class="cmr-10x-x-109">there must be a call to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEclose</span></span></span> <span 
class="cmr-10x-x-109">in the client program. You</span>
<span 
class="cmr-10x-x-109">must call </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEclose</span></span></span> <span 
class="cmr-10x-x-109">both when application finishes its work with the database,</span>
<span 
class="cmr-10x-x-109">and when application cannot work with the database anymore due to some</span>
<span 
class="cmr-10x-x-109">error.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-30">
int&#x00A0;SEclose(SednaConnection*&#x00A0;conn)
</div>
<!--l. 639--><p class="nopar" >
<!--l. 641--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the SednaConnection type, associated with</span>
      <span 
class="cmr-10x-x-109">a session to be closed.</span></li></ul>
<!--l. 649--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
<!--l. 654--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function succeeds, the return value is positive:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_SESSION_CLOSED</span></span></span> <span 
class="cmr-10x-x-109">- session closed successfully.</span></li></ul>
<!--l. 661--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function fails, the return value is negative:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_CLOSE_SESSION_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- session closed with errors.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR</span></span></span> <span 
class="cmr-10x-x-109">- some error occurred.</span></li></ul>
<!--l. 673--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.2.3   </span></span> <a 
 id="x1-130001.2.3"></a><span 
class="cmr-10x-x-109">Setting Session Options</span></h5>
<!--l. 676--><p class="noindent" ><span 
class="cmr-10x-x-109">An application can set attributes that govern aspects of a session using</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEsetConnectionAttr</span></span></span><span 
class="cmr-10x-x-109">:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-31">
int&#x00A0;SEsetConnectionAttr(struct&#x00A0;SednaConnection&#x00A0;*conn,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;enum&#x00A0;SEattr&#x00A0;attr,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;const&#x00A0;void*&#x00A0;attrValue,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;int&#x00A0;attrValueLength)
</div>
<!--l. 684--><p class="nopar" >
<!--l. 686--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the SednaConnection type, associated with</span>
      <span 
class="cmr-10x-x-109">a session to be closed.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">attr</span></span></span> <span 
class="cmr-10x-x-109">- an attribute to set (one of the predefined Sedna connection attributes</span>
      <span 
class="cmr-10x-x-109">listed below).</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">attrValue</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to the value to be associated with the attribute.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">attrValueLength</span></span></span> <span 
class="cmr-10x-x-109">- a length of the value in bytes.</span></li></ul>
<!--l. 699--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
<!--l. 704--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function succeeds, the return value is positive:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_SET_ATTRIBUTE_SUCCEEDED</span></span></span> <span 
class="cmr-10x-x-109">- the attribute was set successfully.</span></li></ul>
<!--l. 711--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function fails, the return value is negative:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR</span></span></span> <span 
class="cmr-10x-x-109">- some error occurred.</span></li></ul>
<!--l. 720--><p class="noindent" ><span 
class="cmbx-10x-x-109">Supported attributes:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ATTR_AUTOCOMMIT</span></span></span> <span 
class="cmr-10x-x-109">Autocommit  mode  is  the  default  transaction</span>
      <span 
class="cmr-10x-x-109">management  mode  of  the  Sedna  server  (</span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_AUTOCOMMIT_OFF</span></span></span> <span 
class="cmr-10x-x-109">is  the</span>
      <span 
class="cmr-10x-x-109">default  value  of  this  attribute).  Every  XQuery  or  update  statement  is</span>
      <span 
class="cmr-10x-x-109">committed  or  rolled  back  when  it  completes.  If  a  statement  completes</span>
      <span 
class="cmr-10x-x-109">successfully, it is committed; if it encounters any error, it is rolled back. A</span>
                                                                          

                                                                          
      <span 
class="cmr-10x-x-109">connection to an instance of the Sedna database operates in autocommit</span>
      <span 
class="cmr-10x-x-109">mode whenever this default mode has not been overridden by setting this</span>
      <span 
class="cmr-10x-x-109">attribute into </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_AUTOCOMMIT_OFF</span></span></span> <span 
class="cmr-10x-x-109">value.</span>
      <div class="tabular"> <table id="TBL-2" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-2-1g"><col 
id="TBL-2-1"></colgroup><colgroup id="TBL-2-2g"><col 
id="TBL-2-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-1"  
class="td11"><span 
class="cmti-10x-x-109">Atrribute values                </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-1-2"  
class="td11"><span 
class="cmti-10x-x-109">Value size</span></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-1"  
class="td11"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ATTR_AUTOCOMMIT_ON</span></span></span><span 
class="cmr-10x-x-109">, </span></td> <td  style="white-space:nowrap; text-align:left;" id="TBL-2-2-2"  
class="td11"></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-2-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-1"  
class="td11"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ATTR_AUTOCOMMIT_OFF</span></span></span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-2-3-2"  
class="td11"><span 
class="cmr-10x-x-109">sizeof(int)</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-2-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-2-4-1"  
class="td11">                         </td></tr></table>
      </div>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ATTR_SESSION_DIRECTORY</span></span></span> <span 
class="cmr-10x-x-109">connection attribute defines the</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">session</span><span 
class="cmtt-10x-x-109">&#x00A0;directory</span></span></span><span 
class="cmr-10x-x-109">. If this attribute is set, paths in the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">LOAD</span></span></span> <span 
class="cmr-10x-x-109">statement </span><a 
href="#x1-500002.4"><span 
class="cmr-10x-x-109">2.4</span><!--tex4ht:ref: bulk-load --></a> <span 
class="cmr-10x-x-109">or</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">LOAD</span><span 
class="cmtt-10x-x-109">&#x00A0;MODULE</span></span></span> <span 
class="cmr-10x-x-109">are evaluated relative to the session directory.</span>
      <div class="tabular"> <table id="TBL-3" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-3-1g"><col 
id="TBL-3-1"></colgroup><colgroup id="TBL-3-2g"><col 
id="TBL-3-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-1"  
class="td11"><span 
class="cmti-10x-x-109">Atrribute values</span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-1-2"  
class="td11"><span 
class="cmti-10x-x-109">Size of value </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-1"  
class="td11"><span 
class="cmti-10x-x-109">path to directory </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-3-2-2"  
class="td11"><span 
class="cmti-10x-x-109">length of path</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-3-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-3-3-1"  
class="td11">              </td></tr></table>
      </div>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ATTR_DEBUG</span></span></span> <span 
class="cmr-10x-x-109">connection attribute turns on/off query debug mode. Query</span>
      <span 
class="cmr-10x-x-109">debug mode is off by default. </span><span 
class="cmbx-10x-x-109">Note: </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ATTR_DEBUG</span></span></span> <span 
class="cmr-10x-x-109">connection attribute</span>
      <span 
class="cmr-10x-x-109">must be set only after </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEconnect</span></span></span> <span 
class="cmr-10x-x-109">has been called on the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span><span 
class="cmr-10x-x-109">.</span>
      <div class="tabular"> <table id="TBL-4" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-4-1g"><col 
id="TBL-4-1"></colgroup><colgroup id="TBL-4-2g"><col 
id="TBL-4-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-1-1"  
class="td11"><span 
class="cmti-10x-x-109">Atrribute values         </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-1-2"  
class="td11"><span 
class="cmti-10x-x-109">Value size</span></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-2-1"  
class="td11"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ATTR_DEBUG_ON</span></span></span><span 
class="cmr-10x-x-109">, </span></td> <td  style="white-space:nowrap; text-align:left;" id="TBL-4-2-2"  
class="td11"></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-4-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-3-1"  
class="td11"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ATTR_DEBUG_OFF</span></span></span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-4-3-2"  
class="td11"><span 
class="cmr-10x-x-109">sizeof(int)</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-4-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-4-4-1"  
class="td11">                    </td></tr></table>
      </div>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ATTR_CONCURRENCY_TYPE</span></span></span> <span 
class="cmr-10x-x-109">connection attribute changes the</span>
      <span 
class="cmr-10x-x-109">mode of the next transactions. Transaction can be set to run as</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">READ-ONLY</span></span></span> <span 
class="cmr-10x-x-109">(</span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_READONLY_TRANSACTION</span></span></span><span 
class="cmr-10x-x-109">) or </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">UPDATE</span></span></span><span 
class="cmr-10x-x-109">-transaction</span>
      <span 
class="cmr-10x-x-109">(</span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_UPDATE_TRANSACTION</span></span></span><span 
class="cmr-10x-x-109">). </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">READ-ONLY</span></span></span> <span 
class="cmr-10x-x-109">transactions have one major benefit:</span>
      <span 
class="cmr-10x-x-109">they never wait for other transactions (they do not have to acquire any</span>
      <span 
class="cmr-10x-x-109">document/collection locks). However they might access slightly obsolete state of</span>
      <span 
class="cmr-10x-x-109">the database (for example, they probably would not see the most recent</span>
      <span 
class="cmr-10x-x-109">committed updates). You should use </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">READ-ONLY</span></span></span> <span 
class="cmr-10x-x-109">transactions in a highly</span>
      <span 
class="cmr-10x-x-109">concurrent environment. Notice that the current transaction, if any, will be</span>
      <span 
class="cmr-10x-x-109">forcefully committed.</span>
      <div class="tabular"> <table id="TBL-5" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-5-1g"><col 
id="TBL-5-1"></colgroup><colgroup id="TBL-5-2g"><col 
id="TBL-5-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-5-1-1"  
class="td11"><span 
class="cmti-10x-x-109">Atrribute values                  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-1-2"  
class="td11"><span 
class="cmti-10x-x-109">Value size</span></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-5-2-1"  
class="td11"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_READONLY_TRANSACTION</span></span></span><span 
class="cmr-10x-x-109">,</span></td> <td  style="white-space:nowrap; text-align:left;" id="TBL-5-2-2"  
class="td11"></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-5-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-5-3-1"  
class="td11"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_UPDATE_TRANSACTION</span></span></span>   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-5-3-2"  
class="td11"><span 
class="cmr-10x-x-109">sizeof(int)</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-5-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-5-4-1"  
class="td11">                           </td></tr></table>
      </div>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ATTR_QUERY_EXEC_TIMEOUT</span></span></span> <span 
class="cmr-10x-x-109">connection attribute allows to set the limit on</span>
      <span 
class="cmr-10x-x-109">query execution time. If set, for each next query in this session, query execution</span>
      <span 
class="cmr-10x-x-109">will be stopped if it lasts longer than timeout set. In this case transaction in</span>
      <span 
class="cmr-10x-x-109">bounds of which the query run is rollback. By default (value 0) there is no any</span>
      <span 
class="cmr-10x-x-109">timeout for query execution, that is a query can be executed as long as</span>
                                                                          

                                                                          
      <span 
class="cmr-10x-x-109">needed.</span>
      <div class="tabular"> <table id="TBL-6" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-6-1g"><col 
id="TBL-6-1"></colgroup><colgroup id="TBL-6-2g"><col 
id="TBL-6-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-6-1-1"  
class="td11"><span 
class="cmti-10x-x-109">Atrribute values</span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-6-1-2"  
class="td11"><span 
class="cmti-10x-x-109">Value size</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-6-2-1"  
class="td11"><span 
class="cmti-10x-x-109">time in seconds  </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-6-2-2"  
class="td11"><span 
class="cmr-10x-x-109">sizeof(int)</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-6-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-6-3-1"  
class="td11">              </td></tr></table>
      </div>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ATTR_MAX_RESULT_SIZE</span></span></span> <span 
class="cmr-10x-x-109">connection attribute allows to set the</span>
      <span 
class="cmr-10x-x-109">limit on query result size. If this attribute is set, the server will cut the</span>
      <span 
class="cmr-10x-x-109">result data if its size exceeds the specified limit. By default, result data</span>
      <span 
class="cmr-10x-x-109">that is passed from server in response to user query can be of unlimited</span>
      <span 
class="cmr-10x-x-109">size.</span>
      <div class="tabular"> <table id="TBL-7" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-7-1g"><col 
id="TBL-7-1"></colgroup><colgroup id="TBL-7-2g"><col 
id="TBL-7-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-7-1-1"  
class="td11"><span 
class="cmti-10x-x-109">Atrribute values</span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-7-1-2"  
class="td11"><span 
class="cmti-10x-x-109">Value size</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-7-2-1"  
class="td11"><span 
class="cmti-10x-x-109">size in bytes      </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-7-2-2"  
class="td11"><span 
class="cmr-10x-x-109">sizeof(int)</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-7-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-7-3-1"  
class="td11">              </td></tr></table>
      </div>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_LOG_AMOUNT</span></span></span> <span 
class="cmr-10x-x-109">connection attribute changes the mode of logical logging for</span>
      <span 
class="cmr-10x-x-109">the following transactions in the same session. Transaction can be set to run in</span>
      <span 
class="cmr-10x-x-109">full log mode (</span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_LOG_FULL</span></span></span><span 
class="cmr-10x-x-109">) or reduced log mode (</span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_LOG_LESS</span></span></span><span 
class="cmr-10x-x-109">). The</span>
      <span 
class="cmr-10x-x-109">former means transaction writes much less log info during bulk loads.</span>
      <span 
class="cmr-10x-x-109">Also, when such transaction commits the checkpoint is made, which</span>
      <span 
class="cmr-10x-x-109">might greatly reduce recovery time. There is a caveat, however: such</span>
      <span 
class="cmr-10x-x-109">transaction always runs in exclusive mode, which means there can be no</span>
      <span 
class="cmr-10x-x-109">concurrent transactions. Before it starts it waits for other concurrent</span>
      <span 
class="cmr-10x-x-109">transactions to finish. In turn, all other transactions will not start until exlusive</span>
      <span 
class="cmr-10x-x-109">transaction finishes. You should use this option with care, since it effectively</span>
      <span 
class="cmr-10x-x-109">stalls any concurrent activity. The main purpose of such transactions</span>
      <span 
class="cmr-10x-x-109">is to bulk-load data. The other possible use-case includes transactions</span>
      <span 
class="cmr-10x-x-109">performing heavy update operations. Since checkpoint will be made when such</span>
      <span 
class="cmr-10x-x-109">transaction commits, it might reduce recovery time in case of database</span>
      <span 
class="cmr-10x-x-109">crash. Otherwise, you should not use this option since you will not gain</span>
      <span 
class="cmr-10x-x-109">anything. Notice also that the current transaction in the same session, if</span>
      <span 
class="cmr-10x-x-109">any, will be forcefully committed. The default value for this attribute is</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_LOG_FULL</span></span></span><span 
class="cmr-10x-x-109">.</span>
      <div class="tabular"> <table id="TBL-8" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-8-1g"><col 
id="TBL-8-1"></colgroup><colgroup id="TBL-8-2g"><col 
id="TBL-8-2"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-8-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-8-1-1"  
class="td11"><span 
class="cmti-10x-x-109">Atrribute values </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-8-1-2"  
class="td11"><span 
class="cmti-10x-x-109">Value size</span></td></tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-8-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-8-2-1"  
class="td11"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_LOG_LESS</span></span></span><span 
class="cmr-10x-x-109">,</span></td> <td  style="white-space:nowrap; text-align:left;" id="TBL-8-2-2"  
class="td11"></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-8-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-8-3-1"  
class="td11"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_LOG_FULL</span></span></span> </td><td  style="white-space:nowrap; text-align:left;" id="TBL-8-3-2"  
class="td11"><span 
class="cmr-10x-x-109">sizeof(int)</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-8-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-8-4-1"  
class="td11">               </td></tr></table>
      </div></li></ul>
<!--l. 846--><p class="indent" >   <span 
class="cmr-10x-x-109">An application can retrieve current value of hte connection attributes using</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEgetConnectionAttr</span></span></span><span 
class="cmr-10x-x-109">:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-32">
int&#x00A0;SEgetConnectionAttr(struct&#x00A0;SednaConnection&#x00A0;*conn,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;enum&#x00A0;SEattr&#x00A0;attr,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;void*&#x00A0;attrValue,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;int*&#x00A0;attrValueLength);
</div>
<!--l. 854--><p class="nopar" >
<!--l. 856--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type, associated</span>
      <span 
class="cmr-10x-x-109">with a session to be closed.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">attr</span></span></span> <span 
class="cmr-10x-x-109">- an attribute to retrieve.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">attrValue</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to memory in which to return the current value of</span>
      <span 
class="cmr-10x-x-109">the attribute specified by </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">attr</span></span></span><span 
class="cmr-10x-x-109">.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">attrValueLength</span></span></span> <span 
class="cmr-10x-x-109">- a length of the retrieved value in bytes.</span></li></ul>
<!--l. 868--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
<!--l. 873--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function succeeds, the return value is positive:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_GET_ATTRIBUTE_SUCCEEDED</span></span></span> <span 
class="cmr-10x-x-109">- the attribute was retrieved successfully.</span></li></ul>
<!--l. 881--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function fails, the return value is negative:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR</span></span></span> <span 
class="cmr-10x-x-109">- some error occurred.</span></li></ul>
<!--l. 888--><p class="indent" >   <span 
class="cmr-10x-x-109">To reset all connection attributes to default values use:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-33">
int&#x00A0;SEresetAllConnectionAttr(struct&#x00A0;SednaConnection&#x00A0;*conn);
</div>
<!--l. 892--><p class="nopar" >
<!--l. 894--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type, associated</span>
      <span 
class="cmr-10x-x-109">with a session to be closed.</span></li></ul>
<!--l. 902--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
<!--l. 907--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function succeeds, the return value is positive:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_RESET_ATTRIBUTES_SUCCEEDED</span></span></span>  <span 
class="cmr-10x-x-109">-    attributes    has    been    reset</span>
      <span 
class="cmr-10x-x-109">successfully.</span></li></ul>
<!--l. 915--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function fails, the return value is negative:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR</span></span></span> <span 
class="cmr-10x-x-109">- some error occurred.</span></li></ul>
<!--l. 926--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.2.4   </span></span> <a 
 id="x1-140001.2.4"></a><span 
class="cmr-10x-x-109">Transactions Management</span></h5>
<!--l. 927--><p class="noindent" ><span 
class="cmr-10x-x-109">An application can execute queries and updates against the specified database only in</span>
<span 
class="cmr-10x-x-109">the scope of a transaction. That is, once a session has been opened, an application can</span>
<span 
class="cmr-10x-x-109">begin a transaction, execute statements and commit this transaction. In a session</span>
<span 
class="cmr-10x-x-109">transactions are processed sequentially. That is, application must commit an ongoing</span>
<span 
class="cmr-10x-x-109">transaction before beginning a new one.</span>
<!--l. 933--><p class="indent" >   <span 
class="cmr-10x-x-109">There are two ways to manage transactions in Sedna sessions: </span><span 
class="cmti-10x-x-109">autocommit mode </span><span 
class="cmr-10x-x-109">and</span>
<span 
class="cmti-10x-x-109">manual-commit mode</span><span 
class="cmr-10x-x-109">:</span>
      <ul class="itemize1">
      <li class="itemize"><span 
class="cmbx-10x-x-109">Autocommit  mode</span><span 
class="cmr-10x-x-109">.  Each  individual  statement  is  committed  when  it</span>
      <span 
class="cmr-10x-x-109">completes  successfully.  When  running  in  autocommit  mode  no  other</span>
      <span 
class="cmr-10x-x-109">transaction management functions are needed. By default, Sedna sessions</span>
      <span 
class="cmr-10x-x-109">are run in autocommit mode.</span>
                                                                          

                                                                          
      </li>
      <li class="itemize"><span 
class="cmbx-10x-x-109">Manual-commit mode</span><span 
class="cmr-10x-x-109">. Transaction boundaries are specified explicitly</span>
      <span 
class="cmr-10x-x-109">by means of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEbegin</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEcommit</span></span></span> <span 
class="cmr-10x-x-109">and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SErollback</span></span></span> <span 
class="cmr-10x-x-109">functions. All statements</span>
      <span 
class="cmr-10x-x-109">between the call to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEbegin</span></span></span> <span 
class="cmr-10x-x-109">and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEcommit</span></span></span><span 
class="cmr-10x-x-109">/</span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SErollback</span></span></span> <span 
class="cmr-10x-x-109">are included in the</span>
      <span 
class="cmr-10x-x-109">same transaction.</span></li></ul>
<!--l. 947--><p class="indent" >   <span 
class="cmr-10x-x-109">An application can switch between the two modes using </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEsetConnectionAttr</span></span></span>
<span 
class="cmr-10x-x-109">and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEgetConnectionAttr</span></span></span> <span 
class="cmr-10x-x-109">functions (see </span><a 
href="#x1-130001.2.3"><span 
class="cmr-10x-x-109">1.2.3</span><!--tex4ht:ref: session-option-capi --></a><span 
class="cmr-10x-x-109">) for </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ATTR_AUTOCOMMIT</span></span></span>
<span 
class="cmr-10x-x-109">attribute.</span>
<!--l. 951--><p class="indent" >   <span 
class="cmr-10x-x-109">To specify transaction boundaries application uses </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEbegin</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEcommit</span></span></span> <span 
class="cmr-10x-x-109">and</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SErollback</span></span></span> <span 
class="cmr-10x-x-109">functions. </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEbegin</span></span></span> <span 
class="cmr-10x-x-109">function starts new transaction in the provided</span>
<span 
class="cmr-10x-x-109">session:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-34">
int&#x00A0;SEbegin(SednaConnection*&#x00A0;conn)
</div>
<!--l. 957--><p class="nopar" >
<!--l. 959--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type.</span></li></ul>
<!--l. 966--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
<!--l. 971--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function succeeds, the return value is positive:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_BEGIN_TRANSACTION_SUCCEEDED</span></span></span> <span 
class="cmr-10x-x-109">- transaction has been successfully</span>
      <span 
class="cmr-10x-x-109">started.</span></li></ul>
<!--l. 979--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function fails, the return value is negative:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_BEGIN_TRANSACTION_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- failed to start a transaction.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR</span></span></span> <span 
class="cmr-10x-x-109">- some error occurred.</span></li></ul>
<!--l. 987--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEcommit</span></span></span> <span 
class="cmr-10x-x-109">function commits the current transaction:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-35">
int&#x00A0;SEcommit(SednaConnection*&#x00A0;conn)
</div>
<!--l. 991--><p class="nopar" >
<!--l. 993--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type.</span></li></ul>
<!--l. 1000--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
<!--l. 1005--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function succeeds, the return value is positive:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_COMMIT_TRANSACTION_SUCCEEDED</span></span></span> <span 
class="cmr-10x-x-109">- transaction has been committed.</span></li></ul>
<!--l. 1012--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function fails, the return value is negative:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_COMMIT_TRANSACTION_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- failed to commit transaction.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR</span></span></span> <span 
class="cmr-10x-x-109">- some error occurred.</span></li></ul>
<!--l. 1020--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SErollback</span></span></span> <span 
class="cmr-10x-x-109">function rollbacks the current transaction:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-36">
int&#x00A0;SErollback(SednaCommection*&#x00A0;conn)
</div>
<!--l. 1024--><p class="nopar" >
<!--l. 1026--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type.</span></li></ul>
<!--l. 1033--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
<!--l. 1038--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function succeeds, the return value is positive:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ROLLBACK_TRANSACTION_SUCCEEDED</span></span></span>   <span 
class="cmr-10x-x-109">-    transaction    has    been</span>
      <span 
class="cmr-10x-x-109">rollbacked.</span></li></ul>
<!--l. 1046--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function fails, the return value is negative:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ROLLBACK_TRANSACTION_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- failed to rollback transaction.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR</span></span></span> <span 
class="cmr-10x-x-109">- some error occurred.</span></li></ul>
<!--l. 1058--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.2.5   </span></span> <a 
 id="x1-150001.2.5"></a><span 
class="cmr-10x-x-109">Getting Connection and Transaction Status</span></h5>
<!--l. 1060--><p class="noindent" ><span 
class="cmr-10x-x-109">An application can obtain the connection status by </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEconnectionStatus</span></span></span> <span 
class="cmr-10x-x-109">function:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-37">
int&#x00A0;SEconnectionStatus(SednaConnection*&#x00A0;conn)
</div>
<!--l. 1065--><p class="nopar" >
<!--l. 1067--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type.</span></li></ul>
<!--l. 1074--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_CONNECTION_OK</span></span></span> <span 
class="cmr-10x-x-109">- specified connection is open and functions ok.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_CONNECTION_CLOSED</span></span></span> <span 
class="cmr-10x-x-109">- specified connection is closed. This could be</span>
      <span 
class="cmr-10x-x-109">either after the call to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEclose</span></span></span> <span 
class="cmr-10x-x-109">function, or before the call to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEconnect</span></span></span>
      <span 
class="cmr-10x-x-109">function.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_CONNECTION_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- specified connection has been failed. (</span><span 
class="cmbx-10x-x-109">Note:</span>
      <span 
class="cmr-10x-x-109">in this case you should call </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEclose</span></span></span> <span 
class="cmr-10x-x-109">function to release resources).</span></li></ul>
<!--l. 1089--><p class="indent" >   <span 
class="cmr-10x-x-109">An application may obtain the transaction status by </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEtransactionStatus</span></span></span>
<span 
class="cmr-10x-x-109">function:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-38">
int&#x00A0;SEtransactionStatus(SednaConnection*&#x00A0;conn)
</div>
<!--l. 1094--><p class="nopar" >
<!--l. 1096--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type.</span></li></ul>
<!--l. 1103--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_TRANSACTION_ACTIVE</span></span></span> <span 
class="cmr-10x-x-109">- specified connection runs transaction.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_NO_TRANSACTION</span></span></span> <span 
class="cmr-10x-x-109">-  specified  connection  does  not  run  transaction.</span>
      <span 
class="cmr-10x-x-109">This could be for example when previous transaction has been committed</span>
      <span 
class="cmr-10x-x-109">and a new one has not begun yet.</span></li></ul>
<!--l. 1117--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.2.6   </span></span> <a 
 id="x1-160001.2.6"></a><span 
class="cmr-10x-x-109">Executing Queries and Updates</span></h5>
<!--l. 1120--><p class="noindent" ><span 
class="cmr-10x-x-109">There are two functions to execute a statement (query or update): </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEexecute</span></span></span> <span 
class="cmr-10x-x-109">function</span>
<span 
class="cmr-10x-x-109">and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEexecuteLong</span></span></span> <span 
class="cmr-10x-x-109">function. First one reads statement from a C-string, the second</span>
<span 
class="cmr-10x-x-109">reads long statement from a provided file. To get trace (</span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">fn:trace</span></span></span> <span 
class="cmr-10x-x-109">XQuery function) and</span>
<span 
class="cmr-10x-x-109">debug information application may implement custom debug handler and set it using</span>
<span 
class="cmr-10x-x-109">function: </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEsetDebugHandler</span></span></span><span 
class="cmr-10x-x-109">.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-39">
int&#x00A0;SEexecute(SednaConnection*&#x00A0;conn,&#x00A0;const&#x00A0;char*&#x00A0;query)
</div>
<!--l. 1129--><p class="nopar" >
<!--l. 1131--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">query</span></span></span> <span 
class="cmr-10x-x-109">- a null-terminated string with an XQuery or XUpdate statement.</span></li></ul>
<!--l. 1140--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
<!--l. 1145--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function succeeds, the return value is positive:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_QUERY_SUCCEEDED</span></span></span> <span 
class="cmr-10x-x-109">- specified query succeeded and result data can be</span>
      <span 
class="cmr-10x-x-109">retrieved.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_UPDATE_SUCCEEDED</span></span></span> <span 
class="cmr-10x-x-109">- specified update succeeded.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_BULK_LOAD_SUCCEEDED</span></span></span> <span 
class="cmr-10x-x-109">- specified update (bulk load </span><a 
href="#x1-500002.4"><span 
class="cmr-10x-x-109">2.4</span><!--tex4ht:ref: bulk-load --></a><span 
class="cmr-10x-x-109">) succeeded.</span></li></ul>
<!--l. 1156--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function fails, the return value is negative:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_QUERY_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- specified query failed.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_UPDATE_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- specified update failed.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_BULK_LOAD_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- bulk load failed.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR</span></span></span> <span 
class="cmr-10x-x-109">- some error occurred.</span></li></ul>
<!--l. 1166--><p class="indent" >   <span 
class="cmr-10x-x-109">If the statement is really long, and you prefer to pass it to the Sedna directly from a</span>
<span 
class="cmr-10x-x-109">file use </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEexecuteLong</span></span></span> <span 
class="cmr-10x-x-109">function.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-40">
int&#x00A0;SEexecuteLong(SednaConnection*&#x00A0;conn,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;const&#x00A0;char*&#x00A0;query_file_path)
</div>
<!--l. 1172--><p class="nopar" >
<!--l. 1174--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">query_file</span></span></span> <span 
class="cmr-10x-x-109">- a path to the file with a statement to execute.</span></li></ul>
<!--l. 1182--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
<!--l. 1187--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function succeeds, the return value is positive:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_QUERY_SUCCEEDED</span></span></span> <span 
class="cmr-10x-x-109">- specified query succeeded and result data can be</span>
      <span 
class="cmr-10x-x-109">retrieved.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_UPDATE_SUCCEEDED</span></span></span> <span 
class="cmr-10x-x-109">- specified update succeeded.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_BULK_LOAD_SUCCEEDED</span></span></span> <span 
class="cmr-10x-x-109">- specified update (bulk load </span><a 
href="#x1-500002.4"><span 
class="cmr-10x-x-109">2.4</span><!--tex4ht:ref: bulk-load --></a><span 
class="cmr-10x-x-109">) succeeded.</span></li></ul>
<!--l. 1198--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function fails, the return value is negative:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_QUERY_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- specified query failed.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_UPDATE_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- specified update failed.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_BULK_LOAD_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- bulk load failed.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR</span></span></span> <span 
class="cmr-10x-x-109">- some error occurred.</span></li></ul>
<!--l. 1208--><p class="indent" >   <span 
class="cmr-10x-x-109">If </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEexecute</span></span></span> <span 
class="cmr-10x-x-109">function or </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEexecuteLong</span></span></span> <span 
class="cmr-10x-x-109">function return </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_QUERY_SUCCEEDED</span></span></span><span 
class="cmr-10x-x-109">,</span>
<span 
class="cmr-10x-x-109">the result data can be retrieved. The result of XQuery query evaluation is a sequence of</span>
<span 
class="cmr-10x-x-109">items, where every item is represented as a string. Use the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEnext</span></span></span> <span 
class="cmr-10x-x-109">function to iterate</span>
<span 
class="cmr-10x-x-109">over the sequence and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEgetData</span></span></span> <span 
class="cmr-10x-x-109">function to retrieve the current item of the</span>
<span 
class="cmr-10x-x-109">sequence.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-41">
int&#x00A0;SEnext(SednaConnection*&#x00A0;conn)
</div>
<!--l. 1216--><p class="nopar" >
<!--l. 1218--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type.</span></li></ul>
<!--l. 1225--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
<!--l. 1230--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function succeeds, the return value is positive:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_NEXT_ITEM_SUCCEEDED</span></span></span> <span 
class="cmr-10x-x-109">- moving to the next item succeeded, and the</span>
      <span 
class="cmr-10x-x-109">item can be retrieved.</span></li></ul>
<!--l. 1238--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function fails or the is no result items available to retrieve, the return value is</span>
<span 
class="cmr-10x-x-109">negative:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_NEXT_ITEM_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- failed to get next item.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_RESULT_END</span></span></span> <span 
class="cmr-10x-x-109">- the result sequence is ended, no result data to retrieve.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_NO_ITEM</span></span></span> <span 
class="cmr-10x-x-109">- there was no succeeded query that produced the result</span>
      <span 
class="cmr-10x-x-109">data, no result data to retrieve.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR</span></span></span> <span 
class="cmr-10x-x-109">- some error occurred.</span></li></ul>
<!--l. 1251--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEgetData</span></span></span> <span 
class="cmr-10x-x-109">function retrieves current item from the result sequence:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-42">
int&#x00A0;SEgetData(SednaConnection*&#x00A0;conn,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;char*&#x00A0;buf,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;int&#x00A0;bytes_to_read)
</div>
<!--l. 1257--><p class="nopar" >
<!--l. 1259--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">buf</span></span></span> <span 
class="cmr-10x-x-109">- pointer to the buffer that receives the data got from the server.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">bytes_to_read</span></span></span> <span 
class="cmr-10x-x-109">- number of bytes to be read from the server into the buffer.</span></li></ul>
<!--l. 1270--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
<!--l. 1275--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function succeeds, the return value is non-negative:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">number</span><span 
class="cmtt-10x-x-109">&#x00A0;of</span><span 
class="cmtt-10x-x-109">&#x00A0;bytes</span></span></span> <span 
class="cmr-10x-x-109">actually read from the server and put into the buffer.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">zero</span></span></span> <span 
class="cmr-10x-x-109">- no data was read from the server and put into the buffer because of</span>
      <span 
class="cmr-10x-x-109">the item end. (use </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEnext</span></span></span> <span 
class="cmr-10x-x-109">to move to the next item of the result).</span></li></ul>
<!--l. 1286--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function fails, the return value is negative:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_GET_DATA_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- failed to get data.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR</span></span></span> <span 
class="cmr-10x-x-109">- some error occurred.</span></li></ul>
<!--l. 1294--><p class="indent" >   <span 
class="cmr-10x-x-109">Since version 1.5 Sedna supports reporting tracing information (</span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">fn:trace</span></span></span> <span 
class="cmr-10x-x-109">XQuery</span>
<span 
class="cmr-10x-x-109">function). To handle tracing information while retrieving result data use debug handler</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">debug_handler_t</span></span></span> <span 
class="cmr-10x-x-109">and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEsetDebugHandler</span></span></span> <span 
class="cmr-10x-x-109">function:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-43">
void&#x00A0;SEsetDebugHandler(struct&#x00A0;SednaConnection&#x00A0;*conn,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;debug_handler_t&#x00A0;debug_handler)
</div>
<!--l. 1301--><p class="nopar" >
<!--l. 1303--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">debug_handler</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to your own defined function of the following</span>
      <span 
class="cmr-10x-x-109">type:         </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">void</span><span 
class="cmtt-10x-x-109">&#x00A0;(*debug_handler_t)(int</span><span 
class="cmtt-10x-x-109">&#x00A0;subtype,</span><span 
class="cmtt-10x-x-109">&#x00A0;const</span><span 
class="cmtt-10x-x-109">&#x00A0;char</span><span 
class="cmtt-10x-x-109">&#x00A0;*msg)</span></span></span>
      <span 
class="cmr-10x-x-109">where   </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">subtype</span></span></span>  <span 
class="cmr-10x-x-109">is   a   type   of   debug   information   (currently   only</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_QUERY_TRACE_INFO</span></span></span> <span 
class="cmr-10x-x-109">is  supported),  </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">msg</span></span></span> <span 
class="cmr-10x-x-109">is  a  buffer  with  debug</span>
      <span 
class="cmr-10x-x-109">information.</span></li></ul>
<!--l. 1315--><p class="indent" >   <span 
class="cmr-10x-x-109">For example the following debug handler prints out debug iformation to the</span>
<span 
class="cmr-10x-x-109">stdout:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-44">
void&#x00A0;my_debug_handler(enum&#x00A0;SEdebugType&#x00A0;subtype,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;const&#x00A0;char&#x00A0;*msg)&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;printf("TRACE:&#x00A0;");
&#x00A0;<br />&#x00A0;&#x00A0;printf("subtype(%d),&#x00A0;msg:&#x00A0;%s\n",&#x00A0;subtype,&#x00A0;msg);
&#x00A0;<br />}
</div>
<!--l. 1325--><p class="nopar" >
<!--l. 1327--><p class="indent" >   <span 
class="cmr-10x-x-109">If the debug handler is not defined by the application, trace information is</span>
<span 
class="cmr-10x-x-109">ignored.</span>
<!--l. 1334--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.2.7   </span></span> <a 
 id="x1-170001.2.7"></a><span 
class="cmr-10x-x-109">Loading Data</span></h5>
<!--l. 1336--><p class="noindent" ><span 
class="cmr-10x-x-109">XML data can be loaded into a database using </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"LOAD"</span></span></span> <span 
class="cmr-10x-x-109">statement of the Data</span>
<span 
class="cmr-10x-x-109">Manipulation Language (see </span><a 
href="#x1-500002.4"><span 
class="cmr-10x-x-109">2.4</span><!--tex4ht:ref: bulk-load --></a><span 
class="cmr-10x-x-109">). Besides, libsedna library provides </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEloadData</span></span></span> <span 
class="cmr-10x-x-109">and</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEendLoadData</span></span></span> <span 
class="cmr-10x-x-109">functions to load well-formed XML documents divided into parts of any</span>
<span 
class="cmr-10x-x-109">convenient size.</span>
<!--l. 1341--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEloadData</span></span></span> <span 
class="cmr-10x-x-109">functions loads a chunk of an XML document:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-45">
int&#x00A0;SEloadData(SednaConnection*&#x00A0;conn,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;const&#x00A0;char*&#x00A0;buf,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;int&#x00A0;bytes_to_load,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;const&#x00A0;char*&#x00A0;doc_name,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;const&#x00A0;char*&#x00A0;col_name)
</div>
<!--l. 1349--><p class="nopar" >
<!--l. 1351--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">buf</span></span></span> <span 
class="cmr-10x-x-109">- a buffer with chunk of an XML document to load.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">bytes_to_load</span></span></span> <span 
class="cmr-10x-x-109">- number of bytes to load.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">doc_name</span></span></span> <span 
class="cmr-10x-x-109">- name of the document in a database the data loads to.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">col_name</span></span></span> <span 
class="cmr-10x-x-109">- name of the collection in the case if document is loaded into the</span>
      <span 
class="cmr-10x-x-109">collection, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">NULL</span></span></span> <span 
class="cmr-10x-x-109">if document is loaded as a standalone one.</span></li></ul>
<!--l. 1363--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
<!--l. 1368--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function succeeds, the return value is positive:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_DATA_CHUNK_LOADED</span></span></span>  <span 
class="cmr-10x-x-109">-   chunk   of   an   XML   document   loaded</span>
      <span 
class="cmr-10x-x-109">successfully.</span></li></ul>
<!--l. 1376--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function fails, the return value is negative:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR</span></span></span> <span 
class="cmr-10x-x-109">- some error occurred. Data is not loaded.</span></li></ul>
<!--l. 1383--><p class="indent" >   <span 
class="cmr-10x-x-109">When the whole document is loaded using </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEloadData</span></span></span><span 
class="cmr-10x-x-109">, application must use</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEendLoadData</span></span></span> <span 
class="cmr-10x-x-109">to notify server that transfer of an XML document is finished:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-46">
int&#x00A0;SEendLoadData(SednaConnection*&#x00A0;conn)
</div>
<!--l. 1389--><p class="nopar" >
<!--l. 1391--><p class="noindent" ><span 
class="cmbx-10x-x-109">Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">conn</span></span></span> <span 
class="cmr-10x-x-109">- a pointer to an instance of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SednaConnection</span></span></span> <span 
class="cmr-10x-x-109">type.</span></li></ul>
<!--l. 1398--><p class="noindent" ><span 
class="cmbx-10x-x-109">Return values:</span>
<!--l. 1403--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function succeeds, the return value is positive:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_BULK_LOAD_SUCCEEDED</span></span></span> <span 
class="cmr-10x-x-109">- XML document was successfully loaded into</span>
      <span 
class="cmr-10x-x-109">the database.</span></li></ul>
<!--l. 1411--><p class="noindent" ><span 
class="cmr-10x-x-109">If the function fails, the return value is negative:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_BULK_LOAD_FAILED</span></span></span> <span 
class="cmr-10x-x-109">- failed to load XML document into the database.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR</span></span></span> <span 
class="cmr-10x-x-109">- some error occurred.</span></li></ul>
<!--l. 1424--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.2.8   </span></span> <a 
 id="x1-180001.2.8"></a><span 
class="cmr-10x-x-109">Example Code</span></h5>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-47">
#include&#x00A0;"libsedna.h"
&#x00A0;<br />#include&#x00A0;"stdio.h"
&#x00A0;<br />
&#x00A0;<br />int&#x00A0;handle_error(SednaConnection*&#x00A0;conn,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;const&#x00A0;char*&#x00A0;op,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;int&#x00A0;close_connection)&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;printf("%s&#x00A0;failed:&#x00A0;\n%s\n",&#x00A0;op,&#x00A0;SEgetLastErrorMsg(conn));
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if(close_connection&#x00A0;==&#x00A0;1)&#x00A0;SEclose(conn);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;-1;
&#x00A0;<br />}
&#x00A0;<br />
&#x00A0;<br />int&#x00A0;main()&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;struct&#x00A0;SednaConnection&#x00A0;conn&#x00A0;=&#x00A0;SEDNA_CONNECTION_INITIALIZER;
&#x00A0;<br />&#x00A0;&#x00A0;int&#x00A0;bytes_read,&#x00A0;res,&#x00A0;value;
&#x00A0;<br />&#x00A0;&#x00A0;char&#x00A0;buf[1024];
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;/*&#x00A0;Turn&#x00A0;off&#x00A0;autocommit&#x00A0;mode&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;value&#x00A0;=&#x00A0;SEDNA_AUTOCOMMIT_OFF;
&#x00A0;<br />&#x00A0;&#x00A0;res&#x00A0;=&#x00A0;SEsetConnectionAttr(&amp;conn,&#x00A0;SEDNA_ATTR_AUTOCOMMIT,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(void*)&amp;value,&#x00A0;sizeof(int));
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;/*&#x00A0;Connect&#x00A0;to&#x00A0;the&#x00A0;database&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;res&#x00A0;=&#x00A0;SEconnect(&amp;conn,&#x00A0;"localhost",&#x00A0;"test_db",
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"SYSTEM",&#x00A0;"MANAGER");
&#x00A0;<br />&#x00A0;&#x00A0;if(res&#x00A0;!=&#x00A0;SEDNA_SESSION_OPEN)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;handle_error(&amp;conn,&#x00A0;"Connection",&#x00A0;0);
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;/*&#x00A0;Begin&#x00A0;a&#x00A0;new&#x00A0;transaction&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;res&#x00A0;=&#x00A0;SEbegin(&amp;conn);
&#x00A0;<br />&#x00A0;&#x00A0;if(res&#x00A0;!=&#x00A0;SEDNA_BEGIN_TRANSACTION_SUCCEEDED)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;handle_error(&amp;conn,&#x00A0;"Transaction&#x00A0;begin",&#x00A0;1);
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;/*&#x00A0;Load&#x00A0;file&#x00A0;"region.xml"&#x00A0;into&#x00A0;the&#x00A0;document&#x00A0;"region"&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;res&#x00A0;=&#x00A0;SEexecute(&amp;conn,&#x00A0;"LOAD&#x00A0;&#8217;region.xml&#8217;&#x00A0;&#8217;region&#8217;");
&#x00A0;<br />&#x00A0;&#x00A0;if(res&#x00A0;!=&#x00A0;SEDNA_BULK_LOAD_SUCCEEDED)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;handle_error(&amp;conn,&#x00A0;"Bulk&#x00A0;load",&#x00A0;1);
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;/*&#x00A0;Execute&#x00A0;XQuery&#x00A0;statement&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;res&#x00A0;=&#x00A0;SEexecute(&amp;conn,&#x00A0;"doc(&#8217;region&#8217;)/*/*");
&#x00A0;<br />&#x00A0;&#x00A0;if(res&#x00A0;!=&#x00A0;SEDNA_QUERY_SUCCEEDED)
                                                                          

                                                                          
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;handle_error(&amp;conn,&#x00A0;"Query",&#x00A0;1);
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;/*&#x00A0;Iterate&#x00A0;and&#x00A0;print&#x00A0;the&#x00A0;result&#x00A0;sequence&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;while((res&#x00A0;=&#x00A0;SEnext(&amp;conn))&#x00A0;!=&#x00A0;SEDNA_RESULT_END)&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;(res&#x00A0;==&#x00A0;SEDNA_ERROR)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;handle_error(&amp;conn,&#x00A0;"Getting&#x00A0;item",&#x00A0;1);
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;do&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;bytes_read&#x00A0;=&#x00A0;SEgetData(&amp;conn,&#x00A0;buf,&#x00A0;sizeof(buf)&#x00A0;-&#x00A0;1);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;if(bytes_read&#x00A0;==&#x00A0;SEDNA_ERROR)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;handle_error(&amp;conn,&#x00A0;"Getting&#x00A0;item",&#x00A0;1);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;buf[bytes_read]&#x00A0;=&#x00A0;&#8217;\0&#8217;;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;printf("%s\n",&#x00A0;buf);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;}&#x00A0;while(bytes_read&#x00A0;&#x003E;&#x00A0;0);
&#x00A0;<br />&#x00A0;&#x00A0;}
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;/*&#x00A0;Drop&#x00A0;document&#x00A0;"region"&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;res&#x00A0;=&#x00A0;SEexecute(&amp;conn,&#x00A0;"DROP&#x00A0;DOCUMENT&#x00A0;&#8217;region&#8217;");
&#x00A0;<br />&#x00A0;&#x00A0;if(res&#x00A0;!=&#x00A0;SEDNA_UPDATE_SUCCEEDED)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;handle_error(&amp;conn,&#x00A0;"Drop&#x00A0;document",&#x00A0;1);
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;/*&#x00A0;Commit&#x00A0;transaction&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;res&#x00A0;=&#x00A0;SEcommit(&amp;conn);
&#x00A0;<br />&#x00A0;&#x00A0;if(res&#x00A0;!=&#x00A0;SEDNA_COMMIT_TRANSACTION_SUCCEEDED)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;handle_error(&amp;conn,&#x00A0;"Commit",&#x00A0;1);
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;/*&#x00A0;Close&#x00A0;connection&#x00A0;*/
&#x00A0;<br />&#x00A0;&#x00A0;res&#x00A0;=&#x00A0;SEclose(&amp;conn);
&#x00A0;<br />&#x00A0;&#x00A0;if(res&#x00A0;!=&#x00A0;SEDNA_SESSION_CLOSED)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;return&#x00A0;handle_error(&amp;conn,&#x00A0;"Close",&#x00A0;0);
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;return&#x00A0;0;
&#x00A0;<br />}
</div>
<!--l. 1501--><p class="nopar" >
<!--l. 1503--><p class="indent" >   <span 
class="cmr-10x-x-109">The full version of this example program can be found in:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-48">
[win:]&#x00A0;INSTALL_DIR\examples\api\c\Client.c
&#x00A0;<br />[nix:]&#x00A0;INSTALL_DIR/examples/api/c/Client.c
</div>
<!--l. 1507--><p class="nopar" >
<!--l. 1509--><p class="indent" >   <span 
class="cmr-10x-x-109">Here </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">INSTALL_DIR</span></span></span> <span 
class="cmr-10x-x-109">refers to the directory where Sedna is installed.</span>
<!--l. 1511--><p class="indent" >   <span 
class="cmr-10x-x-109">Before running the example make sure that the Sedna DBMS is installed and do the</span>
<span 
class="cmr-10x-x-109">following steps:</span>
<!--l. 1514--><p class="indent" >
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-18002x1"><span 
class="cmr-10x-x-109">Start Sedna by running the following command:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-49">
      se_gov
</div>
      <!--l. 1518--><p class="nopar" > <span 
class="cmr-10x-x-109">If Sedna is started successfully it prints &#8221;GOVERNOR has been started in the</span>
      <span 
class="cmr-10x-x-109">background mode&#8221;.</span>
      </li>
      <li 
  class="enumerate" id="x1-18004x2"><span 
class="cmr-10x-x-109">Create a new database </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">testdb</span></span></span> <span 
class="cmr-10x-x-109">by running the following command:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-50">
      se_cdb&#x00A0;testdb
</div>
      <!--l. 1524--><p class="nopar" > <span 
class="cmr-10x-x-109">If the database is created successfully it prints &#8221;The database &#8217;testdb&#8217; has been</span>
      <span 
class="cmr-10x-x-109">created successfully&#8221;.</span>
      </li>
      <li 
  class="enumerate" id="x1-18006x3"><span 
class="cmr-10x-x-109">Start the testdb database by running the following command:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-51">
      se_sm&#x00A0;testdb
</div>
      <!--l. 1530--><p class="nopar" > <span 
class="cmr-10x-x-109">If the database is started successfully it prints &#8221;SM has been started in the</span>
      <span 
class="cmr-10x-x-109">background mode&#8221;.</span></li></ol>
<!--l. 1535--><p class="indent" >   <span 
class="cmr-10x-x-109">You can compile and run the example by following the steps listed below:</span>
<!--l. 1537--><p class="indent" >
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-18008x1"><span 
class="cmr-10x-x-109">To compile the example use:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-52">
      &#x00A0;&#x00A0;&#x00A0;&#x00A0;[win:]&#x00A0;Clientbuild.bat
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;[nix:]&#x00A0;./Clientbuild.sh
</div>
      <!--l. 1542--><p class="nopar" > <span 
class="cmr-10x-x-109">located in the same folder as </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Client.c</span></span></span><span 
class="cmr-10x-x-109">.</span>
      </li>
      <li 
  class="enumerate" id="x1-18010x2"><span 
class="cmr-10x-x-109">To run the compiled example use:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-53">
      &#x00A0;&#x00A0;&#x00A0;&#x00A0;[win:]&#x00A0;Client.exe
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;[nix:]&#x00A0;./Client
</div>
      <!--l. 1549--><p class="nopar" > <span 
class="cmr-10x-x-109">located in the same folder as </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Client.c</span></span></span><span 
class="cmr-10x-x-109">.</span></li></ol>
<!--l. 1557--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.3   </span></span> <a 
 id="x1-190001.3"></a><span 
class="cmr-10x-x-109">Scheme API</span></h4>
<!--l. 1559--><p class="noindent" ><span 
class="cmr-10x-x-109">Scheme API allows querying and managing XML data from an application written in</span>
<span 
class="cmr-10x-x-109">Scheme. Scheme API follows the spirit of SchemeQL</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:scheme-ql"><span 
class="cmr-10x-x-109">10</span></a><span 
class="cmr-10x-x-109">]</span></span><span 
class="cmr-10x-x-109">, an implementation of SQL</span>
<span 
class="cmr-10x-x-109">1992 for Scheme. The results of XQuery statements to the Sedna DBMS via the Scheme</span>
<span 
class="cmr-10x-x-109">API can be represented either in XML or SXML</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:sxml"><span 
class="cmr-10x-x-109">11</span></a><span 
class="cmr-10x-x-109">]</span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 1566--><p class="noindent" >
   <div class="subsubsectionTOCS">
   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">1.3.1 </span><a 
href="#x1-200001.3.1"><span 
class="cmr-10x-x-109">Sessions</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">1.3.2 </span><a 
href="#x1-210001.3.2"><span 
class="cmr-10x-x-109">Manage Transactions</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">1.3.3 </span><a 
href="#x1-220001.3.3"><span 
class="cmr-10x-x-109">Executing Queries and Updates</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">1.3.4 </span><a 
href="#x1-230001.3.4"><span 
class="cmr-10x-x-109">Bulk Load from Stream</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">1.3.5 </span><a 
href="#x1-240001.3.5"><span 
class="cmr-10x-x-109">Higher-level Function for a Transaction</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">1.3.6 </span><a 
href="#x1-250001.3.6"><span 
class="cmr-10x-x-109">Error handling</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">1.3.7 </span><a 
href="#x1-260001.3.7"><span 
class="cmr-10x-x-109">Code Example</span></a></span>
   </div>
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.3.1   </span></span> <a 
 id="x1-200001.3.1"></a><span 
class="cmr-10x-x-109">Sessions</span></h5>
<!--l. 1567--><p class="noindent" ><span 
class="cmr-10x-x-109">For working with the Sedna DBMS from Scheme, you should first establish a connection</span>
<span 
class="cmr-10x-x-109">between the Scheme API driver and the Sedna DBMS. Here are two functions to</span>
<span 
class="cmr-10x-x-109">manage connections:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-54">
&#x003E;&#x00A0;(sedna:connect-to-database&#x00A0;host&#x00A0;db-name&#x00A0;user&#x00A0;password)
&#x00A0;<br />&#x00A0;&#x00A0;:&#x00A0;String&#x00A0;String&#x00A0;String&#x00A0;String&#x00A0;-&#x003E;&#x00A0;connection-object
</div>
<!--l. 1574--><p class="nopar" >
<!--l. 1576--><p class="indent" >   <span 
class="cmr-10x-x-109">Establishes a connection between the client application and the Sedna DBMS.</span>
<span 
class="cmr-10x-x-109">Returns a &#8217;connection&#8217; object which encapsulate information about the connection. The</span>
<span 
class="cmr-10x-x-109">arguments are strings that denote connection parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span 
class="cmtt-10x-x-109">host </span><span 
class="cmr-10x-x-109">is the host where the Sedna DBMS is running. If it is on the same</span>
      <span 
class="cmr-10x-x-109">machine as your Scheme application, you can use </span><span 
class="cmtt-10x-x-109">"localhost" </span><span 
class="cmr-10x-x-109">for the value</span>
      <span 
class="cmr-10x-x-109">of this parameter.</span>
      </li>
      <li class="itemize"><span 
class="cmtt-10x-x-109">db-name </span><span 
class="cmr-10x-x-109">is the name of the database you want to work with. You are to</span>
      <span 
class="cmr-10x-x-109">establish a separate connection for each database you would like to work</span>
      <span 
class="cmr-10x-x-109">with.</span>
      </li>
      <li class="itemize"><span 
class="cmtt-10x-x-109">user </span><span 
class="cmr-10x-x-109">is your user name for the session. You can use </span><span 
class="cmtt-10x-x-109">"SYSTEM" </span><span 
class="cmr-10x-x-109">for the value</span>
      <span 
class="cmr-10x-x-109">of this parameter.</span>
      </li>
      <li class="itemize"><span 
class="cmtt-10x-x-109">password </span><span 
class="cmr-10x-x-109">is your password for the session. You can use the </span><span 
class="cmtt-10x-x-109">"MANAGER" </span><span 
class="cmr-10x-x-109">value</span>
      <span 
class="cmr-10x-x-109">of this parameter.</span></li></ul>
<!--l. 1594--><p class="indent" >   <span 
class="cmr-10x-x-109">To disconnect from the database, you can use the following function:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-55">
&#x003E;&#x00A0;(sedna:disconnect-from-database&#x00A0;connection)
&#x00A0;<br />&#x00A0;&#x00A0;:&#x00A0;connection-object&#x00A0;-&#x003E;&#x00A0;void
</div>
<!--l. 1599--><p class="nopar" >
<!--l. 1601--><p class="indent" >   <span 
class="cmr-10x-x-109">Closes the connection represented by the </span><span 
class="cmtt-10x-x-109">connection </span><span 
class="cmr-10x-x-109">object. If server fails to close</span>
<span 
class="cmr-10x-x-109">the connection, the function closes the connection forcibly from the client side and raises</span>
<span 
class="cmr-10x-x-109">the exception, as discussed in subsubsection </span><a 
href="#x1-250001.3.6"><span 
class="cmr-10x-x-109">1.3.6</span><!--tex4ht:ref: scheme-errors --></a><span 
class="cmr-10x-x-109">.</span>
<!--l. 1610--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.3.2   </span></span> <a 
 id="x1-210001.3.2"></a><span 
class="cmr-10x-x-109">Manage Transactions</span></h5>
<!--l. 1612--><p class="noindent" ><span 
class="cmr-10x-x-109">After the connection with a database is established and the session is begun, you can</span>
<span 
class="cmr-10x-x-109">run zero or more transactions in this session. Transactions are to be run sequentially,</span>
<span 
class="cmr-10x-x-109">with no more than a single transaction at a time, so you should commit your running</span>
<span 
class="cmr-10x-x-109">transaction before starting a new one.</span>
<!--l. 1617--><p class="indent" >   <span 
class="cmr-10x-x-109">To begin a new transaction, the following function is provided:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-56">
&#x003E;&#x00A0;(sedna:begin-transaction&#x00A0;connection)
&#x00A0;<br />&#x00A0;&#x00A0;:&#x00A0;connection-object&#x00A0;-&#x003E;&#x00A0;void
</div>
<!--l. 1622--><p class="nopar" >
<!--l. 1624--><p class="indent" >   <span 
class="cmr-10x-x-109">It accepts the </span><span 
class="cmtt-10x-x-109">connection </span><span 
class="cmr-10x-x-109">object (earlier created by </span><span 
class="cmtt-10x-x-109">sedna:connect-to-database</span>
<span 
class="cmr-10x-x-109">function) and starts a new transaction. If the transaction could not be created, the</span>
<span 
class="cmr-10x-x-109">exception is raised, as discussed in subsubsection </span><a 
href="#x1-250001.3.6"><span 
class="cmr-10x-x-109">1.3.6</span><!--tex4ht:ref: scheme-errors --></a><span 
class="cmr-10x-x-109">.</span>
<!--l. 1629--><p class="indent" >   <span 
class="cmr-10x-x-109">To end your running transaction, you are provided with the following function:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-57">
&#x003E;&#x00A0;(sedna:end-transaction&#x00A0;connection&#x00A0;action)
&#x00A0;<br />&#x00A0;&#x00A0;:&#x00A0;connection-object,&#x00A0;symbol&#x00A0;-&#x003E;&#x00A0;void
</div>
<!--l. 1634--><p class="nopar" >
<!--l. 1636--><p class="indent" >   <span 
class="cmr-10x-x-109">If </span><span 
class="cmtt-10x-x-109">action </span><span 
class="cmr-10x-x-109">is </span><span 
class="cmtt-10x-x-109">&#8217;COMMIT </span><span 
class="cmr-10x-x-109">the transaction in the given connection will be committed, if</span>
<span 
class="cmtt-10x-x-109">&#8217;ROLLBACK </span><span 
class="cmr-10x-x-109">is given, the transaction will be rolled back.</span>
<!--l. 1644--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.3.3   </span></span> <a 
 id="x1-220001.3.3"></a><span 
class="cmr-10x-x-109">Executing Queries and Updates</span></h5>
<!--l. 1646--><p class="noindent" ><span 
class="cmr-10x-x-109">Within a transaction, you can execute zero or more queries to the database.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-58">
&#x003E;&#x00A0;(sedna:execute-query&#x00A0;connection&#x00A0;query)
&#x00A0;<br />&#x00A0;&#x00A0;:&#x00A0;connection-object,&#x00A0;string&#x00A0;-&#x003E;&#x00A0;result
</div>
<!--l. 1651--><p class="nopar" >
<!--l. 1653--><p class="indent" >   <span 
class="cmr-10x-x-109">The first argument is the </span><span 
class="cmtt-10x-x-109">connection </span><span 
class="cmr-10x-x-109">object, earlier created by</span>
<span 
class="cmtt-10x-x-109">sedna:connect-to-database </span><span 
class="cmr-10x-x-109">function. The </span><span 
class="cmtt-10x-x-109">query </span><span 
class="cmr-10x-x-109">is represented as a string and can</span>
<span 
class="cmr-10x-x-109">express one of the following kinds of statements:</span>
      <ul class="itemize1">
      <li class="itemize"><span 
class="cmbx-10x-x-109">XQuery  statement  </span><span 
class="cmr-10x-x-109">&#8211;  for  querying  data  from  the  database,  without</span>
      <span 
class="cmr-10x-x-109">modifying it;</span>
      </li>
      <li class="itemize"><span 
class="cmbx-10x-x-109">Update statement </span><span 
class="cmr-10x-x-109">&#8211; for making modifications to the database you work</span>
      <span 
class="cmr-10x-x-109">with;</span>
      </li>
      <li class="itemize"><span 
class="cmbx-10x-x-109">Bulk load command </span><span 
class="cmr-10x-x-109">&#8211; for loading a new XML document from the local</span>
      <span 
class="cmr-10x-x-109">file to the database;</span>
      </li>
      <li class="itemize"><span 
class="cmbx-10x-x-109">Database management statement </span><span 
class="cmr-10x-x-109">&#8211; to create index, trigger, retrieve</span>
      <span 
class="cmr-10x-x-109">metadata, etc.</span></li></ul>
<!--l. 1668--><p class="indent" >   <span 
class="cmr-10x-x-109">If an error occurs at the server side during query execution (e.g.</span><span 
class="cmr-10x-x-109">&#x00A0;the requested</span>
<span 
class="cmr-10x-x-109">document not found), the function raises an exception that contains the message about</span>
<span 
class="cmr-10x-x-109">the error occurred.</span>
<!--l. 1672--><p class="indent" >   <span 
class="cmr-10x-x-109">In the successful case of query execution, </span><span 
class="cmtt-10x-x-109">sedna:execute-query </span><span 
class="cmr-10x-x-109">returns </span><span 
class="cmtt-10x-x-109">#t </span><span 
class="cmr-10x-x-109">for the</span>
<span 
class="cmr-10x-x-109">last 3 kinds of queries, to denote a successful update made to the database. The XQuery</span>
<span 
class="cmtt-10x-x-109">query </span><span 
class="cmr-10x-x-109">results to a sequence of items, which are evaluated lazily and are represented as a</span>
<span 
class="cmr-10x-x-109">pair:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-59">
xquery-result&#x00A0;::=&#x00A0;(cons&#x00A0;current-item&#x00A0;promise)
</div>
<!--l. 1679--><p class="nopar" >
<!--l. 1681--><p class="noindent" ><span 
class="cmr-10x-x-109">This way of result representation is very close to the notion of SchemeQL </span><span 
class="cmti-10x-x-109">cursor</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:scheme-ql"><span 
class="cmr-10x-x-109">10</span></a><span 
class="cmr-10x-x-109">]</span></span>
<span 
class="cmr-10x-x-109">(with the only difference in that the Scheme API driver returns XQuery items instead</span>
<span 
class="cmr-10x-x-109">of table rows returned by SchemeQL). The first member of the pair is the</span>
<span 
class="cmtt-10x-x-109">current-item </span><span 
class="cmr-10x-x-109">represented in SXML, and the second member of the pair holds a</span>
<span 
class="cmr-10x-x-109">promise (which can be forced) to evaluate and return the next item in the result</span>
<span 
class="cmr-10x-x-109">sequence.</span>
<!--l. 1689--><p class="indent" >   <span 
class="cmr-10x-x-109">To iterate over the result sequence, you can use the function:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-60">
&#x003E;&#x00A0;(sedna:next&#x00A0;xquery-result)
&#x00A0;<br />&#x00A0;&#x00A0;:&#x00A0;xquery-result&#x00A0;-&#x003E;&#x00A0;xquery-result&#x00A0;or&#x00A0;&#8217;()
</div>
<!--l. 1694--><p class="nopar" >
<!--l. 1696--><p class="noindent" ><span 
class="cmr-10x-x-109">which forces the evaluation of the following items in the result sequence, until the end of</span>
<span 
class="cmr-10x-x-109">the sequence is reached.</span>
<!--l. 1700--><p class="indent" >   <span 
class="cmr-10x-x-109">Such design allows you to process a query result in a lazy stream-wise fashion and</span>
<span 
class="cmr-10x-x-109">provides you with an ability to process large query results, which would not otherwise</span>
<span 
class="cmr-10x-x-109">fit in the main memory.</span>
<!--l. 1704--><p class="indent" >   <span 
class="cmr-10x-x-109">However, for query results that are not very large, you may find it convenient to</span>
<span 
class="cmr-10x-x-109">evaluate them all at once and represent the result sequence as a Scheme list. Scheme</span>
<span 
class="cmr-10x-x-109">API provides a function that converts the </span><span 
class="cmtt-10x-x-109">xquery-result </span><span 
class="cmr-10x-x-109">into the list that contains all</span>
<span 
class="cmr-10x-x-109">items of the result sequence:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-61">
&#x003E;&#x00A0;(sedna:result-&#x003E;list&#x00A0;xquery-result)
&#x00A0;<br />&#x00A0;&#x00A0;:&#x00A0;xquery-result&#x00A0;-&#x003E;&#x00A0;(listof&#x00A0;item)
</div>
<!--l. 1712--><p class="nopar" >
<!--l. 1714--><p class="noindent" ><span 
class="cmr-10x-x-109">To obtain the result sequence in the form of the list, you can execute your queries as a</span>
<span 
class="cmr-10x-x-109">superposition of the above considered functions:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-62">
(sedna:result-&#x003E;list
&#x00A0;<br />&#x00A0;&#x00A0;(sedna:execute-query&#x00A0;connection&#x00A0;query))
</div>
<!--l. 1721--><p class="nopar" >
<!--l. 1723--><p class="noindent" ><span 
class="cmr-10x-x-109">It should be noted that the XQuery statement result in that case exactly corresponds to</span>
<span 
class="cmr-10x-x-109">the term of a </span><span 
class="cmti-10x-x-109">node-set </span><span 
class="cmr-10x-x-109">in the XPath implementation in Scheme SXPath</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:sxpath"><span 
class="cmr-10x-x-109">14</span></a><span 
class="cmr-10x-x-109">]</span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 1728--><p class="indent" >   <span 
class="cmr-10x-x-109">If you want to obtain your query results in XML instead of SXML, you can use the</span>
<span 
class="cmr-10x-x-109">function:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-63">
&#x003E;&#x00A0;(sedna:execute-query-xml&#x00A0;connection&#x00A0;query)
&#x00A0;<br />&#x00A0;&#x00A0;:&#x00A0;connection-object,&#x00A0;string&#x00A0;-&#x003E;&#x00A0;result
</div>
<!--l. 1734--><p class="nopar" >
<!--l. 1736--><p class="noindent" ><span 
class="cmr-10x-x-109">It is the counterpart of earlier discussed </span><span 
class="cmtt-10x-x-109">sedna:execute-query </span><span 
class="cmr-10x-x-109">and has the same</span>
<span 
class="cmr-10x-x-109">signature, but represents query results in XML. The function returns a sequence of</span>
<span 
class="cmr-10x-x-109">items, in the form of </span><span 
class="cmtt-10x-x-109">xquery-result </span><span 
class="cmr-10x-x-109">discussed above, but the </span><span 
class="cmtt-10x-x-109">current-item </span><span 
class="cmr-10x-x-109">is</span>
<span 
class="cmr-10x-x-109">now a string containing the representation for the current item in the form of</span>
<span 
class="cmr-10x-x-109">XML.</span>
<!--l. 1747--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.3.4   </span></span> <a 
 id="x1-230001.3.4"></a><span 
class="cmr-10x-x-109">Bulk Load from Stream</span></h5>
<!--l. 1749--><p class="noindent" ><span 
class="cmr-10x-x-109">The following wrapper function provides a natural way to load an input stream</span>
<span 
class="cmr-10x-x-109">containing an XML document into your database:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-64">
&#x003E;&#x00A0;(sedna:bulk-load-from-xml-stream
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;connection&#x00A0;port&#x00A0;document-name&#x00A0;.&#x00A0;collection-name)
&#x00A0;<br />&#x00A0;&#x00A0;:&#x00A0;connection-object,&#x00A0;input-port,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;string&#x00A0;[,&#x00A0;collection-name]&#x00A0;-&#x003E;&#x00A0;boolean
</div>
<!--l. 1757--><p class="nopar" >
<!--l. 1759--><p class="indent" >   <span 
class="cmr-10x-x-109">As for </span><span 
class="cmtt-10x-x-109">sedna:execute-query</span><span 
class="cmr-10x-x-109">, the first argument here is the </span><span 
class="cmtt-10x-x-109">connection </span><span 
class="cmr-10x-x-109">object,</span>
<span 
class="cmr-10x-x-109">earlier created by </span><span 
class="cmtt-10x-x-109">sedna:connect-to-database </span><span 
class="cmr-10x-x-109">function. Argument </span><span 
class="cmtt-10x-x-109">port </span><span 
class="cmr-10x-x-109">is a</span>
<span 
class="cmr-10x-x-109">Scheme input port and is supposed to contain a well-formed XML document.</span>
<span 
class="cmr-10x-x-109">Argument </span><span 
class="cmtt-10x-x-109">document-name </span><span 
class="cmr-10x-x-109">specifies the name that will be given to the XML</span>
<span 
class="cmr-10x-x-109">document within a database. If the 4-th argument </span><span 
class="cmtt-10x-x-109">collection-name </span><span 
class="cmr-10x-x-109">is supplied,</span>
<span 
class="cmr-10x-x-109">the XML document is loaded into the collection which name is specified by</span>
<span 
class="cmr-10x-x-109">the </span><span 
class="cmtt-10x-x-109">collection-name </span><span 
class="cmr-10x-x-109">argument. If the 4-th argument of the function call is</span>
<span 
class="cmr-10x-x-109">not supplied, the XML document is loaded into the database as a standalone</span>
<span 
class="cmr-10x-x-109">document.</span>
<!--l. 1770--><p class="indent" >   <span 
class="cmr-10x-x-109">By allowing you to specify the input port you would like to use, this function</span>
<span 
class="cmr-10x-x-109">provides a higher-level shortcut for </span><span 
class="cmtt-10x-x-109">sedna:execute-query </span><span 
class="cmr-10x-x-109">when bulk load from stream</span>
<span 
class="cmr-10x-x-109">is concerned. For more details on bulk load, see section </span><a 
href="#x1-500002.4"><span 
class="cmr-10x-x-109">2.4</span><!--tex4ht:ref: bulk-load --></a><span 
class="cmr-10x-x-109">.</span>
<!--l. 1779--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.3.5   </span></span> <a 
 id="x1-240001.3.5"></a><span 
class="cmr-10x-x-109">Higher-level Function for a Transaction</span></h5>
<!--l. 1781--><p class="noindent" ><span 
class="cmr-10x-x-109">This higher-level function provides a convenient way for executing a transaction</span>
<span 
class="cmr-10x-x-109">consisting of several queries, within a single function call:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-65">
&#x003E;&#x00A0;(sedna:transaction&#x00A0;connection&#x00A0;.&#x00A0;queries)
&#x00A0;<br />&#x00A0;&#x00A0;:&#x00A0;connection-object,&#x00A0;string*&#x00A0;-&#x003E;&#x00A0;result
</div>
<!--l. 1787--><p class="nopar" >
<!--l. 1789--><p class="indent" >   <span 
class="cmr-10x-x-109">This function starts a new transaction on the </span><span 
class="cmtt-10x-x-109">connection </span><span 
class="cmr-10x-x-109">objects and executes all</span>
<span 
class="cmr-10x-x-109">the </span><span 
class="cmtt-10x-x-109">queries </span><span 
class="cmr-10x-x-109">given in order. If no exception occurs, the function commits the transaction</span>
<span 
class="cmr-10x-x-109">and returns the result of the last query. If any exception occurred during query</span>
<span 
class="cmr-10x-x-109">execution, the function sends rollback to the Sedna DBMS and passes along the</span>
<span 
class="cmr-10x-x-109">exception to the application.</span>
<!--l. 1799--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.3.6   </span></span> <a 
 id="x1-250001.3.6"></a><span 
class="cmr-10x-x-109">Error handling</span></h5>
<!--l. 1802--><p class="noindent" ><span 
class="cmr-10x-x-109">Error handling in the Scheme API driver is based on the exception mechanism</span>
<span 
class="cmr-10x-x-109">suggested in the (currently withdrawn) SRFI-12</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:srfi-12"><span 
class="cmr-10x-x-109">12</span></a><span 
class="cmr-10x-x-109">]</span></span><span 
class="cmr-10x-x-109">. The SRFI-12 exception</span>
<span 
class="cmr-10x-x-109">mechanism is natively supported in the Chicken Scheme compiler</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:chicken"><span 
class="cmr-10x-x-109">13</span></a><span 
class="cmr-10x-x-109">]</span></span><span 
class="cmr-10x-x-109">. In the</span>
<span 
class="cmr-10x-x-109">Scheme API driver, we also provide the SRFI-12 implementation for PLT and</span>
<span 
class="cmr-10x-x-109">Gambit.</span>
<!--l. 1811--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">1.3.7   </span></span> <a 
 id="x1-260001.3.7"></a><span 
class="cmr-10x-x-109">Code Example</span></h5>
<!--l. 1813--><p class="noindent" ><span 
class="cmr-10x-x-109">This section presents an example that illustrates the application of the Scheme API</span>
<span 
class="cmr-10x-x-109">driver.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-66">
;&#x00A0;Load&#x00A0;the&#x00A0;necessary&#x00A0;Scheme&#x00A0;API&#x00A0;driver&#x00A0;files
&#x00A0;<br />(load&#x00A0;"collect-sedna-plt.scm")
&#x00A0;<br />
&#x00A0;<br />;&#x00A0;Create&#x00A0;a&#x00A0;connection
&#x00A0;<br />(define&#x00A0;conn
&#x00A0;<br />&#x00A0;&#x00A0;(sedna:connect-to-database&#x00A0;"localhost"&#x00A0;"testdb"
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"SYSTEM"&#x00A0;"MANAGER"))
&#x00A0;<br />;&#x00A0;Begin&#x00A0;a&#x00A0;transaction
&#x00A0;<br />(sedna:begin-transaction&#x00A0;conn)
&#x00A0;<br />
&#x00A0;<br />;&#x00A0;Bulk&#x00A0;load
&#x00A0;<br />(call/cc
&#x00A0;<br />&#x00A0;(lambda&#x00A0;(k)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;(with-exception-handler&#x00A0;&#x00A0;;&#x00A0;Exception&#x00A0;handler
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(lambda&#x00A0;(x)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(display&#x00A0;"File&#x00A0;already&#x00A0;loaded&#x00A0;to&#x00A0;the&#x00A0;database")
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(newline)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(k&#x00A0;#f))
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;(lambda&#x00A0;()
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(sedna:execute-query&#x00A0;conn
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"LOAD&#x00A0;&#8217;region.xml&#8217;&#x00A0;&#8217;regions&#8217;")))))
&#x00A0;<br />
&#x00A0;<br />;&#x00A0;Execute&#x00A0;a&#x00A0;statement&#x00A0;and&#x00A0;represent&#x00A0;it&#x00A0;as&#x00A0;an&#x00A0;SXML&#x00A0;nodeset
&#x00A0;<br />(pp
&#x00A0;<br />&#x00A0;(sedna:result-&#x003E;list
&#x00A0;<br />&#x00A0;&#x00A0;(sedna:execute-query&#x00A0;conn&#x00A0;"doc(&#8217;region&#8217;)/*/*")))
&#x00A0;<br />
&#x00A0;<br />;&#x00A0;Update&#x00A0;statement
&#x00A0;<br />(pp
&#x00A0;<br />&#x00A0;(sedna:execute-query&#x00A0;conn
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"UPDATE&#x00A0;delete&#x00A0;doc(&#8217;region&#8217;)//africa"))
&#x00A0;<br />
&#x00A0;<br />;&#x00A0;Querying&#x00A0;all&#x00A0;regions&#x00A0;once&#x00A0;again
&#x00A0;<br />(pp
&#x00A0;<br />&#x00A0;(sedna:result-&#x003E;list
&#x00A0;<br />&#x00A0;&#x00A0;(sedna:execute-query&#x00A0;conn&#x00A0;"doc(&#8217;region&#8217;)/*/*")))
&#x00A0;<br />
&#x00A0;<br />;&#x00A0;Commit&#x00A0;transaction
&#x00A0;<br />(sedna:end-transaction&#x00A0;conn&#x00A0;&#8217;COMMIT)
&#x00A0;<br />
                                                                          

                                                                          
&#x00A0;<br />;&#x00A0;Close&#x00A0;the&#x00A0;connection
&#x00A0;<br />(sedna:disconnect-from-database&#x00A0;conn)
</div>
<!--l. 1860--><p class="nopar" >
<!--l. 1862--><p class="indent" >   <span 
class="cmr-10x-x-109">You can find the full version of this example and the Scheme API driver code</span>
<span 
class="cmr-10x-x-109">in:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-67">
[win:]&#x00A0;INSTALL_DIR\examples\api\scheme
&#x00A0;<br />[nix:]&#x00A0;INSTALL_DIR/examples/api/scheme
</div>
<!--l. 1866--><p class="nopar" > <span 
class="cmr-10x-x-109">where </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">INSTALL_DIR</span></span></span> <span 
class="cmr-10x-x-109">refers to the directory where Sedna is installed.</span>
<!--l. 1869--><p class="indent" >   <span 
class="cmr-10x-x-109">Before running the example make sure that the Sedna DBMS is installed and do the</span>
<span 
class="cmr-10x-x-109">following steps:</span>
<!--l. 1872--><p class="indent" >
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-26002x1"><span 
class="cmr-10x-x-109">Start Sedna by running the following command in a command line:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-68">
      se_gov
</div>
      <!--l. 1876--><p class="nopar" > <span 
class="cmr-10x-x-109">If Sedna is started successfully it prints &#8221;GOVERNOR has been started in the</span>
      <span 
class="cmr-10x-x-109">background mode&#8221;.</span>
      </li>
      <li 
  class="enumerate" id="x1-26004x2"><span 
class="cmr-10x-x-109">Create a new database </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">testdb</span></span></span> <span 
class="cmr-10x-x-109">by running the following command:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-69">
      se_cdb&#x00A0;testdb
</div>
      <!--l. 1882--><p class="nopar" > <span 
class="cmr-10x-x-109">If the database is created successfully it prints &#8221;The database &#8217;testdb&#8217; has been</span>
      <span 
class="cmr-10x-x-109">created successfully&#8221;.</span>
      </li>
      <li 
  class="enumerate" id="x1-26006x3"><span 
class="cmr-10x-x-109">Start the testdb database by running the following command:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-70">
      se_sm&#x00A0;testdb
</div>
      <!--l. 1888--><p class="nopar" > <span 
class="cmr-10x-x-109">If the database is started successfully it prints &#8221;SM has been started in the</span>
      <span 
class="cmr-10x-x-109">background mode&#8221;.</span></li></ol>
<!--l. 1893--><p class="indent" >   <span 
class="cmr-10x-x-109">If the Sedna DBMS is running on the same computer as your Scheme application,</span>
<span 
class="cmr-10x-x-109">you don&#8217;t need to change anything in the example code. If the Sedna DBMS is running</span>
<span 
class="cmr-10x-x-109">on a remote machine, you should use the name of this machine when connecting to the</span>
<span 
class="cmr-10x-x-109">database with </span><span 
class="cmtt-10x-x-109">sedna:connect-to-database </span><span 
class="cmr-10x-x-109">function.</span>
<!--l. 1898--><p class="indent" >   <span 
class="cmr-10x-x-109">For running the example supplied, you should copy all files from the folder:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-71">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;[win:]&#x00A0;INSTALL_DIR\examples\api\scheme
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;[nix:]&#x00A0;INSTALL_DIR/examples/api/scheme
</div>
<!--l. 1902--><p class="nopar" > <span 
class="cmr-10x-x-109">into the folder where the Scheme API driver code is located</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-72">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;[win:]&#x00A0;INSTALL_DIR\driver\scheme
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;[nix:]&#x00A0;INSTALL_DIR/driver/scheme
</div>
<!--l. 1907--><p class="nopar" > <span 
class="cmr-10x-x-109">where </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">INSTALL_DIR</span></span></span> <span 
class="cmr-10x-x-109">refers to the directory where Sedna is installed.</span>
<!--l. 1910--><p class="indent" >   <span 
class="cmr-10x-x-109">You can use PLT DrScheme GUI to open and run </span><span 
class="cmtt-10x-x-109">"client.scm" </span><span 
class="cmr-10x-x-109">in the</span>
<span 
class="cmr-10x-x-109">graphical mode. You can also run the example from your command line, by</span>
<span 
class="cmr-10x-x-109">typing:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-73">
mzscheme&#x00A0;-gr&#x00A0;client.scm
</div>
<!--l. 1915--><p class="nopar" >
<!--l. 1917--><p class="indent" >   <span 
class="cmr-10x-x-109">For running the example with a different Scheme implementation (Chicken or</span>
<span 
class="cmr-10x-x-109">Gambit), uncomment the corresponding line at the beginning of the example code in</span>
<span 
class="cmtt-10x-x-109">"client.scm" </span><span 
class="cmr-10x-x-109">and follow the instructions of the chosen Scheme implementation in</span>
<span 
class="cmr-10x-x-109">running the program.</span>
<!--l. 1926--><p class="noindent" >
   <h3 class="sectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2   </span></span> <a 
 id="x1-270002"></a><span 
class="cmr-10x-x-109">Database Language</span></h3>
<!--l. 1929--><p class="noindent" >
   <div class="subsectionTOCS">
   <span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsectionToc" ><span 
class="cmr-10x-x-109">2.1 </span><a 
href="#x1-280002.1"><span 
class="cmr-10x-x-109">XQuery Support</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsectionToc" ><span 
class="cmr-10x-x-109">2.2 </span><a 
href="#x1-290002.2"><span 
class="cmr-10x-x-109">XQuery Options and Extensions</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.2.1 </span><a 
href="#x1-300002.2.1"><span 
class="cmr-10x-x-109">Controlling Serialization</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.2.2 </span><a 
href="#x1-310002.2.2"><span 
class="cmr-10x-x-109">Value index-scan Functions</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.2.3 </span><a 
href="#x1-320002.2.3"><span 
class="cmr-10x-x-109">Full-Text Search Functions</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.2.4 </span><a 
href="#x1-330002.2.4"><span 
class="cmr-10x-x-109">SQL Connection</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.2.5 </span><a 
href="#x1-390002.2.5"><span 
class="cmr-10x-x-109">External Functions</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.2.6 </span><a 
href="#x1-430002.2.6"><span 
class="cmr-10x-x-109">Runtime Properties</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsectionToc" ><span 
class="cmr-10x-x-109">2.3 </span><a 
href="#x1-440002.3"><span 
class="cmr-10x-x-109">Update Language</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsectionToc" ><span 
class="cmr-10x-x-109">2.4 </span><a 
href="#x1-500002.4"><span 
class="cmr-10x-x-109">Bulk Load</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.4.1 </span><a 
href="#x1-510002.4.1"><span 
class="cmr-10x-x-109">CDATA section preserving</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsectionToc" ><span 
class="cmr-10x-x-109">2.5 </span><a 
href="#x1-520002.5"><span 
class="cmr-10x-x-109">Data Definition Language</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.5.1 </span><a 
href="#x1-530002.5.1"><span 
class="cmr-10x-x-109">Managing Standalone Documents</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.5.2 </span><a 
href="#x1-540002.5.2"><span 
class="cmr-10x-x-109">Managing Collections</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.5.3 </span><a 
href="#x1-550002.5.3"><span 
class="cmr-10x-x-109">Managing Value Indices</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.5.4 </span><a 
href="#x1-560002.5.4"><span 
class="cmr-10x-x-109">Managing Full-Text Indices</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.5.5 </span><a 
href="#x1-570002.5.5"><span 
class="cmr-10x-x-109">Managing Modules</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.5.6 </span><a 
href="#x1-580002.5.6"><span 
class="cmr-10x-x-109">Retrieving Metadata</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsectionToc" ><span 
class="cmr-10x-x-109">2.6 </span><a 
href="#x1-590002.6"><span 
class="cmr-10x-x-109">XQuery Triggers</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.6.1 </span><a 
href="#x1-600002.6.1"><span 
class="cmr-10x-x-109">Trigger Examples</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsectionToc" ><span 
class="cmr-10x-x-109">2.7 </span><a 
href="#x1-610002.7"><span 
class="cmr-10x-x-109">Debug and Profile Facilities</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.7.1 </span><a 
href="#x1-620002.7.1"><span 
class="cmr-10x-x-109">Trace</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.7.2 </span><a 
href="#x1-630002.7.2"><span 
class="cmr-10x-x-109">Debug Mode</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.7.3 </span><a 
href="#x1-640002.7.3"><span 
class="cmr-10x-x-109">Explain Query</span></a></span>
                                                                          

                                                                          
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.7.4 </span><a 
href="#x1-650002.7.4"><span 
class="cmr-10x-x-109">Profile Query</span></a></span>
   </div>
   <h4 class="subsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.1   </span></span> <a 
 id="x1-280002.1"></a><span 
class="cmr-10x-x-109">XQuery Support</span></h4>
<!--l. 1931--><p class="noindent" ><span 
class="cmr-10x-x-109">The Sedna query language is XQuery </span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:query-language"><span 
class="cmr-10x-x-109">3</span></a><span 
class="cmr-10x-x-109">]</span></span> <span 
class="cmr-10x-x-109">developed by W3C. Sedna conforms to</span>
<span 
class="cmr-10x-x-109">January 2007 specification of XQuery except the following features:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">copy-namespaces</span></span></span> <span 
class="cmr-10x-x-109">declaration  works  only  in  </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">preserve</span></span></span><span 
class="cmr-10x-x-109">,  </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">inherit</span></span></span> <span 
class="cmr-10x-x-109">mode</span>
      <span 
class="cmr-10x-x-109">regardless of actual prolog values;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">fn:normalize-unicode</span></span></span> <span 
class="cmr-10x-x-109">function is not conformant (it always returns the</span>
      <span 
class="cmr-10x-x-109">same string or raises exception);</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">External variables are not supported. However they are supported by XQJ</span>
      <span 
class="cmr-10x-x-109">driver by Charles Foster (see download page);</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">Regular expressions (e.g. </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">fn:matches()</span></span></span> <span 
class="cmr-10x-x-109">use them) are based on PCRE</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xlib:pcre-lib"><span 
class="cmr-10x-x-109">7</span></a><span 
class="cmr-10x-x-109">]</span></span>
      <span 
class="cmr-10x-x-109">syntax which differs from the one defined in W3C specifications.</span></li></ul>
<!--l. 1947--><p class="indent" >   <span 
class="cmr-10x-x-109">Sedna also has full support for two optional XQuery features:</span>
      <ul class="itemize1">
      <li class="itemize"><span 
class="cmbx-10x-x-109">Full   Axis</span><span 
class="cmr-10x-x-109">.   The   following   optional   axes   are   supported:   </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">ancestor</span></span></span><span 
class="cmr-10x-x-109">,</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">ancestor-or-self</span></span></span><span 
class="cmr-10x-x-109">,   </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">following</span></span></span><span 
class="cmr-10x-x-109">,   </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">following-sibling</span></span></span><span 
class="cmr-10x-x-109">,   </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">preceding</span></span></span><span 
class="cmr-10x-x-109">,   and</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">preceding-sibling</span></span></span><span 
class="cmr-10x-x-109">;</span>
      </li>
      <li class="itemize"><span 
class="cmbx-10x-x-109">Module Feature </span><span 
class="cmr-10x-x-109">allows a query Prolog to contain a Module Import and</span>
      <span 
class="cmr-10x-x-109">allows library modules to be created.</span></li></ul>
<!--l. 1956--><p class="indent" >   <span 
class="cmr-10x-x-109">Sedna passes &#8221;XML Query Test Suite (XQTS)&#8221; and has official &#8221;almost passed&#8221; status. The</span>
<span 
class="cmr-10x-x-109">detailed report can be found at </span><a 
href="http://www.w3.org/XML/Query/test-suite/XQTSReport.html" class="url" ><span 
class="cmtt-10x-x-109">http://www.w3.org/XML/Query/test-suite/XQTSReport.html</span></a>
<!--l. 1964--><p class="noindent" >
   <div class="subsectionTOCS">
   </div>
   <h4 class="subsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.2   </span></span> <a 
 id="x1-290002.2"></a><span 
class="cmr-10x-x-109">XQuery Options and Extensions</span></h4>
                                                                          

                                                                          
<!--l. 1967--><p class="noindent" >
   <div class="subsubsectionTOCS">
   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.2.1 </span><a 
href="#x1-300002.2.1"><span 
class="cmr-10x-x-109">Controlling Serialization</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.2.2 </span><a 
href="#x1-310002.2.2"><span 
class="cmr-10x-x-109">Value index-scan Functions</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.2.3 </span><a 
href="#x1-320002.2.3"><span 
class="cmr-10x-x-109">Full-Text Search Functions</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.2.4 </span><a 
href="#x1-330002.2.4"><span 
class="cmr-10x-x-109">SQL Connection</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.2.5 </span><a 
href="#x1-390002.2.5"><span 
class="cmr-10x-x-109">External Functions</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.2.6 </span><a 
href="#x1-430002.2.6"><span 
class="cmr-10x-x-109">Runtime Properties</span></a></span>
   </div>
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.2.1   </span></span> <a 
 id="x1-300002.2.1"></a><span 
class="cmr-10x-x-109">Controlling Serialization</span></h5>
<!--l. 1969--><p class="noindent" ><span 
class="cmr-10x-x-109">Serialization is the process of converting XML nodes evaluated by XQuery into a stream</span>
<span 
class="cmr-10x-x-109">of characters. In Sedna serialization is carried out when the result of a query is</span>
<span 
class="cmr-10x-x-109">returned to the user. You can control the serialization by setting the </span><span 
class="cmti-10x-x-109">serialization</span>
<span 
class="cmti-10x-x-109">parameters </span><span 
class="cmr-10x-x-109">specified in </span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:query-serialization"><span 
class="cmr-10x-x-109">5</span></a><span 
class="cmr-10x-x-109">]</span></span><span 
class="cmr-10x-x-109">. Currently, Sedna supports the following serialization</span>
<span 
class="cmr-10x-x-109">parameters:</span>
   <div class="tabular"> <table id="TBL-9" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-9-1g"><col 
id="TBL-9-1"></colgroup><colgroup id="TBL-9-2g"><col 
id="TBL-9-2"></colgroup><colgroup id="TBL-9-3g"><col 
id="TBL-9-3"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-9-1-"><td  style="white-space:nowrap; text-align:left;" id="TBL-9-1-1"  
class="td11"><span 
class="cmr-10x-x-109">Parameter name       </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-9-1-2"  
class="td11"><span 
class="cmr-10x-x-109">Values            </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-9-1-3"  
class="td11"><span 
class="cmr-10x-x-109">Description                          </span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-9-2-"><td  style="white-space:nowrap; text-align:left;" id="TBL-9-2-1"  
class="td11"><span 
class="cmr-10x-x-109">indent                     </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-9-2-2"  
class="td11"><span 
class="cmr-10x-x-109">&#8221;yes&#8221; or &#8221;no&#8221;   </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-9-2-3"  
class="td11"><span 
class="cmr-10x-x-109">Output indented                   </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-9-3-"><td  style="white-space:nowrap; text-align:left;" id="TBL-9-3-1"  
class="td11">                   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-9-3-2"  
class="td11"><span 
class="cmr-10x-x-109">(default yes)    </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-9-3-3"  
class="td11">                          </td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-9-4-"><td  style="white-space:nowrap; text-align:left;" id="TBL-9-4-1"  
class="td11"><span 
class="cmr-10x-x-109">cdata-section-elements</span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-9-4-2"  
class="td11"><span 
class="cmr-10x-x-109">Element list     </span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-9-4-3"  
class="td11"><span 
class="cmr-10x-x-109">Text within specified elements </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-9-5-"><td  style="white-space:nowrap; text-align:left;" id="TBL-9-5-1"  
class="td11">                   </td><td  style="white-space:nowrap; text-align:left;" id="TBL-9-5-2"  
class="td11"><span 
class="cmr-10x-x-109">e.g. &#8217;name;data&#8217;</span></td><td  style="white-space:nowrap; text-align:left;" id="TBL-9-5-3"  
class="td11"><span 
class="cmr-10x-x-109">appears within CDATA section</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-9-6-"><td  style="white-space:nowrap; text-align:left;" id="TBL-9-6-1"  
class="td11">                   </td> </tr></table></div>
<!--l. 1992--><p class="indent" >   <span 
class="cmr-10x-x-109">To set a serialization parameter, use the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">output</span></span></span> <span 
class="cmr-10x-x-109">option in a query prolog. The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">output</span></span></span>
<span 
class="cmr-10x-x-109">option is in the Sedna namespace (http://www.modis.ispras.ru/sedna) which is the predefined</span>
<span 
class="cmr-10x-x-109">namespace in Sedna so you can omit its declaration. The value of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">output</span></span></span> <span 
class="cmr-10x-x-109">option</span>
<span 
class="cmr-10x-x-109">must have the following structure &#8221;</span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">parameter-name=value;</span><span 
class="cmtt-10x-x-109">&#x00A0;parameter-name=value</span></span></span><span 
class="cmr-10x-x-109">&#8221;.</span>
<span 
class="cmr-10x-x-109">Consider the following examples:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-74">
declare&#x00A0;namespace&#x00A0;se&#x00A0;=&#x00A0;"http://www.modis.ispras.ru/sedna";
&#x00A0;<br />declare&#x00A0;option&#x00A0;se:output&#x00A0;"indent=yes;&#x00A0;cdata-section-elements=script";
&#x00A0;<br />&#x003C;x&#x003E;&#x003C;script&#x003E;K&amp;amp;R&#x00A0;C&#x003C;/script&#x003E;&#x003C;b&#x003E;element&#x003C;/b&#x003E;&#x003C;/x&#x003E;
</div>
<!--l. 2003--><p class="nopar" >
<!--l. 2005--><p class="indent" >   <span 
class="cmr-10x-x-109">As mentioned above, you may omit the Sedna namespace declaration:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-75">
declare&#x00A0;option&#x00A0;se:output&#x00A0;"indent=yes;&#x00A0;cdata-section-elements=script";
&#x00A0;<br />&#x003C;x&#x003E;&#x003C;script&#x003E;K&amp;amp;R&#x00A0;C&#x003C;/script&#x003E;&#x003C;b&#x003E;element&#x003C;/b&#x003E;&#x003C;/x&#x003E;
</div>
<!--l. 2009--><p class="nopar" >
<!--l. 2011--><p class="indent" >   <span 
class="cmr-10x-x-109">This query is evaluated as follows:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-76">
&#x003C;x&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;script&#x003E;&#x003C;![CDATA[K&amp;R&#x00A0;C]]&#x003E;&#x003C;/script&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;b&#x003E;element&#x003C;/b&#x003E;
&#x00A0;<br />&#x003C;/x&#x003E;
</div>
<!--l. 2017--><p class="nopar" >
<!--l. 2026--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.2.2   </span></span> <a 
 id="x1-310002.2.2"></a><span 
class="cmr-10x-x-109">Value index-scan Functions</span></h5>
<!--l. 2029--><p class="noindent" ><span 
class="cmr-10x-x-109">In the current version of Sedna, query executor does not use indices automatically. Use</span>
<span 
class="cmr-10x-x-109">the following functions to enforce executor to employ indices.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-77">
index-scan&#x00A0;($title&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$value&#x00A0;as&#x00A0;xdt:anyAtomicType,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$mode&#x00A0;as&#x00A0;xs:string)&#x00A0;as&#x00A0;node()*
</div>
<!--l. 2037--><p class="nopar" >
<!--l. 2039--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">index-scan</span></span></span> <span 
class="cmr-10x-x-109">function scans the index with the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$title</span></span></span> <span 
class="cmr-10x-x-109">name and returns the</span>
<span 
class="cmr-10x-x-109">sequence of nodes which keys are equal (less than, greater than, greater or equal, less or</span>
<span 
class="cmr-10x-x-109">equal) to the search value </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$value</span></span></span><span 
class="cmr-10x-x-109">. A Sedna error is raised if the search value can not be</span>
<span 
class="cmr-10x-x-109">cast to the atomic type of the index. The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$mode</span></span></span> <span 
class="cmr-10x-x-109">parameter of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs:string</span></span></span> <span 
class="cmr-10x-x-109">type is</span>
<span 
class="cmr-10x-x-109">used to set the type of the scan. The value of the parameter must be equal to one of the</span>
<span 
class="cmr-10x-x-109">following: &#8217;EQ&#8217; (equal), &#8217;LT&#8217;(less than), &#8217;GT&#8217; (greater than), &#8217;GE&#8217; (greater or equal),</span>
<span 
class="cmr-10x-x-109">&#8217;LE&#8217; (less or equal).</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-78">
index-scan-between&#x00A0;($title&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$value1&#x00A0;as&#x00A0;xdt:anyAtomicType,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$value2&#x00A0;as&#x00A0;xdt:anyAtomicType,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$range&#x00A0;as&#x00A0;xs:string)&#x00A0;as&#x00A0;node()*
</div>
<!--l. 2053--><p class="nopar" >
<!--l. 2055--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">index-scan-between</span></span></span> <span 
class="cmr-10x-x-109">scans the index with the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$title</span></span></span> <span 
class="cmr-10x-x-109">name and returns the</span>
<span 
class="cmr-10x-x-109">sequence of nodes which keys belong to the interval (segment, left half-interval, right</span>
<span 
class="cmr-10x-x-109">half-interval) between the first </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$value1</span></span></span> <span 
class="cmr-10x-x-109">and second </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$value2</span></span></span> <span 
class="cmr-10x-x-109">search values. A Sedna</span>
<span 
class="cmr-10x-x-109">error is raised if the search values can not be cast to the atomic type of the index. This</span>
<span 
class="cmr-10x-x-109">function provides the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$range</span></span></span> <span 
class="cmr-10x-x-109">parameter of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs:string</span></span></span> <span 
class="cmr-10x-x-109">type to set the type</span>
<span 
class="cmr-10x-x-109">of the scan. The value of the string must be equal to one of the following:</span>
<span 
class="cmr-10x-x-109">&#8217;INT&#8217; (interval), &#8217;SEG&#8217; (segment), &#8217;HINTR&#8217; (right half-interval), &#8217;HINTL&#8217; (left</span>
<span 
class="cmr-10x-x-109">half-interval).</span>
<!--l. 2065--><p class="indent" >   <span 
class="cmr-10x-x-109">For example, to select the names of people who live in the London city employing</span>
<span 
class="cmr-10x-x-109">the &#8221;people&#8221; index defined in section </span><a 
href="#x1-550002.5.3"><span 
class="cmr-10x-x-109">2.5.3</span><!--tex4ht:ref: sec:managing-value-indices --></a><span 
class="cmr-10x-x-109">, use the following expression:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-79">
index-scan("people",&#x00A0;"London",&#x00A0;"EQ")/name
</div>
<!--l. 2071--><p class="nopar" >
<!--l. 2077--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.2.3   </span></span> <a 
 id="x1-320002.2.3"></a><span 
class="cmr-10x-x-109">Full-Text Search Functions</span></h5>
<!--l. 2080--><p class="noindent" ><span 
class="cmr-10x-x-109">Please read section </span><a 
href="#x1-560002.5.4"><span 
class="cmr-10x-x-109">2.5.4</span><!--tex4ht:ref: sec:managing-ft-indices --></a> <span 
class="cmr-10x-x-109">before reading this section.</span>
<!--l. 2082--><p class="indent" >   <span 
class="cmr-10x-x-109">In the current version of Sedna, query executor does not use full-text indices</span>
<span 
class="cmr-10x-x-109">automatically. Use the following functions to enforce executor to employ indices.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-80">
ftindex-scan($title&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$query&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$options&#x00A0;as&#x00A0;xs:string)&#x00A0;as&#x00A0;node()*
</div>
<!--l. 2090--><p class="nopar" >
<!--l. 2092--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">ftindex-scan</span></span></span> <span 
class="cmr-10x-x-109">function scans the full-text index with the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$title</span></span></span> <span 
class="cmr-10x-x-109">name and</span>
<span 
class="cmr-10x-x-109">returns the sequence of items which satisfy the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$query</span></span></span><span 
class="cmr-10x-x-109">. If dtSearch </span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xlink:dtsearch-engine"><span 
class="cmr-10x-x-109">15</span></a><span 
class="cmr-10x-x-109">]</span></span> <span 
class="cmr-10x-x-109">is used as</span>
<span 
class="cmr-10x-x-109">full-text search backend, use dtSearch request language </span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xdoc:dtsearch"><span 
class="cmr-10x-x-109">16</span></a><span 
class="cmr-10x-x-109">]</span></span> <span 
class="cmr-10x-x-109">to specify the query.</span>
<span 
class="cmr-10x-x-109">DtSearch options </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">dtsSearchAnyWords</span></span></span> <span 
class="cmr-10x-x-109">or </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">dtsSearchAllWords</span></span></span> <span 
class="cmr-10x-x-109">may be specified in</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$options</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 2099--><p class="indent" >   <span 
class="cmr-10x-x-109">For example, you can employ the &#8221;articles&#8221; index defined in section </span><a 
href="#x1-560002.5.4"><span 
class="cmr-10x-x-109">2.5.4</span><!--tex4ht:ref: sec:managing-ft-indices --></a> <span 
class="cmr-10x-x-109">to select</span>
<span 
class="cmr-10x-x-109">the titles of articles that contain word &#8221;apple&#8221; but not &#8221;pear&#8221;:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-81">
ftindex-scan("articles",&#x00A0;"apple&#x00A0;and&#x00A0;not&#x00A0;pear")/title
</div>
<!--l. 2105--><p class="nopar" >
<!--l. 2107--><p class="indent" >   <span 
class="cmr-10x-x-109">If native full-text indices are used, the following constructs can be used as parts of</span>
<span 
class="cmr-10x-x-109">query:</span>
      <ul class="itemize1">
      <li class="itemize"><span 
class="cmr-10x-x-109">phrases: several words in single or double quotes will be searched as a phrase</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">binary operators: parts of the query separated by whitepace are treated</span>
      <span 
class="cmr-10x-x-109">as  conjunction,  disjunction  is  specified  by  </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">&#8217;OR&#8217;</span></span></span><span 
class="cmr-10x-x-109">.  For  example:  query</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">&#8217;apple</span><span 
class="cmtt-10x-x-109">&#x00A0;juice&#8217;</span></span></span> <span 
class="cmr-10x-x-109">will return only nodes contaitinig both words. while query</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">&#8217;apple</span><span 
class="cmtt-10x-x-109">&#x00A0;OR</span><span 
class="cmtt-10x-x-109">&#x00A0;juice&#8217;</span></span></span> <span 
class="cmr-10x-x-109">will return nodes containing any of these words.</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">stemming: if index was created with stemtype=both option, tilde must be</span>
      <span 
class="cmr-10x-x-109">appended to the word in order to use stemming, for example in the query</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">&#8217;apple</span><span 
class="cmtt-10x-x-109">&#x00A0;juice~&#8217;</span></span></span> <span 
class="cmr-10x-x-109">stemming will be used only for the second word.</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">contains: to search for words inside some tag, use CONTAINS; the query</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">&#8217;title</span><span 
class="cmtt-10x-x-109">&#x00A0;CONTAINS</span><span 
class="cmtt-10x-x-109">&#x00A0;word&#8217;</span></span></span> <span 
class="cmr-10x-x-109">will return nodes in which word &#8217;word&#8217; occurs as</span>
      <span 
class="cmr-10x-x-109">part of tag &#8217;title&#8217;.</span></li></ul>
<!--l. 2129--><p class="indent" >   <span 
class="cmr-10x-x-109">All keywords (like CONTAINS and OR) must be upper-cased.</span>
<!--l. 2131--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">ftscan</span></span></span> <span 
class="cmr-10x-x-109">function returns those items of the input sequence </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$seq</span></span></span> <span 
class="cmr-10x-x-109">which satisfy</span>
<span 
class="cmr-10x-x-109">the query </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$query</span></span></span><span 
class="cmr-10x-x-109">. The function does not use indices and can be applied to</span>
<span 
class="cmr-10x-x-109">any sequence of nodes, even those that are not indexed. The query </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$query</span></span></span> <span 
class="cmr-10x-x-109">is</span>
<span 
class="cmr-10x-x-109">evaluated over the text representation constructed according to the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$type</span></span></span>
<span 
class="cmr-10x-x-109">and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$customization_rules</span></span></span> <span 
class="cmr-10x-x-109">parameters. The values of the parameters are</span>
<span 
class="cmr-10x-x-109">the same as those used when a full-text index is created (see section </span><a 
href="#x1-560002.5.4"><span 
class="cmr-10x-x-109">2.5.4</span><!--tex4ht:ref: sec:managing-ft-indices --></a> <span 
class="cmr-10x-x-109">for</span>
<span 
class="cmr-10x-x-109">details).</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-82">
ftscan($seq&#x00A0;as&#x00A0;node()*,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$query&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$type&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$customization_rules&#x00A0;as&#x00A0;xs:string)&#x00A0;as&#x00A0;node()*
</div>
<!--l. 2144--><p class="nopar" >
<!--l. 2146--><p class="indent" >   <span 
class="cmr-10x-x-109">For example, you can select the titles of articles that contain word &#8221;apple&#8221;</span>
<span 
class="cmr-10x-x-109">but not &#8221;pear&#8221; </span><span 
class="cmti-10x-x-109">without </span><span 
class="cmr-10x-x-109">using indices and using special customization rules as</span>
<span 
class="cmr-10x-x-109">follows:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-83">
ftscan(doc("foo")/library//article,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"apple&#x00A0;and&#x00A0;not&#x00A0;pear",
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"customized-value",
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(("b","string-value"),("a","delimited-value")))/title
</div>
<!--l. 2155--><p class="nopar" >
<!--l. 2161--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.2.4   </span></span> <a 
 id="x1-330002.2.4"></a><span 
class="cmr-10x-x-109">SQL Connection</span></h5>
<!--l. 2163--><p class="noindent" ><span 
class="cmr-10x-x-109">SQL Connection allows access to relational databases from XQuery using SQL. The</span>
<span 
class="cmr-10x-x-109">resulting relations are represented on-the-fly as sequences of XML-elements</span>
<span 
class="cmr-10x-x-109">representing rows. These elements have sub-elements corresponding with the</span>
<span 
class="cmr-10x-x-109">columns returned by the SQL query and thus can be easy processed in XQuery.</span>
<span 
class="cmr-10x-x-109">All functions dealing with access to SQL data are located in the namespace</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">http://modis.ispras.ru/Sedna/SQL</span></span></span> <span 
class="cmr-10x-x-109">which is referred as </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql</span></span></span> <span 
class="cmr-10x-x-109">in the following function</span>
<span 
class="cmr-10x-x-109">declarations and examples.</span>
<!--l. 2172--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-340002.2.4"></a><span 
class="cmr-10x-x-109">Connections</span></h5>
<!--l. 2172--><p class="noindent" ><span 
class="cmr-10x-x-109">In order to execute SQL queries on a RDBMS, you should first establish a connection to</span>
<span 
class="cmr-10x-x-109">it using one of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:connect</span></span></span> <span 
class="cmr-10x-x-109">functions:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-84">
function&#x00A0;sql:connect($db-url&#x00A0;as&#x00A0;xs:string)&#x00A0;as&#x00A0;xs:integer
&#x00A0;<br />function&#x00A0;sql:connect($db-url&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$user&#x00A0;as&#x00A0;xs:string)&#x00A0;as&#x00A0;xs:integer
&#x00A0;<br />function&#x00A0;sql:connect($db-url&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$user&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$password&#x00A0;as&#x00A0;xs:string)&#x00A0;as&#x00A0;xs:integer
&#x00A0;<br />function&#x00A0;sql:connect($db-url&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$user&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$password&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$options&#x00A0;as&#x00A0;element()*)&#x00A0;as&#x00A0;xs:integer
</div>
<!--l. 2187--><p class="nopar" >
<!--l. 2189--><p class="indent" >   <span 
class="cmr-10x-x-109">These functions attempt to establish a database connection to the given URL using</span>
<span 
class="cmr-10x-x-109">a user name and password if specified. They return a connection handle which could be</span>
<span 
class="cmr-10x-x-109">then passed to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:execute</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:prepare</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:close</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:rollback</span></span></span><span 
class="cmr-10x-x-109">, and</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:commit</span></span></span> <span 
class="cmr-10x-x-109">functions. If connection could not be established, a Sedna error is</span>
<span 
class="cmr-10x-x-109">raised.</span>
<!--l. 2195--><p class="indent" >   <span 
class="cmr-10x-x-109">All arguments of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:connect</span></span></span> <span 
class="cmr-10x-x-109">functions except for </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$db-url</span></span></span> <span 
class="cmr-10x-x-109">are optional:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$db-url</span></span></span> <span 
class="cmr-10x-x-109">is the URL of the database to which a connect is established. It should</span>
      <span 
class="cmr-10x-x-109">be one of the following form:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-85">
      odbc:&#x003C;driver&#x00A0;name&#x003E;:[//&#x003C;server&#x003E;[/&#x003C;database&#x003E;][;]][&#x003C;options&#x003E;]
</div>
      <!--l. 2203--><p class="nopar" > <span 
class="cmr-10x-x-109">&#8220;;&#8221; after </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">&#x003C;database&#x003E;</span></span></span> <span 
class="cmr-10x-x-109">or </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">&#x003C;server&#x003E;</span></span></span> <span 
class="cmr-10x-x-109">is required if there are some driver options</span>
      <span 
class="cmr-10x-x-109">following it. Driver options must be in the following form:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-86">
      &#x003C;option&#x003E;=&#x003C;value&#x003E;{;&#x003C;option&#x003E;=&#x003C;value&#x003E;}
</div>
      <!--l. 2208--><p class="nopar" > <span 
class="cmr-10x-x-109">List of available options depends on the ODBC driver used. One of the common</span>
      <span 
class="cmr-10x-x-109">options is &#8220;Port&#8221; which is used to specify the port on which the database server is</span>
      <span 
class="cmr-10x-x-109">configured to listen. For example:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-87">
      odbc:MySQL&#x00A0;ODBC&#x00A0;3.51&#x00A0;Driver://localhost/somedb;Port=1234
</div>
      <!--l. 2214--><p class="nopar" >
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$user</span></span></span> <span 
class="cmr-10x-x-109">is your user name for the session.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$password</span></span></span> <span 
class="cmr-10x-x-109">is your password for the session.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$options</span></span></span> <span 
class="cmr-10x-x-109">is an optional sequence of connection options. Connection options are</span>
      <span 
class="cmr-10x-x-109">elements of the form:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-88">
      &#x003C;sql:option&#x00A0;name="&#x003C;option-name&#x003E;"&#x00A0;value="&#x003C;option-value&#x003E;"/&#x003E;
</div>
      <!--l. 2221--><p class="nopar" > <span 
class="cmr-10x-x-109">The only connection option available for the moment is </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">manual-commit</span></span></span> <span 
class="cmr-10x-x-109">which</span>
      <span 
class="cmr-10x-x-109">enables manual commit mode if its value is </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">on</span></span></span><span 
class="cmr-10x-x-109">.</span></li></ul>
<!--l. 2226--><p class="indent" >   <span 
class="cmr-10x-x-109">To disconnect from the database, you can use the following function:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-89">
function&#x00A0;sql:close($connection&#x00A0;as&#x00A0;xs:integer)&#x00A0;as&#x00A0;element()?
</div>
<!--l. 2229--><p class="nopar" > <span 
class="cmr-10x-x-109">It closes database connection associated with connection handle </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$connection</span></span></span><span 
class="cmr-10x-x-109">. A Sedna</span>
<span 
class="cmr-10x-x-109">error is raised if operation cannot be completed.</span>
<!--l. 2234--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-350002.2.4"></a><span 
class="cmr-10x-x-109">Executing Queries</span></h5>
<!--l. 2235--><p class="noindent" ><span 
class="cmr-10x-x-109">When a database connection is established you can start executing queries. Two types</span>
<span 
class="cmr-10x-x-109">of query execution are supported: </span><span 
class="cmti-10x-x-109">direct query execution </span><span 
class="cmr-10x-x-109">and </span><span 
class="cmti-10x-x-109">prepared query</span>
<span 
class="cmti-10x-x-109">execution</span><span 
class="cmr-10x-x-109">.</span>
<!--l. 2240--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-360002.2.4"></a><span 
class="cmr-10x-x-109">Direct Queries</span></h5>
<!--l. 2241--><p class="noindent" ><span 
class="cmr-10x-x-109">Simple SQL queries are executed as the following XQuery example shows:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-90">
declare&#x00A0;namespace&#x00A0;sql="http://modis.ispras.ru/Sedna/SQL";
&#x00A0;<br />let&#x00A0;$connection&#x00A0;:=
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;sql:connect("odbc:MySQL&#x00A0;ODBC&#x00A0;3.51&#x00A0;Driver://localhost/somedb",
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"user",&#x00A0;"pass")
&#x00A0;<br />return
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;sql:execute($connection,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"SELECT&#x00A0;*&#x00A0;FROM&#x00A0;people&#x00A0;WHERE&#x00A0;first&#x00A0;=&#x00A0;&#8217;Peter&#8217;");
</div>
<!--l. 2251--><p class="nopar" >
<!--l. 2253--><p class="indent" >   <span 
class="cmr-10x-x-109">The result will be something like this:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-91">
&#x003C;tuple&#x00A0;first="Peter"&#x00A0;last="Jackson"&#x00A0;city="Wellington"/&#x003E;
</div>
<!--l. 2257--><p class="nopar" >
<!--l. 2259--><p class="indent" >   <span 
class="cmr-10x-x-109">There are two functions for direct query execution:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-92">
function&#x00A0;sql:execute($connection&#x00A0;as&#x00A0;xs:integer,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$statement&#x00A0;as&#x00A0;xs:string)&#x00A0;as&#x00A0;element()*
&#x00A0;<br />function&#x00A0;sql:execute($connection&#x00A0;as&#x00A0;xs:integer,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$statement&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$query-options&#x00A0;as&#x00A0;element()*)&#x00A0;as&#x00A0;element()*
</div>
<!--l. 2266--><p class="nopar" > <span 
class="cmr-10x-x-109">These functions execute a SQL query and return a sequence of elements representing</span>
<span 
class="cmr-10x-x-109">the query result. SQL query can be as both a query statement and an update</span>
<span 
class="cmr-10x-x-109">statement. In case of query statement, the result sequence contains an element named</span>
<span 
class="cmr-10x-x-109">&#8217;row&#8217; for each row of the query result. Each element contains as many children</span>
<span 
class="cmr-10x-x-109">attributes as there are non-NULL fields in the corresponding result-row. Each attribute</span>
<span 
class="cmr-10x-x-109">has the name of a row field. Fields with NULL values are not included. In case of</span>
<span 
class="cmr-10x-x-109">update statement, empty sequence is returned.A Sedna error is raised on an erroneous</span>
<span 
class="cmr-10x-x-109">statement.</span>
<!--l. 2276--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:execute</span></span></span> <span 
class="cmr-10x-x-109">have the following arguments:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$connection</span></span></span> <span 
class="cmr-10x-x-109">is a connection handle, returned by </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:connect</span></span></span> <span 
class="cmr-10x-x-109">function;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$statement</span></span></span> <span 
class="cmr-10x-x-109">is a string containing SQL statement to be executed;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$query-options</span></span></span> <span 
class="cmr-10x-x-109">is a sequence of optional query parameters.</span></li></ul>
<!--l. 2284--><p class="indent" >   <span 
class="cmr-10x-x-109">Update queries can be executed using the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:exec-update</span></span></span> <span 
class="cmr-10x-x-109">function:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-93">
function&#x00A0;sql:exec-update($connection&#x00A0;as&#x00A0;xs:integer,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$statement&#x00A0;as&#x00A0;xs:string)&#x00A0;as&#x00A0;xs:integer
&#x00A0;<br />function&#x00A0;sql:exec-update($connection&#x00A0;as&#x00A0;xs:integer,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$statement&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$query-options&#x00A0;as&#x00A0;element()*)&#x00A0;as&#x00A0;xs:integer
</div>
<!--l. 2291--><p class="nopar" > <span 
class="cmr-10x-x-109">these functions are similar to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:execute</span></span></span><span 
class="cmr-10x-x-109">, but return the number of rows affected by</span>
<span 
class="cmr-10x-x-109">an update query (instead of an empty sequence returned by </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:execute</span></span></span> <span 
class="cmr-10x-x-109">for</span>
<span 
class="cmr-10x-x-109">update-queries). Function arguments are same as for </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:execute</span></span></span><span 
class="cmr-10x-x-109">. The behaviour of</span>
<span 
class="cmr-10x-x-109">this function is undefined for non-update queries.</span>
<!--l. 2299--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-370002.2.4"></a><span 
class="cmr-10x-x-109">Prepared Statements</span></h5>
<!--l. 2300--><p class="noindent" ><span 
class="cmr-10x-x-109">Sometimes it is more convenient or more efficient to use prepared SQL statements</span>
<span 
class="cmr-10x-x-109">instead of direct query execution. In most cases, when a SQL statement is prepared it</span>
<span 
class="cmr-10x-x-109">will be sent to the DBMS right away, where it will be compiled. This means</span>
<span 
class="cmr-10x-x-109">that the DBMS does not have to compile a prepared statement each time it is</span>
<span 
class="cmr-10x-x-109">executed.</span>
<!--l. 2306--><p class="indent" >   <span 
class="cmr-10x-x-109">Prepared statements can take parameters. This allows using the same statement and</span>
<span 
class="cmr-10x-x-109">supply it with different values each time you execute it, as in the following XQuery</span>
<span 
class="cmr-10x-x-109">example:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-94">
declare&#x00A0;namespace&#x00A0;sql="http://modis.ispras.ru/Sedna/SQL";
&#x00A0;<br />let&#x00A0;$connection&#x00A0;:=
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;sql:connect("odbc:MySQL&#x00A0;ODBC&#x00A0;3.51&#x00A0;Driver://localhost/somedb",
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"user",&#x00A0;"pass")
&#x00A0;<br />let&#x00A0;$statement&#x00A0;:=
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;sql:prepare($connection,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"INSERT&#x00A0;INTO&#x00A0;people(first,&#x00A0;last)&#x00A0;VALUES&#x00A0;(?,&#x00A0;?)")
&#x00A0;<br />return&#x00A0;(sql:execute($statement,&#x00A0;"John",&#x00A0;"Smith"),
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;sql:execute($statement,&#x00A0;"Matthew",&#x00A0;"Barney"))
</div>
<!--l. 2320--><p class="nopar" > <span 
class="cmr-10x-x-109">this XQuery code inserts two rows into table </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">people</span></span></span> <span 
class="cmr-10x-x-109">and returns an empty</span>
<span 
class="cmr-10x-x-109">sequence.</span>
<!--l. 2325--><p class="indent" >   <span 
class="cmr-10x-x-109">To use prepared statements, first you need to create a prepared statement handle</span>
<span 
class="cmr-10x-x-109">using the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:prepare</span></span></span> <span 
class="cmr-10x-x-109">function:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-95">
function&#x00A0;sql:prepare($connection&#x00A0;as&#x00A0;xs:integer,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$statement&#x00A0;as&#x00A0;xs:string)&#x00A0;as&#x00A0;xs:integer
&#x00A0;<br />function&#x00A0;sql:prepare($connection&#x00A0;as&#x00A0;xs:integer,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$statement&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$query-options&#x00A0;as&#x00A0;element()*)&#x00A0;as&#x00A0;xs:integer
</div>
<!--l. 2334--><p class="nopar" > <span 
class="cmr-10x-x-109">these functions prepare a SQL statement for later execution and returns a prepared</span>
<span 
class="cmr-10x-x-109">statement handle which can be used in the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:execute</span></span></span> <span 
class="cmr-10x-x-109">and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:exec-update</span></span></span>
<span 
class="cmr-10x-x-109">functions. A Sedna error is raised on an erroneous statement.</span>
<!--l. 2341--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:prepare</span></span></span> <span 
class="cmr-10x-x-109">functions have the following arguments:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$connection</span></span></span> <span 
class="cmr-10x-x-109">is a connection handle, created by </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:connect</span></span></span> <span 
class="cmr-10x-x-109">function;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$statement</span></span></span> <span 
class="cmr-10x-x-109">is a string containing a SQL statement that may contain one</span>
      <span 
class="cmr-10x-x-109">or more &#8217;?&#8217; - </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">IN</span></span></span> <span 
class="cmr-10x-x-109">parameter placeholders;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$query-options</span></span></span> <span 
class="cmr-10x-x-109">is a sequence of optional query parameters.</span></li></ul>
<!--l. 2351--><p class="indent" >   <span 
class="cmr-10x-x-109">There are two prepared statement execution functions, similar to direct query</span>
<span 
class="cmr-10x-x-109">execution:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-96">
function&#x00A0;sql:execute($prepared-statement&#x00A0;as&#x00A0;xs:integer,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$param1&#x00A0;as&#x00A0;item()?,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;...)&#x00A0;as&#x00A0;element()*
</div>
<!--l. 2358--><p class="nopar" > <span 
class="cmr-10x-x-109">this function is similar to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:execute</span></span></span> <span 
class="cmr-10x-x-109">for direct queries and returns a sequence of</span>
<span 
class="cmr-10x-x-109">elements representing the query result.</span>
<!--l. 2362--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:execute</span></span></span> <span 
class="cmr-10x-x-109">function have the following arguments:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$prepared-statement</span></span></span>  <span 
class="cmr-10x-x-109">is   a   prepared   statement   handle   created   by</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$sql:prepare</span></span></span><span 
class="cmr-10x-x-109">;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$param1,</span><span 
class="cmtt-10x-x-109">&#x00A0;...</span></span></span> <span 
class="cmr-10x-x-109">are parameters for parametrized statements. The number of</span>
      <span 
class="cmr-10x-x-109">parameters specified must exactly match the number of parameters of the</span>
      <span 
class="cmr-10x-x-109">prepared statement. NULL values are represented as empty sequences </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">()</span></span></span><span 
class="cmr-10x-x-109">.</span></li></ul>
<!--l. 2373--><p class="indent" >   <span 
class="cmr-10x-x-109">To execute a prepared update statement you may use </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">exec-update</span></span></span> <span 
class="cmr-10x-x-109">function:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-97">
function&#x00A0;sql:exec-update($prepared-statement&#x00A0;as&#x00A0;xs:integer,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;$param1&#x00A0;as&#x00A0;item()?,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;...)&#x00A0;as&#x00A0;xs:integer
</div>
<!--l. 2378--><p class="nopar" > <span 
class="cmr-10x-x-109">This function is similar to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:execute</span></span></span><span 
class="cmr-10x-x-109">, but returns the number of rows affected by an</span>
<span 
class="cmr-10x-x-109">update query (instead of an empty sequence returned by </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:execute</span></span></span> <span 
class="cmr-10x-x-109">for</span>
<span 
class="cmr-10x-x-109">update-queries). Function arguments are the same as for </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:execute</span></span></span><span 
class="cmr-10x-x-109">. The behavior of</span>
<span 
class="cmr-10x-x-109">this function is undefined for non-update queries.</span>
<!--l. 2386--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-380002.2.4"></a><span 
class="cmr-10x-x-109">Transactions</span></h5>
<!--l. 2388--><p class="noindent" ><span 
class="cmr-10x-x-109">The default commit mode of connection is auto-commit, meaning that all updates will</span>
<span 
class="cmr-10x-x-109">be committed automatically. If this is not desired behaviour, you can pass</span>
<span 
class="cmr-10x-x-109">manual-commit option to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:connect</span></span></span> <span 
class="cmr-10x-x-109">when you create a connection handle.</span>
<!--l. 2392--><p class="indent" >   <span 
class="cmr-10x-x-109">In manual commit mode you can specify when updates will be committed or rolled</span>
<span 
class="cmr-10x-x-109">back:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-98">
declare&#x00A0;namespace&#x00A0;sql="http://modis.ispras.ru/Sedna/SQL";
&#x00A0;<br />let&#x00A0;$connection&#x00A0;:=
&#x00A0;<br />&#x00A0;&#x00A0;sql:connect("odbc:MySQL&#x00A0;ODBC&#x00A0;3.51&#x00A0;Driver://localhost/testdb",
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"user-name",
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"user-password",
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;sql:option&#x00A0;name="manual-commit"&#x00A0;value="1"/&#x003E;)
&#x00A0;<br />return
&#x00A0;<br />&#x00A0;&#x00A0;for&#x00A0;$person&#x00A0;in&#x00A0;doc("auction")/person
&#x00A0;<br />&#x00A0;&#x00A0;return&#x00A0;(
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;sql:execute($connection,&#x00A0;"&#x003C;do&#x00A0;something&#x00A0;with&#x00A0;person&#x003E;"),
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;(fn:all-is-ok($connection,&#x00A0;$person))&#x00A0;then
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;sql:execute($connection,&#x00A0;"&#x003C;do&#x00A0;something&#x00A0;with&#x00A0;person&#x003E;"),
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;sql:commit($connection)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;else
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;sql:rollback($connection))
</div>
<!--l. 2414--><p class="nopar" >
<!--l. 2416--><p class="indent" >   <span 
class="cmr-10x-x-109">There are two functions for specifying transaction boundaries - </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:commit</span></span></span> <span 
class="cmr-10x-x-109">and</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:rollback</span></span></span> <span 
class="cmr-10x-x-109">(transactions are started automatically by queries, these functions only</span>
<span 
class="cmr-10x-x-109">close them):</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-99">
function&#x00A0;sql:commit($connection&#x00A0;as&#x00A0;xs:integer)&#x00A0;as&#x00A0;element()?
</div>
<!--l. 2422--><p class="nopar" >
<!--l. 2424--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:commit</span></span></span> <span 
class="cmr-10x-x-109">function commits all changes made during the last transaction in the</span>
<span 
class="cmr-10x-x-109">database connection specified by connection handle </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$connection</span></span></span> <span 
class="cmr-10x-x-109">and closes transaction.</span>
<span 
class="cmr-10x-x-109">A Sedna error is raised if operation cannot be completed.</span>
<!--l. 2428--><p class="indent" >   <span 
class="cmr-10x-x-109">Function </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sql:rollback</span></span></span> <span 
class="cmr-10x-x-109">rolls back all changes made during the last transaction in</span>
<span 
class="cmr-10x-x-109">the database connection specified by the connection handle </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$connection</span></span></span> <span 
class="cmr-10x-x-109">and closes</span>
<span 
class="cmr-10x-x-109">transaction. A Sedna error is raised if operation cannot be completed.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-100">
function&#x00A0;sql:rollback($connection&#x00A0;as&#x00A0;xs:integer)&#x00A0;as&#x00A0;element()?
</div>
<!--l. 2435--><p class="nopar" >
<!--l. 2441--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.2.5   </span></span> <a 
 id="x1-390002.2.5"></a><span 
class="cmr-10x-x-109">External Functions</span></h5>
<!--l. 2443--><p class="noindent" ><span 
class="cmti-10x-x-109">External function </span><span 
class="cmr-10x-x-109">is a notion defined in the XQuery specification </span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:query-language"><span 
class="cmr-10x-x-109">3</span></a><span 
class="cmr-10x-x-109">]</span></span> <span 
class="cmr-10x-x-109">as follows:</span>
<span 
class="cmr-10x-x-109">&#8221;External functions are functions that are implemented outside the query environment&#8221;.</span>
<span 
class="cmr-10x-x-109">Support for external functions allows you to extend XQuery by implementing functions</span>
<span 
class="cmr-10x-x-109">in other languages.</span>
<!--l. 2448--><p class="indent" >   <span 
class="cmr-10x-x-109">Sedna provides a server programming API to write external functions in the C/C++</span>
<span 
class="cmr-10x-x-109">language. External functions in Sedna are limited to dealing with sequences of atomic</span>
<span 
class="cmr-10x-x-109">values. External functions are compiled and linked in the form of shared libraries (i.e.</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">.dll</span></span></span> <span 
class="cmr-10x-x-109">files in Windows or </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">.so</span></span></span> <span 
class="cmr-10x-x-109">files in Linux/FreeBSD and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">.dylib</span></span></span> <span 
class="cmr-10x-x-109">in Mac OS) and</span>
<span 
class="cmr-10x-x-109">loaded by the server on demand. Although the Sedna XQuery executor evaluates</span>
<span 
class="cmr-10x-x-109">queries in a lazy manner, all external function calls are evaluated in an eager</span>
<span 
class="cmr-10x-x-109">manner.</span>
<!--l. 2456--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-400002.2.5"></a><span 
class="cmr-10x-x-109">Using External Functions</span></h5>
<!--l. 2457--><p class="noindent" ><span 
class="cmr-10x-x-109">To use an external function you need to declare this function in prologue with </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">external</span></span></span>
<span 
class="cmr-10x-x-109">keyword instead of function body. Then it may be used normally:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-101">
declare&#x00A0;function&#x00A0;se:f($a&#x00A0;as&#x00A0;xs:integer)&#x00A0;as&#x00A0;$xs:integer&#x00A0;external;
&#x00A0;<br />f(10)
</div>
<!--l. 2464--><p class="nopar" >
<!--l. 2467--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-410002.2.5"></a><span 
class="cmr-10x-x-109">Creating External Functions</span></h5>
<!--l. 2468--><p class="noindent" ><span 
class="cmr-10x-x-109">External functions must be written in C/C++. To implement a new XQuery function</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func</span></span></span> <span 
class="cmr-10x-x-109">you should write the following C (or C++) functions: </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_init</span></span></span> <span 
class="cmr-10x-x-109">and</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_deinit</span></span></span><span 
class="cmr-10x-x-109">. When executor decides that it needs to use an external function, first it</span>
<span 
class="cmr-10x-x-109">initializes this function by calling </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_init</span></span></span><span 
class="cmr-10x-x-109">, after that it will call </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func</span></span></span> <span 
class="cmr-10x-x-109">to</span>
<span 
class="cmr-10x-x-109">compute results as many times as needed. When some external function is not</span>
<span 
class="cmr-10x-x-109">needed anymore, executor calls </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_deinit</span></span></span> <span 
class="cmr-10x-x-109">(which probably will free any</span>
<span 
class="cmr-10x-x-109">memory allocated by </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_init</span></span></span><span 
class="cmr-10x-x-109">). Each one of the three functions receives an</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_EF_INIT</span></span></span><span class="footnote-mark"><a 
href="ProgGuide2.html#fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-41001f1"></a> 
<span 
class="cmr-10x-x-109">structure as a parameter. This structure has several fields that are initialized by</span>
<span 
class="cmr-10x-x-109">executor before any </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_init</span></span></span> <span 
class="cmr-10x-x-109">or </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_deinit</span></span></span> <span 
class="cmr-10x-x-109">calls:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-102">
typedef&#x00A0;struct&#x00A0;sedna_ef_init
&#x00A0;<br />{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;void&#x00A0;*(*sedna_malloc)(size_t);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;void&#x00A0;(*sedna_free)(void&#x00A0;*);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;SEDNA_SEQUENCE_ITEM&#x00A0;*item_buf;
&#x00A0;<br />}&#x00A0;SEDNA_EF_INIT;
</div>
<!--l. 2489--><p class="nopar" > <span 
class="cmr-10x-x-109">The fields of this structure may be used in your implementation:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sedna_malloc</span></span></span> <span 
class="cmr-10x-x-109">is a pointer to a malloc function which must be used to</span>
      <span 
class="cmr-10x-x-109">allocate memory for function results, this memory will be automatically freed</span>
      <span 
class="cmr-10x-x-109">by the query executor. It may also be used to allocate memory for internal</span>
      <span 
class="cmr-10x-x-109">use, such memory must be freed manually using the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sedna_free</span></span></span> <span 
class="cmr-10x-x-109">function.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sedna_free</span></span></span> <span 
class="cmr-10x-x-109">is a pointer to free function that releases memory allocated</span>
      <span 
class="cmr-10x-x-109">using </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sedna_malloc</span></span></span> <span 
class="cmr-10x-x-109">function.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">item_buf</span></span></span> <span 
class="cmr-10x-x-109">is a pointer to a preallocated </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_SEQUENCE_ITEM</span></span></span> <span 
class="cmr-10x-x-109">which may</span>
      <span 
class="cmr-10x-x-109">be used to store results (this allows to avoid using </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sedna_malloc</span></span></span> <span 
class="cmr-10x-x-109">function</span>
      <span 
class="cmr-10x-x-109">when result is a single atomic non-string value)</span></li></ul>
<!--l. 2503--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_init</span></span></span> <span 
class="cmr-10x-x-109">and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_deinit</span></span></span> <span 
class="cmr-10x-x-109">must have specific signatures:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func()</span></span></span> <span 
class="cmr-10x-x-109">(required) &#8211; computes external function results. This function has the</span>
      <span 
class="cmr-10x-x-109">following signature:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-103">
      SEDNA_SEQUENCE_ITEM&#x00A0;*func(SEDNA_EF_INIT&#x00A0;*init,
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;SEDNA_EF_ARGS&#x00A0;*args,
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;char&#x00A0;*&#x00A0;error_msg_buf);
</div>
      <!--l. 2512--><p class="nopar" >
           <ul class="itemize2">
           <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">init</span></span></span> <span 
class="cmr-10x-x-109">is a pointer to the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_EF_INIT</span></span></span> <span 
class="cmr-10x-x-109">structure which was passed to</span>
           <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_init</span></span></span> <span 
class="cmr-10x-x-109">function (if written);</span>
           </li>
           <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">args</span></span></span> <span 
class="cmr-10x-x-109">is a pointer to the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_EF_ARGS</span></span></span> <span 
class="cmr-10x-x-109">structure which contains all</span>
           <span 
class="cmr-10x-x-109">function arguments;</span>
           </li>
           <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">error_msg_buf</span></span></span> <span 
class="cmr-10x-x-109">is a pointer to the string buffer used for specifying</span>
           <span 
class="cmr-10x-x-109">error message if function invocation fails. Maximum message length is</span>
           <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR_MSG_BUF_SIZE</span></span></span> <span 
class="cmr-10x-x-109">bytes, including the null character </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">&#8217;\0&#8217;</span></span></span><span 
class="cmr-10x-x-109">.</span></li></ul>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_init()</span></span></span> <span 
class="cmr-10x-x-109">(optional) &#8211; the initialization function. It can be used to allocate</span>
      <span 
class="cmr-10x-x-109">any memory required by the main function. This function has the following</span>
      <span 
class="cmr-10x-x-109">signature:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-104">
      void&#x00A0;func_init(SEDNA_EF_INIT&#x00A0;*init,&#x00A0;char&#x00A0;*&#x00A0;error_msg_buf);
</div>
      <!--l. 2528--><p class="nopar" >
           <ul class="itemize2">
           <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">init</span></span></span> <span 
class="cmr-10x-x-109">is a pointer to the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_EF_INIT</span></span></span> <span 
class="cmr-10x-x-109">structure (the pointer to this</span>
           <span 
class="cmr-10x-x-109">structure will be passed then to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func</span></span></span> <span 
class="cmr-10x-x-109">and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_deinit</span></span></span> <span 
class="cmr-10x-x-109">functions);</span>
           </li>
           <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">error_msg_buf</span></span></span> <span 
class="cmr-10x-x-109">is a pointer to the string buffer used for specifying</span>
           <span 
class="cmr-10x-x-109">error message if function invocation fails. Maximum message length is</span>
           <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR_MSG_BUF_SIZE</span></span></span><span 
class="cmr-10x-x-109">, including the null character </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">&#8217;\0&#8217;</span></span></span><span 
class="cmr-10x-x-109">.</span></li></ul>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_deinit()</span></span></span> <span 
class="cmr-10x-x-109">(optional) &#8211; the deinitialization function. It should deallocate any</span>
      <span 
class="cmr-10x-x-109">memory allocated by the initialization function. This function has the following</span>
      <span 
class="cmr-10x-x-109">signature:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-105">
      void&#x00A0;func_init(SEDNA_EF_INIT&#x00A0;*init,&#x00A0;char&#x00A0;*&#x00A0;error_msg_buf);
</div>
      <!--l. 2543--><p class="nopar" >
           <ul class="itemize2">
           <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">init</span></span></span> <span 
class="cmr-10x-x-109">is a pointer to the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_EF_INIT</span></span></span> <span 
class="cmr-10x-x-109">structure which was passed to</span>
           <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_init</span></span></span> <span 
class="cmr-10x-x-109">function (if written);</span>
           </li>
           <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">error_msg_buf</span></span></span> <span 
class="cmr-10x-x-109">is a pointer to the string buffer used for specifying</span>
           <span 
class="cmr-10x-x-109">error message if function invocation fails. Maximum message length is</span>
           <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ERROR_MSG_BUF_SIZE</span></span></span><span 
class="cmr-10x-x-109">, including the null character </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">&#8217;\0&#8217;</span></span></span><span 
class="cmr-10x-x-109">.</span></li></ul>
      </li></ul>
<!--l. 2553--><p class="indent" >   <span 
class="cmr-10x-x-109">When </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_init</span></span></span> <span 
class="cmr-10x-x-109">or </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func_deinit</span></span></span> <span 
class="cmr-10x-x-109">is being executed </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">error_msg_buf</span></span></span> <span 
class="cmr-10x-x-109">contains</span>
<span 
class="cmr-10x-x-109">an empty string. If function succeedes, it should leave this value empty. In case of error</span>
<span 
class="cmr-10x-x-109">a non-empty string (error description) must be placed in </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">error_msg_buf</span></span></span> <span 
class="cmr-10x-x-109">(if you place</span>
<span 
class="cmr-10x-x-109">an empty string in </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">error_msg_buf</span></span></span> <span 
class="cmr-10x-x-109">executor assumes that function execution was</span>
<span 
class="cmr-10x-x-109">successful).</span>
<!--l. 2559--><p class="indent" >   <span 
class="cmr-10x-x-109">Each shared library must also export an null-terminated array with the names of the</span>
<span 
class="cmr-10x-x-109">XQuery functions defined by this library:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-106">
char&#x00A0;const&#x00A0;*ef_names[]&#x00A0;=&#x00A0;{"func",&#x00A0;NULL};
</div>
<!--l. 2564--><p class="nopar" >
<!--l. 2566--><p class="indent" >   <span 
class="cmr-10x-x-109">The file </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">sedna_ef.h</span></span></span> <span 
class="cmr-10x-x-109">defines several types for representing function arguments and</span>
<span 
class="cmr-10x-x-109">results:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ATOMIC_TYPE</span></span></span> <span 
class="cmr-10x-x-109">&#8211; represents an atomic type, defined as:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-107">
      typedef&#x00A0;enum&#x00A0;sedna_atomic_type&#x00A0;{
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;SEDNATYPE_integer,
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;SEDNATYPE_float,
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;SEDNATYPE_double,
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;SEDNATYPE_string
      &#x00A0;<br />}&#x00A0;SEDNA_ATOMIC_TYPE;
</div>
      <!--l. 2578--><p class="nopar" >
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_ATOMIC_VALUE</span></span></span> <span 
class="cmr-10x-x-109">&#8211; represents an atomic value, defined as:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-108">
      typedef&#x00A0;int&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;SEDNA_integer;
      &#x00A0;<br />typedef&#x00A0;float&#x00A0;&#x00A0;&#x00A0;SEDNA_float;
      &#x00A0;<br />typedef&#x00A0;double&#x00A0;&#x00A0;SEDNA_double;
      &#x00A0;<br />typedef&#x00A0;char&#x00A0;&#x00A0;&#x00A0;*SEDNA_string;
      &#x00A0;<br />typedef&#x00A0;struct&#x00A0;sedna_atomic_value&#x00A0;{
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;SEDNA_ATOMIC_TYPE&#x00A0;type;
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;union {
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;SEDNA_integer&#x00A0;&#x00A0;&#x00A0;val_integer;
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;SEDNA_float&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;val_float;
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;SEDNA_double&#x00A0;&#x00A0;&#x00A0;&#x00A0;val_double;
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;SEDNA_string&#x00A0;&#x00A0;&#x00A0;&#x00A0;val_string;
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;};
      &#x00A0;<br />}&#x00A0;SEDNA_ATOMIC_VALUE;
</div>
      <!--l. 2595--><p class="nopar" >
      <!--l. 2597--><p class="noindent" ><span 
class="cmr-10x-x-109">Memory for values that are pointers (i.e. </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_string</span></span></span><span 
class="cmr-10x-x-109">) MUST be allocated</span>
      <span 
class="cmr-10x-x-109">using the malloc function passed in the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_EF_INIT</span></span></span> <span 
class="cmr-10x-x-109">structure.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_SEQUENCE_ITEM</span></span></span> <span 
class="cmr-10x-x-109">&#8211; represents a node in a linked list of atomic values,</span>
      <span 
class="cmr-10x-x-109">defined as:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-109">
      typedef&#x00A0;struct&#x00A0;sedna_sequence_item&#x00A0;{
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;SEDNA_ATOMIC_VALUE data;
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;struct&#x00A0;sedna_sequence_item *next;
      &#x00A0;<br />}&#x00A0;SEDNA_SEQUENCE_ITEM;
</div>
      <!--l. 2607--><p class="nopar" >
      <!--l. 2609--><p class="noindent" ><span 
class="cmr-10x-x-109">Linked lists are used to represent sequences of atomic values. An empty sequence</span>
      <span 
class="cmr-10x-x-109">is presented by a </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">NULL</span></span></span> <span 
class="cmr-10x-x-109">pointer. If </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">func</span></span></span> <span 
class="cmr-10x-x-109">needs to return a sequence of values,</span>
      <span 
class="cmr-10x-x-109">memory for nodes MUST be allocated using the malloc function passed in</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_EF_INIT</span></span></span> <span 
class="cmr-10x-x-109">structure.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_EF_ARGS</span></span></span> <span 
class="cmr-10x-x-109">&#8211; represents an array of arguments passed to a function, defined</span>
      <span 
class="cmr-10x-x-109">as:</span>
                                                                          

                                                                          
      <div class="verbatim" id="verbatim-110">
      typedef&#x00A0;struct&#x00A0;sedna_ef_args&#x00A0;{
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;int&#x00A0;length;
      &#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;SEDNA_SEQUENCE_ITEM&#x00A0;**args;
      &#x00A0;<br />}&#x00A0;SEDNA_EF_ARGS;
</div>
      <!--l. 2621--><p class="nopar" ></li></ul>
   <h5 class="likesubsubsectionHead"><a 
 id="x1-420002.2.5"></a><span 
class="cmr-10x-x-109">Location of External Function Libraries</span></h5>
<!--l. 2626--><p class="noindent" ><span 
class="cmr-10x-x-109">Compiled libraries must be placed in the directory </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">lib</span></span></span> <span 
class="cmr-10x-x-109">that is (1) in the</span>
<span 
class="cmr-10x-x-109">same directory where the directory </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">data</span></span></span> <span 
class="cmr-10x-x-109">with database data is located</span>
<span 
class="cmr-10x-x-109">or (2) in the directory </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">&#x003C;db_name&#x003E;_files</span></span></span> <span 
class="cmr-10x-x-109">where database data are</span>
<span 
class="cmr-10x-x-109">stored</span><span class="footnote-mark"><a 
href="ProgGuide3.html#fn2x0"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-42001f2"></a> <span 
class="cmr-10x-x-109">.</span>
<span 
class="cmr-10x-x-109">Libraries that are database-independent should be placed in (1). Libraries that are</span>
<span 
class="cmr-10x-x-109">database-specific should be placed in (2). Overloaded functions are not allowed. If</span>
<span 
class="cmr-10x-x-109">two libraries located in (1) and (2) contain functions with the same name, a</span>
<span 
class="cmr-10x-x-109">function from the library in (2) is called. If libraries in the same directory (1</span>
<span 
class="cmr-10x-x-109">or 2) contain functions with the same name, it is not specified which one is</span>
<span 
class="cmr-10x-x-109">called.</span>
<!--l. 2637--><p class="indent" >   <span 
class="cmr-10x-x-109">There is a sample external function code available in the folder:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-111">
&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;[win:]&#x00A0;INSTALL_DIR\examples\api\external-functions\c\
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;[nix:]&#x00A0;INSTALL_DIR/examples/api/external-functions/c/
</div>
<!--l. 2641--><p class="nopar" > <span 
class="cmr-10x-x-109">where </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">INSTALL_DIR</span></span></span> <span 
class="cmr-10x-x-109">refers to the directory where Sedna is installed.</span>
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.2.6   </span></span> <a 
 id="x1-430002.2.6"></a><span 
class="cmr-10x-x-109">Runtime Properties</span></h5>
<!--l. 2650--><p class="noindent" ><span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">se:get-property</span></span></span> <span 
class="cmr-10x-x-109">function provides a method for applications to determine in</span>
<span 
class="cmr-10x-x-109">runtime the current values of system parameters, configurable limits, environment</span>
<span 
class="cmr-10x-x-109">information. The name argument specifies the system variable to be queried.</span>
<span 
class="cmr-10x-x-109">The function is defined within the predefined Sedna namespace (</span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">se</span></span></span> <span 
class="cmr-10x-x-109">prefix) as</span>
<span 
class="cmr-10x-x-109">follows:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-112">
se:get-property($name&#x00A0;as&#x00A0;xs:string)&#x00A0;as&#x00A0;item()
</div>
<!--l. 2658--><p class="nopar" >
<!--l. 2660--><p class="indent" >   <span 
class="cmr-10x-x-109">The available </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">names</span></span></span> <span 
class="cmr-10x-x-109">are as follows:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$user</span></span></span> <span 
class="cmr-10x-x-109">- retrieves string which contains current user name</span></li></ul>
<!--l. 2670--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.3   </span></span> <a 
 id="x1-440002.3"></a><span 
class="cmr-10x-x-109">Update Language</span></h4>
<!--l. 2673--><p class="noindent" ><span 
class="cmr-10x-x-109">The update language is based on the XQuery update proposal by Patrick Lehti </span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:query-update"><span 
class="cmr-10x-x-109">6</span></a><span 
class="cmr-10x-x-109">]</span></span> <span 
class="cmr-10x-x-109">with</span>
<span 
class="cmr-10x-x-109">the number of improvements.</span>
   <div class="newtheorem">
<!--l. 2676--><p class="noindent" ><span class="head">
<span 
class="cmbx-10x-x-109">Note</span><span 
class="cmbx-10x-x-109">&#x00A0;2</span> </span><span 
class="cmti-10x-x-109">The result of each update statement, shouldn&#8217;t break the well-formedness</span>
<span 
class="cmti-10x-x-109">and validness of XML entities, stored in the database. Otherwise, an error is raised.</span>
   </div>
<!--l. 2682--><p class="indent" >   <span 
class="cmr-10x-x-109">Sedna provides several kinds of update statements:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">INSERT</span></span></span> <span 
class="cmr-10x-x-109">statement inserts zero or more nodes into a designated position with</span>
      <span 
class="cmr-10x-x-109">respect to a target nodes;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DELETE</span></span></span> <span 
class="cmr-10x-x-109">statement  removes  target  nodes  from  the  database  with  theirs</span>
      <span 
class="cmr-10x-x-109">descendants;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DELETE_UNDEEP</span></span></span>  <span 
class="cmr-10x-x-109">statement   removes   target   nodes   from   the   database</span>
      <span 
class="cmr-10x-x-109">preserving theirs content;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">REPLACE</span></span></span> <span 
class="cmr-10x-x-109">statement replaces target nodes with a new sequence of zero or</span>
      <span 
class="cmr-10x-x-109">more nodes;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">RENAME</span></span></span> <span 
class="cmr-10x-x-109">statement changes the name of the target nodes.</span></li></ul>
<!--l. 2694--><p class="noindent" ><span 
class="cmr-10x-x-109">The syntax and semantics of these expressions are described in the following sections.</span>
                                                                          

                                                                          
<!--l. 2698--><p class="noindent" >
   <div class="likesubsubsectionTOCS">
   </div>
   <h5 class="likesubsubsectionHead"><a 
 id="x1-450002.3"></a><span 
class="cmr-10x-x-109">Insert Statement</span></h5>
<!--l. 2699--><p class="noindent" ><span 
class="cmr-10x-x-109">The insert statement inserts result of the given expression at the position identified by</span>
<span 
class="cmr-10x-x-109">the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">into</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">preceding</span></span></span> <span 
class="cmr-10x-x-109">or </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">following</span></span></span> <span 
class="cmr-10x-x-109">clauses:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-113">
UPDATE
&#x00A0;<br />insert&#x00A0;SourceExpr&#x00A0;(into|preceding|following)&#x00A0;TargetExpr
</div>
<!--l. 2705--><p class="nopar" > <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SourceExpr</span></span></span> <span 
class="cmr-10x-x-109">identifies the ordered sequence of the nodes to be inserted. The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">into</span></span></span><span 
class="cmr-10x-x-109">,</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">preceding</span></span></span> <span 
class="cmr-10x-x-109">or </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">following</span></span></span> <span 
class="cmr-10x-x-109">clause identifies the position. For each node in the result</span>
<span 
class="cmr-10x-x-109">sequence of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">TargetExpr</span></span></span><span 
class="cmr-10x-x-109">, the result sequence of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SourceExpr</span></span></span> <span 
class="cmr-10x-x-109">is inserted to the position</span>
<span 
class="cmr-10x-x-109">identified by the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">into</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">preceding</span></span></span> <span 
class="cmr-10x-x-109">or </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">following</span></span></span> <span 
class="cmr-10x-x-109">clauses. If the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">into</span></span></span> <span 
class="cmr-10x-x-109">clause is specified,</span>
<span 
class="cmr-10x-x-109">the sequence is appended to the random position of the child sequence for each node in</span>
<span 
class="cmr-10x-x-109">the result of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">TargetExpr</span></span></span><span 
class="cmr-10x-x-109">. If the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">preceding</span></span></span> <span 
class="cmr-10x-x-109">clause is specified, the sequence is</span>
<span 
class="cmr-10x-x-109">appended before each node in the result of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">TargetExpr</span></span></span><span 
class="cmr-10x-x-109">. If the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">following</span></span></span>
<span 
class="cmr-10x-x-109">clause is specified, the sequence is appended after each node in the result of</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">TargetExpr</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 2717--><p class="indent" >   <span 
class="cmr-10x-x-109">Error is raised if one of the following conditions is met:</span>
      <ul class="itemize1">
      <li class="itemize"><span 
class="cmr-10x-x-109">There are non-element nodes in the result of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">TargetExpr</span></span></span> <span 
class="cmr-10x-x-109">expression</span>
      <span 
class="cmr-10x-x-109">evaluation in case of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">into</span></span></span> <span 
class="cmr-10x-x-109">clause;</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">There  are  temporary  nodes  in  the  result  of  the  </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">TargetExpr</span></span></span> <span 
class="cmr-10x-x-109">expression</span>
      <span 
class="cmr-10x-x-109">evaluation (a node is considered </span><span 
class="cmti-10x-x-109">temporary</span><span 
class="cmr-10x-x-109">, if it is created as the result of</span>
      <span 
class="cmr-10x-x-109">the XQuery constructor evaluation).</span></li></ul>
<!--l. 2726--><p class="indent" >   <span 
class="cmr-10x-x-109">For example, the following update statement inserts new </span><span 
class="cmti-10x-x-109">warning </span><span 
class="cmr-10x-x-109">element into all</span>
<span 
class="cmti-10x-x-109">blood</span><span 
class="cmti-10x-x-109">_pressure </span><span 
class="cmr-10x-x-109">elements which have </span><span 
class="cmti-10x-x-109">systolic </span><span 
class="cmr-10x-x-109">value greater than 180:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-114">
UPDATE
&#x00A0;<br />insert&#x00A0;&#x003C;warning&#x003E;High&#x00A0;Blood&#x00A0;Pressure!&#x003C;/warning&#x003E;
&#x00A0;<br />preceding&#x00A0;doc("hospital")//blood_pressure[systolic&#x003E;180]
</div>
<!--l. 2734--><p class="nopar" >
<!--l. 2737--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-460002.3"></a><span 
class="cmr-10x-x-109">Delete Statement</span></h5>
<!--l. 2738--><p class="noindent" ><span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DELETE</span></span></span> <span 
class="cmr-10x-x-109">statement removes persistent nodes from the database. It contains a</span>
<span 
class="cmr-10x-x-109">subexpression, that returns the nodes to be deleted.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-115">
UPDATE
&#x00A0;<br />delete&#x00A0;Expr
</div>
<!--l. 2744--><p class="nopar" > <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Expr</span></span></span> <span 
class="cmr-10x-x-109">identifies the nodes to be removed from the database. Note, that nodes are</span>
<span 
class="cmr-10x-x-109">removed from the database with all their descendants.</span>
<!--l. 2748--><p class="indent" >   <span 
class="cmr-10x-x-109">Error is raised if one of the following conditions is met:</span>
      <ul class="itemize1">
      <li class="itemize"><span 
class="cmr-10x-x-109">There are atomic values in the result of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Expr</span></span></span> <span 
class="cmr-10x-x-109">expressions;</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">There are temporary nodes in the result of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Expr</span></span></span> <span 
class="cmr-10x-x-109">expression evaluation</span>
      <span 
class="cmr-10x-x-109">(a node is considered </span><span 
class="cmti-10x-x-109">temporary</span><span 
class="cmr-10x-x-109">, if it is created as the result of the XQuery</span>
      <span 
class="cmr-10x-x-109">constructor evaluation).</span></li></ul>
<!--l. 2756--><p class="indent" >   <span 
class="cmr-10x-x-109">The following update statement deletes all </span><span 
class="cmti-10x-x-109">blood</span><span 
class="cmti-10x-x-109">_pressure </span><span 
class="cmr-10x-x-109">nodes which contain</span>
<span 
class="cmti-10x-x-109">systolic </span><span 
class="cmr-10x-x-109">value higher than 180:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-116">
UPDATE
&#x00A0;<br />delete&#x00A0;doc("hospital")//blood_pressure[systolic&#x003E;180]
</div>
<!--l. 2762--><p class="nopar" >
<!--l. 2765--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-470002.3"></a><span 
class="cmr-10x-x-109">Delete Undeep Statement</span></h5>
<!--l. 2766--><p class="noindent" ><span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DELETE_UNDEEP</span></span></span> <span 
class="cmr-10x-x-109">statement removes nodes identified by </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Expr</span></span></span><span 
class="cmr-10x-x-109">, but in contrast to the</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DELETE</span></span></span> <span 
class="cmr-10x-x-109">statement it leaves the descendants of the nodes in the database.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-117">
UPDATE
&#x00A0;<br />delete_undeep&#x00A0;Expr
</div>
<!--l. 2773--><p class="nopar" > <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Expr</span></span></span> <span 
class="cmr-10x-x-109">identifies the nodes to be removed from the database.</span>
<!--l. 2776--><p class="indent" >   <span 
class="cmr-10x-x-109">Error is raised if one of the following conditions is met:</span>
      <ul class="itemize1">
      <li class="itemize"><span 
class="cmr-10x-x-109">There are atomic values in the result of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Expr</span></span></span> <span 
class="cmr-10x-x-109">expressions;</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">There are temporary nodes in the result of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Expr</span></span></span> <span 
class="cmr-10x-x-109">expression evaluation</span>
      <span 
class="cmr-10x-x-109">(a node is considered </span><span 
class="cmti-10x-x-109">temporary</span><span 
class="cmr-10x-x-109">, if it is created as the result of the XQuery</span>
      <span 
class="cmr-10x-x-109">constructor evaluation).</span></li></ul>
<!--l. 2784--><p class="indent" >   <span 
class="cmr-10x-x-109">Consider the following example. The document named </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">a.xml</span></span></span> <span 
class="cmr-10x-x-109">before update:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-118">
&#x003C;A&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;B&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;C/&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;D/&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;/B&#x003E;
&#x00A0;<br />&#x003C;/A&#x003E;
</div>
<!--l. 2792--><p class="nopar" > <span 
class="cmr-10x-x-109">The following delete undeep statement removes </span><span 
class="cmti-10x-x-109">B </span><span 
class="cmr-10x-x-109">nodes and makes </span><span 
class="cmti-10x-x-109">C </span><span 
class="cmr-10x-x-109">and </span><span 
class="cmti-10x-x-109">D </span><span 
class="cmr-10x-x-109">nodes</span>
<span 
class="cmr-10x-x-109">children of the </span><span 
class="cmti-10x-x-109">A </span><span 
class="cmr-10x-x-109">element:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-119">
UPDATE
&#x00A0;<br />delete_undeep&#x00A0;doc("a.xml")//B
</div>
<!--l. 2798--><p class="nopar" > <span 
class="cmr-10x-x-109">This is how the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">a.xml</span></span></span> <span 
class="cmr-10x-x-109">document will look after the update:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-120">
&#x003C;A&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;C/&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;D/&#x003E;
&#x00A0;<br />&#x003C;/A&#x003E;
</div>
<!--l. 2805--><p class="nopar" >
<!--l. 2808--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-480002.3"></a><span 
class="cmr-10x-x-109">Replace Statement</span></h5>
<!--l. 2809--><p class="noindent" ><span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">REPLACE</span></span></span> <span 
class="cmr-10x-x-109">statement is used to replace nodes in an XML document in the following</span>
<span 
class="cmr-10x-x-109">manner:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-121">
UPDATE
&#x00A0;<br />replace&#x00A0;$var&#x00A0;[as&#x00A0;type]&#x00A0;in&#x00A0;SourceExpr
&#x00A0;<br />with&#x00A0;TargetExpr($var)
</div>
<!--l. 2816--><p class="nopar" > <span 
class="cmr-10x-x-109">Replace statement iterates over all the nodes returned by the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SourceExpr</span></span></span><span 
class="cmr-10x-x-109">, binding the</span>
<span 
class="cmr-10x-x-109">variable </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$var</span></span></span> <span 
class="cmr-10x-x-109">to each node. For each binding the result of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">TargetExpr($var)</span></span></span>
<span 
class="cmr-10x-x-109">expression is evaluated. Each node returned by the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SourceExpr</span></span></span> <span 
class="cmr-10x-x-109">is replaced with the</span>
<span 
class="cmr-10x-x-109">returned sequence of nodes. Note that </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">TargetExpr</span></span></span> <span 
class="cmr-10x-x-109">is executed over the original</span>
<span 
class="cmr-10x-x-109">document without taking into account intermediate updates performed during execution</span>
<span 
class="cmr-10x-x-109">of this statement.</span>
<!--l. 2824--><p class="indent" >   <span 
class="cmr-10x-x-109">Error is raised if one of the following conditions is met:</span>
      <ul class="itemize1">
      <li class="itemize"><span 
class="cmr-10x-x-109">There are atomic values in the result of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SourceExpr</span></span></span> <span 
class="cmr-10x-x-109">or </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">TargetExpr</span></span></span>
      <span 
class="cmr-10x-x-109">expressions;</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">There  are  temporary  nodes  in  the  result  of  the  </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SourceExpr</span></span></span> <span 
class="cmr-10x-x-109">expression</span>
      <span 
class="cmr-10x-x-109">evaluation (a node is considered </span><span 
class="cmti-10x-x-109">temporary</span><span 
class="cmr-10x-x-109">, if it is created as the result of</span>
      <span 
class="cmr-10x-x-109">the XQuery constructor evaluation).</span></li></ul>
<!--l. 2833--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$var</span></span></span> <span 
class="cmr-10x-x-109">variable bound in </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">replace</span></span></span> <span 
class="cmr-10x-x-109">clause may have an optional type declaration.</span>
<span 
class="cmr-10x-x-109">If the type of a value bound to the variable does not match the declared type, an error</span>
<span 
class="cmr-10x-x-109">is raised.</span>
<!--l. 2837--><p class="indent" >   <span 
class="cmr-10x-x-109">In the following example the salary of persons named &#8221;John&#8221; is doubled.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-122">
UPDATE
&#x00A0;<br />replace&#x00A0;$p&#x00A0;in&#x00A0;doc("foo.xml")/db/person[name="John"]
&#x00A0;<br />with
&#x00A0;<br />&#x003C;person&#x003E;
&#x00A0;<br />{($p/@*,
&#x00A0;<br />&#x00A0;&#x00A0;$p/node()[not(self::salary)],
&#x00A0;<br />&#x00A0;&#x00A0;for&#x00A0;$s&#x00A0;in&#x00A0;$p/salary
&#x00A0;<br />&#x00A0;&#x00A0;return&#x00A0;&#x003C;salary&#x003E;{$s*2}&#x003C;/salary&#x003E;)}
&#x00A0;<br />&#x003C;/person&#x003E;
</div>
<!--l. 2849--><p class="nopar" >
<!--l. 2852--><p class="noindent" >
   <h5 class="likesubsubsectionHead"><a 
 id="x1-490002.3"></a><span 
class="cmr-10x-x-109">Rename Statement</span></h5>
<!--l. 2853--><p class="noindent" ><span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">RENAME</span></span></span> <span 
class="cmr-10x-x-109">statement is used to change the qualified name of an element or</span>
<span 
class="cmr-10x-x-109">attribute:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-123">
UPDATE
&#x00A0;<br />rename&#x00A0;TargetExpr&#x00A0;on&#x00A0;QName
</div>
<!--l. 2859--><p class="nopar" > <span 
class="cmr-10x-x-109">Rename statement changes name property of the all nodes returned by the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">TargetExpr</span></span></span>
<span 
class="cmr-10x-x-109">expression with a new QName.</span>
<!--l. 2863--><p class="indent" >   <span 
class="cmr-10x-x-109">Error is raised if one of the following conditions is met:</span>
      <ul class="itemize1">
      <li class="itemize"><span 
class="cmr-10x-x-109">There are items which are not element or attribute nodes in the result of</span>
      <span 
class="cmr-10x-x-109">the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">TargetExpr</span></span></span> <span 
class="cmr-10x-x-109">expression evaluation;</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">There  are  temporary  nodes  in  the  result  of  the  </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">TargetExpr</span></span></span> <span 
class="cmr-10x-x-109">expression</span>
      <span 
class="cmr-10x-x-109">evaluation (a node is considered </span><span 
class="cmti-10x-x-109">temporary</span><span 
class="cmr-10x-x-109">, if it is created as the result of</span>
      <span 
class="cmr-10x-x-109">the XQuery constructor evaluation).</span></li></ul>
<!--l. 2872--><p class="indent" >   <span 
class="cmr-10x-x-109">The following expression changes the name of all the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">job</span></span></span> <span 
class="cmr-10x-x-109">elements without changing</span>
<span 
class="cmr-10x-x-109">their contents:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-124">
UPDATE
&#x00A0;<br />rename&#x00A0;doc("foo.xml")//job&#x00A0;on&#x00A0;profession
</div>
<!--l. 2877--><p class="nopar" >
<!--l. 2883--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.4   </span></span> <a 
 id="x1-500002.4"></a><span 
class="cmr-10x-x-109">Bulk Load</span></h4>
<!--l. 2886--><p class="noindent" ><span 
class="cmr-10x-x-109">To bulk load a stand alone document use the following statements:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-125">
LOAD&#x00A0;"path_to_file"&#x00A0;"document_name"
</div>
<!--l. 2889--><p class="nopar" > <span 
class="cmr-10x-x-109">The first parameter is a path to the file which contains a document to be loaded. The</span>
<span 
class="cmr-10x-x-109">second parameter is the name for this document in the database.</span>
<!--l. 2893--><p class="indent" >   <span 
class="cmr-10x-x-109">For example,</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-126">
LOAD&#x00A0;"/opt/test.xml"&#x00A0;"test"
</div>
<!--l. 2896--><p class="nopar" > <span 
class="cmr-10x-x-109">loads file </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">/opt/test.xml</span></span></span> <span 
class="cmr-10x-x-109">into database as a stand-alone document with name</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">test</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 2900--><p class="indent" >   <span 
class="cmr-10x-x-109">To load document into a collection, use the following statement:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-127">
LOAD&#x00A0;"path_to_file"&#x00A0;"document_name"&#x00A0;"collection_name"
</div>
<!--l. 2903--><p class="nopar" > <span 
class="cmr-10x-x-109">The first parameter is a path to the file which contains a document to be loaded. The</span>
<span 
class="cmr-10x-x-109">second parameter is the name for this document in the database. The third parameter is</span>
<span 
class="cmr-10x-x-109">the collection name to load the document into.</span>
<!--l. 2908--><p class="indent" >   <span 
class="cmr-10x-x-109">For example,</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-128">
LOAD&#x00A0;"/opt/mail-01.xml"&#x00A0;"mail-01"&#x00A0;"mails"
</div>
<!--l. 2911--><p class="nopar" > <span 
class="cmr-10x-x-109">loads file </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">/opt/mail-01.xml</span></span></span> <span 
class="cmr-10x-x-109">into collection </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">mails</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 2914--><p class="indent" >   <span 
class="cmr-10x-x-109">For performing bulk load not from the source file but from an input stream, use the</span>
<span 
class="cmr-10x-x-109">following statements (first for loading stand alone document, second - for loading into a</span>
<span 
class="cmr-10x-x-109">collection):</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-129">
LOAD&#x00A0;STDIN&#x00A0;"document_name"
</div>
<!--l. 2919--><p class="nopar" >
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-130">
LOAD&#x00A0;STDIN&#x00A0;"document_name"&#x00A0;"collection_name"
</div>
<!--l. 2922--><p class="nopar" >
<!--l. 2924--><p class="indent" >   <span 
class="cmr-10x-x-109">Compared to the above bulk load statements, here the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"file_name"</span></span></span> <span 
class="cmr-10x-x-109">is replaced by</span>
<span 
class="cmr-10x-x-109">the keyword </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">STDIN</span></span></span> <span 
class="cmr-10x-x-109">to denote that the file to be loaded is taken from the input stream.</span>
<span 
class="cmr-10x-x-109">Characters in the input stream must form a well-formed XML document, which</span>
<span 
class="cmr-10x-x-109">is loaded into the database and named as specified by </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"document_name"</span></span></span><span 
class="cmr-10x-x-109">. If</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">collection_name</span></span></span> <span 
class="cmr-10x-x-109">is set, the document is loaded into the specified collection of the</span>
<span 
class="cmr-10x-x-109">database.</span>
<!--l. 2931--><p class="indent" >   <span 
class="cmr-10x-x-109">By default, the standard input stream is used. You can redirect a different input</span>
<span 
class="cmr-10x-x-109">stream to be used as an input for bulk load. For example, an XML document</span>
<span 
class="cmr-10x-x-109">produced by some program as its output can be loaded to a Sedna database in a</span>
<span 
class="cmr-10x-x-109">stream-wise fashion. To redirect the input when working from a command line,</span>
<span 
class="cmr-10x-x-109">you can use the functionality provided by your operation system. Java and</span>
<span 
class="cmr-10x-x-109">Scheme APIs provide additional wrappers for bulk load from stream, such that</span>
<span 
class="cmr-10x-x-109">the input stream can be specified by an additional argument of a function</span>
<span 
class="cmr-10x-x-109">call.</span>
<!--l. 2939--><p class="indent" >   <span 
class="cmr-10x-x-109">By default, Sedna removes boundary whitespace according to the boundary-space</span>
<span 
class="cmr-10x-x-109">policy defined in </span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:query-language"><span 
class="cmr-10x-x-109">3</span></a><span 
class="cmr-10x-x-109">]</span></span><span 
class="cmr-10x-x-109">. To control boundary whitespace processing, use</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">boundary-space</span><span 
class="cmtt-10x-x-109">&#x00A0;declaration</span></span></span> <span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:query-language"><span 
class="cmr-10x-x-109">3</span></a><span 
class="cmr-10x-x-109">]</span></span> <span 
class="cmr-10x-x-109">in the prolog of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">LOAD</span></span></span> <span 
class="cmr-10x-x-109">statement. The following</span>
<span 
class="cmr-10x-x-109">example illustrates a boundary-space declaration that instructs Sedna to preserve</span>
<span 
class="cmr-10x-x-109">whitespace while loading </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">auction.xml</span></span></span> <span 
class="cmr-10x-x-109">document:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-131">
declare&#x00A0;boundary-space&#x00A0;preserve;
&#x00A0;<br />LOAD&#x00A0;"auction.xml"&#x00A0;"auction"
</div>
<!--l. 2949--><p class="nopar" >
<!--l. 2951--><p class="indent" >   <span 
class="cmr-10x-x-109">Notice, that heavy bulk-loads might be greatly optimized by setting</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_LOG_AMOUNT</span></span></span> <span 
class="cmr-10x-x-109">connection attribute to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SEDNA_LOG_LESS</span></span></span> <span 
class="cmr-10x-x-109">(see Section </span><a 
href="#x1-130001.2.3"><span 
class="cmr-10x-x-109">1.2.3</span><!--tex4ht:ref: session-option-capi --></a> <span 
class="cmr-10x-x-109">for more</span>
<span 
class="cmr-10x-x-109">information).</span>
<!--l. 2955--><p class="noindent" >
   <div class="subsubsectionTOCS">
   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.4.1 </span><a 
href="#x1-510002.4.1"><span 
class="cmr-10x-x-109">CDATA section preserving</span></a></span>
   </div>
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.4.1   </span></span> <a 
 id="x1-510002.4.1"></a><span 
class="cmr-10x-x-109">CDATA section preserving</span></h5>
<!--l. 2957--><p class="noindent" ><span 
class="cmr-10x-x-109">It is possible to save the formatting of continuous CDATA sections with</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">cdata-section-preserve</span></span></span> <span 
class="cmr-10x-x-109">option.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-132">
declare&#x00A0;option&#x00A0;se:bulk-load&#x00A0;"cdata-section-preserve=yes";
&#x00A0;<br />LOAD&#x00A0;"auction.xml"&#x00A0;"auction"
</div>
<!--l. 2963--><p class="nopar" >
<!--l. 2965--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">cdata-section-preserve=yes</span></span></span> <span 
class="cmr-10x-x-109">option makes text nodes within CDATA</span>
<span 
class="cmr-10x-x-109">sections to be serialized within CDATA sections. CDATA section formatting is saved</span>
<span 
class="cmr-10x-x-109">only for the whole text node and this property of text node is inherited when text node</span>
<span 
class="cmr-10x-x-109">is appended. E.g. in the following document fragment CDATA section will be serialized</span>
<span 
class="cmr-10x-x-109">as it appears in document:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-133">
&#x003C;a&#x003E;&#x003C;![CDATA[&#x003C;example&#x00A0;data&#x003E;]]&#x003E;&#x003C;/a&#x003E;
</div>
<!--l. 2973--><p class="nopar" >
<!--l. 2975--><p class="indent" >   <span 
class="cmr-10x-x-109">But the next fragment will not be saved with mixed formatting.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-134">
&#x003C;a&#x003E;&#x003C;![CDATA[&#x003C;example]]&#x003E;&#x00A0;data&#x003C;![CDATA[&#x003E;]]&#x003E;&#x003C;/a&#x003E;
</div>
<!--l. 2979--><p class="nopar" >
<!--l. 2981--><p class="indent" >   <span 
class="cmr-10x-x-109">Instead, it will be serialized in the same way as prevoius one, i.e. the whole text will</span>
<span 
class="cmr-10x-x-109">be in CDATA section.</span>
<!--l. 2987--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.5   </span></span> <a 
 id="x1-520002.5"></a><span 
class="cmr-10x-x-109">Data Definition Language</span></h4>
<!--l. 2989--><p class="noindent" ><span 
class="cmr-10x-x-109">This section describes Sedna Data Definition Language (DDL) that is used to create</span>
<span 
class="cmr-10x-x-109">and manage the database structures that will hold data.</span>
<!--l. 2992--><p class="indent" >   <span 
class="cmr-10x-x-109">Most of parameters of Sedna DDL are computable and specified as XQuery</span>
<span 
class="cmr-10x-x-109">expressions. The expected type of all the parameters is </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs:string</span></span></span><span 
class="cmr-10x-x-109">. All parameters are</span>
<span 
class="cmr-10x-x-109">evaluated and atomized. If the atomized value is not of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs:string</span></span></span><span 
class="cmr-10x-x-109">, a dynamic error is</span>
<span 
class="cmr-10x-x-109">raised.</span>
<!--l. 3001--><p class="noindent" >
   <div class="subsubsectionTOCS">
   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.5.1 </span><a 
href="#x1-530002.5.1"><span 
class="cmr-10x-x-109">Managing Standalone Documents</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.5.2 </span><a 
href="#x1-540002.5.2"><span 
class="cmr-10x-x-109">Managing Collections</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.5.3 </span><a 
href="#x1-550002.5.3"><span 
class="cmr-10x-x-109">Managing Value Indices</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.5.4 </span><a 
href="#x1-560002.5.4"><span 
class="cmr-10x-x-109">Managing Full-Text Indices</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.5.5 </span><a 
href="#x1-570002.5.5"><span 
class="cmr-10x-x-109">Managing Modules</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.5.6 </span><a 
href="#x1-580002.5.6"><span 
class="cmr-10x-x-109">Retrieving Metadata</span></a></span>
   </div>
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.5.1   </span></span> <a 
 id="x1-530002.5.1"></a><span 
class="cmr-10x-x-109">Managing Standalone Documents</span></h5>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-135">
CREATE&#x00A0;DOCUMENT&#x00A0;doc-name-expr
</div>
<!--l. 3004--><p class="nopar" >
<!--l. 3006--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">CREATE</span></span></span> <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DOCUMENT</span></span></span> <span 
class="cmr-10x-x-109">statement creates a new standalone document with the name</span>
<span 
class="cmr-10x-x-109">that is the result of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">doc-name-expr</span></span></span><span 
class="cmr-10x-x-109">.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-136">
DROP&#x00A0;DOCUMENT&#x00A0;doc-name-expr
</div>
<!--l. 3011--><p class="nopar" >
<!--l. 3013--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DROP</span></span></span> <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DOCUMENT</span></span></span> <span 
class="cmr-10x-x-109">statement drops the standalone document with the name that is</span>
<span 
class="cmr-10x-x-109">the result of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">doc-name-expr</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 3016--><p class="indent" >   <span 
class="cmr-10x-x-109">For example, next statement:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-137">
}
&#x00A0;<br />CREATE&#x00A0;DOCUMENT&#x00A0;"report"
</div>
<!--l. 3019--><p class="nopar" > <span 
class="cmr-10x-x-109">creates a documentnamed &#8221;report&#8221;, while:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-138">
DROP&#x00A0;DOCUMENT&#x00A0;"report"
</div>
<!--l. 3023--><p class="nopar" >
<!--l. 3025--><p class="indent" >   <span 
class="cmr-10x-x-109">There is a system document </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$documents</span></span></span> <span 
class="cmr-10x-x-109">which lists all available documents and</span>
<span 
class="cmr-10x-x-109">collections. For details on retrieving metadata see </span><a 
href="#x1-580002.5.6"><span 
class="cmr-10x-x-109">2.5.6</span><!--tex4ht:ref: managing-metadata --></a> <span 
class="cmr-10x-x-109">section.</span>
<!--l. 3033--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.5.2   </span></span> <a 
 id="x1-540002.5.2"></a><span 
class="cmr-10x-x-109">Managing Collections</span></h5>
<!--l. 3035--><p class="noindent" ><span 
class="cmr-10x-x-109">Sedna provides a mechanism of organizing multiple documents into a collection.</span>
<span 
class="cmr-10x-x-109">Collection provides a uniform way of writing XQuery and XML update statements</span>
<span 
class="cmr-10x-x-109">addressed to multiple documents at once. Collections are preferable for situations when</span>
<span 
class="cmr-10x-x-109">a group of documents is to be queried/updated by means of not referring to</span>
<span 
class="cmr-10x-x-109">their individual document names, but according to some conditions over their</span>
<span 
class="cmr-10x-x-109">content.</span>
<!--l. 3042--><p class="indent" >   <span 
class="cmr-10x-x-109">In a Sedna database, a document can be either a standalone one (when it</span>
<span 
class="cmr-10x-x-109">doesn&#8217;t belong to any collection) or belonging to some collection. Compared to</span>
<span 
class="cmr-10x-x-109">standalone documents, all documents within a given collection have a common</span>
<span 
class="cmr-10x-x-109">descriptive schema. The common descriptive schema (which can be considered as a</span>
<span 
class="cmr-10x-x-109">union of individual descriptive schemas for all documents that belong to a</span>
<span 
class="cmr-10x-x-109">collection) allows addressing XQuery and XML update queries to all members of a</span>
<span 
class="cmr-10x-x-109">collection.</span>
<!--l. 3050--><p class="indent" >   <span 
class="cmr-10x-x-109">Below is the specification of syntax and semantic of statements that manage</span>
<span 
class="cmr-10x-x-109">collections.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-139">
CREATE&#x00A0;COLLECTION&#x00A0;coll-name-expr
</div>
<!--l. 3055--><p class="nopar" >
<!--l. 3057--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">CREATE</span></span></span> <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">COLLECTION</span></span></span> <span 
class="cmr-10x-x-109">statement creates a new collection with the name that is</span>
<span 
class="cmr-10x-x-109">the result of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">coll-name-expr</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 3060--><p class="indent" >   <span 
class="cmr-10x-x-109">For example, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">CREATE</span><span 
class="cmtt-10x-x-109">&#x00A0;COLLECTION</span></span></span> <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"mails"</span></span></span> <span 
class="cmr-10x-x-109">creates a collection named</span>
<span 
class="cmr-10x-x-109">&#8221;mails&#8221;.</span>
<!--l. 3063--><p class="indent" >   <span 
class="cmr-10x-x-109">XML documents can be loaded into the collection, as previously described in section</span>
<a 
href="#x1-500002.4"><span 
class="cmr-10x-x-109">2.4</span><!--tex4ht:ref: bulk-load --></a><span 
class="cmr-10x-x-109">.</span>
<!--l. 3066--><p class="indent" >   <span 
class="cmr-10x-x-109">To access a single document from collection in an XQuery or XML update</span>
<span 
class="cmr-10x-x-109">query, the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">document</span></span></span> <span 
class="cmr-10x-x-109">function accepts a collection name as its second optional</span>
<span 
class="cmr-10x-x-109">argument:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-140">
doc($doc&#x00A0;as&#x00A0;xs:string,
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;$col&#x00A0;as&#x00A0;xs:string)&#x00A0;as&#x00A0;document-node()
</div>
<!--l. 3072--><p class="nopar" > <span 
class="cmr-10x-x-109">The function returns the document with the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$doc</span></span></span> <span 
class="cmr-10x-x-109">name that belongs to the collection</span>
<span 
class="cmr-10x-x-109">named </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$col</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 3076--><p class="indent" >   <span 
class="cmr-10x-x-109">For example, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">doc(&#8217;mail-01&#8217;,</span><span 
class="cmtt-10x-x-109">&#x00A0;&#8217;mails&#8217;)</span></span></span> <span 
class="cmr-10x-x-109">query returns documents with name</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">mail-01</span></span></span> <span 
class="cmr-10x-x-109">from collection </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">mails</span></span></span><span 
class="cmr-10x-x-109">.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-141">
fn:collection($col&#x00A0;as&#x00A0;xs:string?)&#x00A0;as&#x00A0;document-node()*
</div>
<!--l. 3081--><p class="nopar" > <span 
class="cmr-10x-x-109">The function </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">collection</span></span></span> <span 
class="cmr-10x-x-109">can be called from any place within an XQuery or XML</span>
<span 
class="cmr-10x-x-109">update query where the function call is allowed. The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">collection</span></span></span> <span 
class="cmr-10x-x-109">function returns the</span>
<span 
class="cmr-10x-x-109">sequence of all documents that belong to the collection named </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$col</span></span></span><span 
class="cmr-10x-x-109">. The relative order</span>
<span 
class="cmr-10x-x-109">of documents in a sequence returned by </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">collection</span></span></span> <span 
class="cmr-10x-x-109">function is currently undefined in</span>
<span 
class="cmr-10x-x-109">Sedna.</span>
<!--l. 3088--><p class="indent" >   <span 
class="cmr-10x-x-109">Conventional XQuery predicates can be used for filtering the sequence returned by</span>
<span 
class="cmr-10x-x-109">the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">collection</span></span></span> <span 
class="cmr-10x-x-109">function call, for selecting certain documents that satisfy the desired</span>
<span 
class="cmr-10x-x-109">condition.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-142">
CREATE&#x00A0;DOCUMENT&#x00A0;doc-name-expr&#x00A0;IN&#x00A0;COLLECTION&#x00A0;coll-name-expr
</div>
<!--l. 3094--><p class="nopar" >
<!--l. 3096--><p class="indent" >   <span 
class="cmr-10x-x-109">This statement creates a new document named </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">doc-name-expr</span></span></span> <span 
class="cmr-10x-x-109">in a collection</span>
<span 
class="cmr-10x-x-109">named </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">coll-name-expr</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 3099--><p class="indent" >   <span 
class="cmr-10x-x-109">For example, the following statement:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-143">
CREATE&#x00A0;DOCUMENT&#x00A0;&#8217;mail&#8217;&#x00A0;IN&#x00A0;COLLECTION&#x00A0;&#8217;mails&#8217;
</div>
<!--l. 3102--><p class="nopar" > <span 
class="cmr-10x-x-109">creates a document named &#8221;mail&#8221; in the collection named &#8221;mails&#8221;.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-144">
DROP&#x00A0;DOCUMENT&#x00A0;doc-name-expr&#x00A0;IN&#x00A0;COLLECTION&#x00A0;coll-name-expr
</div>
<!--l. 3107--><p class="nopar" >
<!--l. 3109--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DROP</span><span 
class="cmtt-10x-x-109">&#x00A0;DOCUMENT</span><span 
class="cmtt-10x-x-109">&#x00A0;IN</span><span 
class="cmtt-10x-x-109">&#x00A0;COLLECTION</span></span></span> <span 
class="cmr-10x-x-109">statement drops the document named</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">doc-name-expr</span></span></span> <span 
class="cmr-10x-x-109">located in the collection named </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">coll-name-expr</span></span></span><span 
class="cmr-10x-x-109">.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-145">
DROP&#x00A0;COLLECTION&#x00A0;coll-name-expr
</div>
<!--l. 3114--><p class="nopar" >
<!--l. 3116--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DROP</span><span 
class="cmtt-10x-x-109">&#x00A0;COLLECTION</span></span></span> <span 
class="cmr-10x-x-109">statement drops the collection with the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">coll-name-expr</span></span></span>
<span 
class="cmr-10x-x-109">name from the database. If the collection contains any documents, these documents are</span>
<span 
class="cmr-10x-x-109">dropped as well.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-146">
RENAME&#x00A0;COLLECTION&#x00A0;old-name-expr&#x00A0;INTO&#x00A0;new-name-expr
</div>
<!--l. 3122--><p class="nopar" >
<!--l. 3124--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">RENAME</span><span 
class="cmtt-10x-x-109">&#x00A0;COLLECTION</span></span></span> <span 
class="cmr-10x-x-109">statement renames collection with the name that is</span>
<span 
class="cmr-10x-x-109">result of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">old-name-expr</span></span></span><span 
class="cmr-10x-x-109">. The new name is assigned which is result of the</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">new-name-expr</span></span></span><span 
class="cmr-10x-x-109">. Both result of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">old-name-expr</span></span></span> <span 
class="cmr-10x-x-109">and result of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">new-name-expr</span></span></span>
<span 
class="cmr-10x-x-109">after atomization applied must be either of type </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs:string</span></span></span> <span 
class="cmr-10x-x-109">(or derived) or promotable</span>
<span 
class="cmr-10x-x-109">to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs:string</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 3130--><p class="indent" >   <span 
class="cmr-10x-x-109">There is a system document </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$collections</span></span></span> <span 
class="cmr-10x-x-109">which lists all available collections. For</span>
<span 
class="cmr-10x-x-109">details on retrieving metadata see </span><a 
href="#x1-580002.5.6"><span 
class="cmr-10x-x-109">2.5.6</span><!--tex4ht:ref: managing-metadata --></a> <span 
class="cmr-10x-x-109">section.</span>
<!--l. 3138--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.5.3   </span></span> <a 
 id="x1-550002.5.3"></a><span 
class="cmr-10x-x-109">Managing Value Indices</span></h5>
<!--l. 3141--><p class="noindent" ><span 
class="cmr-10x-x-109">Sedna supports value indices to index XML element content and attribute</span>
<span 
class="cmr-10x-x-109">values. Index could be based on two different structure types: B+ tree and BST</span>
<span 
class="cmr-10x-x-109">(experimental) (</span><span 
class="cmti-10x-x-109">B</span><span 
class="cmr-10x-x-109">lock </span><span 
class="cmti-10x-x-109">S</span><span 
class="cmr-10x-x-109">tring </span><span 
class="cmti-10x-x-109">T</span><span 
class="cmr-10x-x-109">rie). Below is the description of statements to manage</span>
<span 
class="cmr-10x-x-109">indices.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-147">
CREATE&#x00A0;INDEX&#x00A0;title-expr
&#x00A0;<br />ON&#x00A0;Path1&#x00A0;BY&#x00A0;Path2
&#x00A0;<br />AS&#x00A0;type
&#x00A0;<br />[USING&#x00A0;tree-type]
</div>
<!--l. 3151--><p class="nopar" >
<!--l. 3153--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">CREATE</span><span 
class="cmtt-10x-x-109">&#x00A0;INDEX</span></span></span> <span 
class="cmr-10x-x-109">creates an index on nodes (specified by </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Path1</span></span></span><span 
class="cmr-10x-x-109">) by keys (specified</span>
<span 
class="cmr-10x-x-109">by </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Path2</span></span></span><span 
class="cmr-10x-x-109">).</span>
<!--l. 3156--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Path1</span></span></span> <span 
class="cmr-10x-x-109">is an XPath expression without any filter expressions that identifies the nodes</span>
<span 
class="cmr-10x-x-109">of a document or a collection that are to be indexed. </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Path2</span></span></span> <span 
class="cmr-10x-x-109">is an XPath expression</span>
<span 
class="cmr-10x-x-109">without any filter expressions that specifies the relative path to the nodes whose</span>
<span 
class="cmr-10x-x-109">string-values are used as keys to identify the nodes returned by the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Path1</span></span></span>
<span 
class="cmr-10x-x-109">expression. The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Path2</span></span></span> <span 
class="cmr-10x-x-109">expression should not start with &#8217;/&#8217; or &#8217;//&#8217;. The full path</span>
<span 
class="cmr-10x-x-109">from the root of documents (that may be in a collection) to the key nodes is</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Path1/Path2</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 3164--><p class="indent" >   <span 
class="cmr-10x-x-109">For instance, let </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Path1</span></span></span> <span 
class="cmr-10x-x-109">be </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">doc("a")/b/c</span></span></span> <span 
class="cmr-10x-x-109">and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Path2</span></span></span> <span 
class="cmr-10x-x-109">be </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">d</span></span></span><span 
class="cmr-10x-x-109">. Let </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">X</span></span></span> <span 
class="cmr-10x-x-109">be the node</span>
<span 
class="cmr-10x-x-109">returned by the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Path1</span></span></span> <span 
class="cmr-10x-x-109">expression, and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Y</span></span></span> <span 
class="cmr-10x-x-109">be one of the nodes returned by the</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">doc("a")/b/c/d</span></span></span> <span 
class="cmr-10x-x-109">expression. If </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Y</span></span></span> <span 
class="cmr-10x-x-109">is the descendant of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">X</span></span></span><span 
class="cmr-10x-x-109">, then the value of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">Y</span></span></span> <span 
class="cmr-10x-x-109">is used as</span>
<span 
class="cmr-10x-x-109">the key for searching the node </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">X</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 3170--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">title-expr</span></span></span> <span 
class="cmr-10x-x-109">is the title of the index created. It should be unique for each index in</span>
<span 
class="cmr-10x-x-109">the database.</span>
<!--l. 3173--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">type</span></span></span> <span 
class="cmr-10x-x-109">is an atomic type which the value of the keys should be cast to. The following</span>
<span 
class="cmr-10x-x-109">types are supported for B-tree: </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs:string</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs:integer</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs:float</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs:double</span></span></span><span 
class="cmr-10x-x-109">,</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs:date</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs:time</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs:dateTime</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs_yearMonthDuration</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs_dateTimeDuration</span></span></span><span 
class="cmr-10x-x-109">. Note</span>
<span 
class="cmr-10x-x-109">that BST supports </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs:string</span></span></span> <span 
class="cmr-10x-x-109">only.</span>
<!--l. 3179--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">tree-type</span></span></span> <span 
class="cmr-10x-x-109">defines the structure that would be used for index storage. This</span>
<span 
class="cmr-10x-x-109">argument is optional. Index is stored using B+ tree structure by default and it&#8217;s a good</span>
<span 
class="cmr-10x-x-109">choice in the general case. But there is one more implemented structure that could show</span>
<span 
class="cmr-10x-x-109">great disk-space economy in certain situations. BST is based on prefix tree (or </span><span 
class="cmti-10x-x-109">trie</span><span 
class="cmr-10x-x-109">)</span>
<span 
class="cmr-10x-x-109">conception. Main distinguishing features are:</span>
      <ol  class="enumerate1" >
      <li 
  class="enumerate" id="x1-55002x1"><span 
class="cmr-10x-x-109">BST can handle strings with any length.</span>
      </li>
      <li 
  class="enumerate" id="x1-55004x2"><span 
class="cmr-10x-x-109">If  you  want  to  index  data  by  fields  that  contain  strings  with  repeating</span>
      <span 
class="cmr-10x-x-109">prefixes (e.g: URLs, URIs) BST would be a good choice for you.</span></li></ol>
<!--l. 3190--><p class="noindent" ><span 
class="cmr-10x-x-109">In the case of appropriate usage BST can store indexes up to 4 times more compressed with</span>
<span 
class="cmr-10x-x-109">the same search speed in comparison with B+ tree.</span>
<!--l. 3193--><p class="indent" >   <span 
class="cmr-10x-x-109">The following </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">tree-type</span></span></span> <span 
class="cmr-10x-x-109">are supported: </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"btree"</span></span></span> <span 
class="cmr-10x-x-109">for B+ tree (default), </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"bstrie"</span></span></span>
<span 
class="cmr-10x-x-109">for BST.</span>
                                                                          

                                                                          
   <div class="newtheorem">
<!--l. 3196--><p class="noindent" ><span class="head">
<span 
class="cmbx-10x-x-109">Note</span><span 
class="cmbx-10x-x-109">&#x00A0;3</span> </span><span 
class="cmti-10x-x-109">BST  feature  is  experimental  at  this  moment;  </span><span 
class="cmbxti-10x-x-109">do  not  use  it  in</span>
<span 
class="cmbxti-10x-x-109">production </span><span 
class="cmti-10x-x-109">or any critical applications.</span>
   </div>
<!--l. 3200--><p class="indent" >   <span 
class="cmr-10x-x-109">In the following example, people are indexed by the names of their cities. To</span>
<span 
class="cmr-10x-x-109">generate the index keys, city names are cast to the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">xs:string</span></span></span> <span 
class="cmr-10x-x-109">type. B+ tree is used for</span>
<span 
class="cmr-10x-x-109">index storage.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-148">
CREATE&#x00A0;INDEX&#x00A0;"people"
&#x00A0;<br />ON&#x00A0;doc("auction")/site//person&#x00A0;BY&#x00A0;address/city
&#x00A0;<br />AS&#x00A0;xs:string
</div>
<!--l. 3208--><p class="nopar" >
<!--l. 3210--><p class="indent" >   <span 
class="cmr-10x-x-109">The following example is exactly the same as the previous but uses BST for index</span>
<span 
class="cmr-10x-x-109">storage:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-149">
CREATE&#x00A0;INDEX&#x00A0;"people"
&#x00A0;<br />ON&#x00A0;doc("auction")/site//person&#x00A0;BY&#x00A0;address/city
&#x00A0;<br />AS&#x00A0;xs:string
&#x00A0;<br />USING&#x00A0;"bstrie"
</div>
<!--l. 3218--><p class="nopar" >
<!--l. 3221--><p class="indent" >   <span 
class="cmr-10x-x-109">To remove an index, use the following statement:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-150">
DROP&#x00A0;INDEX&#x00A0;title-expr
</div>
<!--l. 3224--><p class="nopar" >
<!--l. 3226--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DROP</span><span 
class="cmtt-10x-x-109">&#x00A0;INDEX</span></span></span> <span 
class="cmr-10x-x-109">statement removes the index named </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">title-expr</span></span></span> <span 
class="cmr-10x-x-109">from the</span>
<span 
class="cmr-10x-x-109">database.</span>
   <div class="newtheorem">
<!--l. 3229--><p class="noindent" ><span class="head">
<span 
class="cmbx-10x-x-109">Note</span><span 
class="cmbx-10x-x-109">&#x00A0;4</span> </span><span 
class="cmti-10x-x-109">In the current version of Sedna, query executor does not use indices</span>
<span 
class="cmti-10x-x-109">automatically. You can enforce the executor to employ indices by using the XQuery</span>
<span 
class="cmti-10x-x-109">index-scan functions specified in section </span><a 
href="#x1-310002.2.2"><span 
class="cmti-10x-x-109">2.2.2</span><!--tex4ht:ref: sec:value-index-scan-fun --></a><span 
class="cmti-10x-x-109">.</span>
   </div>
<!--l. 3239--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.5.4   </span></span> <a 
 id="x1-560002.5.4"></a><span 
class="cmr-10x-x-109">Managing Full-Text Indices</span></h5>
<!--l. 3241--><p class="noindent" ><span 
class="cmr-10x-x-109">Sedna allows to build full-text indices in order to combine XQuery with full-text search</span>
<span 
class="cmr-10x-x-109">facilities. Resulting indices need to be used explicitly via full-text search functions (see</span>
<a 
href="#x1-320002.2.3"><span 
class="cmr-10x-x-109">2.2.3</span><!--tex4ht:ref: sec:ft-fun --></a><span 
class="cmr-10x-x-109">), XQuery full text extensions are not supported.</span>
<!--l. 3246--><p class="indent" >   <span 
class="cmr-10x-x-109">Sedna can be integrated with dtSearch </span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xlink:dtsearch-engine"><span 
class="cmr-10x-x-109">15</span></a><span 
class="cmr-10x-x-109">]</span></span><span 
class="cmr-10x-x-109">, a commercial text retrieval engine,</span>
<span 
class="cmr-10x-x-109">which provides full-text indices. As dtSearch is a third party commercial product, Sedna</span>
<span 
class="cmr-10x-x-109">does not include dtSearch. If you are interested in using Sedna with dtSearch, please</span>
<span 
class="cmr-10x-x-109">contact us. Below is the description of statements to manage full-text indices in</span>
<span 
class="cmr-10x-x-109">Sedna.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-151">
CREATE&#x00A0;FULL-TEXT&#x00A0;INDEX&#x00A0;title-expr
&#x00A0;<br />ON&#x00A0;path
&#x00A0;<br />TYPE&#x00A0;type
&#x00A0;<br />[
&#x00A0;<br />WITH&#x00A0;OPTIONS&#x00A0;options
&#x00A0;<br />]
</div>
<!--l. 3259--><p class="nopar" >
<!--l. 3261--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">CREATE</span><span 
class="cmtt-10x-x-109">&#x00A0;INDEX</span></span></span> <span 
class="cmr-10x-x-109">indexes nodes (specified by </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">path</span></span></span><span 
class="cmr-10x-x-109">) by a text representation of the</span>
<span 
class="cmr-10x-x-109">nodes. The text representations of the nodes are constructed according to </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">type</span></span></span>
<span 
class="cmr-10x-x-109">parameter value.</span>
<!--l. 3265--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">title-expr</span></span></span> <span 
class="cmr-10x-x-109">is the title of the index created. It should be unique for each full-text</span>
<span 
class="cmr-10x-x-109">index in the database.</span>
<!--l. 3268--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">path</span></span></span> <span 
class="cmr-10x-x-109">is an XPath expression without any filter expressions that identifies the nodes</span>
<span 
class="cmr-10x-x-109">of a document or a collection that are to be indexed. An example of the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">path</span></span></span> <span 
class="cmr-10x-x-109">expression</span>
<span 
class="cmr-10x-x-109">is as follows </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">doc("foo")/library//article</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 3273--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">type</span></span></span> <span 
class="cmr-10x-x-109">specifies how the text representations of nodes are constructed when the nodes</span>
<span 
class="cmr-10x-x-109">are indexed. </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">type</span></span></span> <span 
class="cmr-10x-x-109">can have one of the following values:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"xml"</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the XML representations of the nodes are used;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"string-value"</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the string-values of the nodes are used as obtained using</span>
      <span 
class="cmr-10x-x-109">standard XQuery </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">fn:string</span></span></span> <span 
class="cmr-10x-x-109">function. The string-value of a node is the</span>
      <span 
class="cmr-10x-x-109">concatenated contents of all its descendant text nodes, in document order;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"delimited-value"</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the same as </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"string-value"</span></span></span> <span 
class="cmr-10x-x-109">but blank characters</span>
      <span 
class="cmr-10x-x-109">are inserted between text nodes;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"customized-value"</span></span></span>                       <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">((element-qname,</span><span 
class="cmtt-10x-x-109">&#x00A0;type)</span></span></span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">,</span><span 
class="cmtt-10x-x-109">&#x00A0;...</span></span></span> <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">(element-qname,</span><span 
class="cmtt-10x-x-109">&#x00A0;type))</span></span></span> <span 
class="cmr-10x-x-109">&#8211; this option allows specifying types for</span>
      <span 
class="cmr-10x-x-109">particular element nodes. Here </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">element-qname</span></span></span> <span 
class="cmr-10x-x-109">is a QName of an element,</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">type</span></span></span> <span 
class="cmr-10x-x-109">can have one of the values listed above (i.e. </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"xml"</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"string-value"</span></span></span><span 
class="cmr-10x-x-109">,</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"delimited-value"</span></span></span><span 
class="cmr-10x-x-109">). For those elements that are not specified in the list,</span>
      <span 
class="cmr-10x-x-109">the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"xml"</span></span></span> <span 
class="cmr-10x-x-109">type is used by default.</span></li></ul>
<!--l. 3292--><p class="indent" >   <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">options</span></span></span> <span 
class="cmr-10x-x-109">is a sting of the following form: </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"option=value{,option=value}"</span></span></span><span 
class="cmr-10x-x-109">. It</span>
<span 
class="cmr-10x-x-109">denotes options used for index constuction. The following options are available:</span>
                                                                          

                                                                          
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">backend</span></span></span> <span 
class="cmr-10x-x-109">&#8211;  specifies  which  implementation  of  full-text  indexes  to  use.</span>
      <span 
class="cmr-10x-x-109">Allowed values are </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">native</span></span></span> <span 
class="cmr-10x-x-109">and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">dtsearch</span></span></span><span 
class="cmr-10x-x-109">, the latter in only available in</span>
      <span 
class="cmr-10x-x-109">dtSearch-enabled  builds.  For  dtSearch-enabled  builds,  default  backend  is</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">dtsearch</span></span></span><span 
class="cmr-10x-x-109">, for other builds - </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">native</span></span></span><span 
class="cmr-10x-x-109">.</span></li></ul>
<!--l. 3303--><p class="indent" >   <span 
class="cmr-10x-x-109">Options for </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">native</span></span></span> <span 
class="cmr-10x-x-109">backend:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">stemming</span></span></span> <span 
class="cmr-10x-x-109">&#8211; specifies stemming language to use.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">stemtype</span></span></span> <span 
class="cmr-10x-x-109">&#8211; in order to be able to search both stemmed and original words</span>
      <span 
class="cmr-10x-x-109">- add </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">stemtype=both</span></span></span> <span 
class="cmr-10x-x-109">option, otherwise stemming will be used always if</span>
      <span 
class="cmr-10x-x-109">enabled.</span></li></ul>
<!--l. 3313--><p class="indent" >   <span 
class="cmr-10x-x-109">In the following example, articles are indexed by their contents represented as</span>
<span 
class="cmr-10x-x-109">XML.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-152">
CREATE&#x00A0;FULL-TEXT&#x00A0;INDEX&#x00A0;"articles"
&#x00A0;<br />ON&#x00A0;doc("foo")/library//article
&#x00A0;<br />TYPE&#x00A0;"xml"
</div>
<!--l. 3320--><p class="nopar" >
<!--l. 3322--><p class="indent" >   <span 
class="cmr-10x-x-109">The example below illustrates the use of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">"customized-value"</span></span></span> <span 
class="cmr-10x-x-109">type.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-153">
CREATE&#x00A0;FULL-TEXT&#x00A0;INDEX&#x00A0;"messages"
&#x00A0;<br />ON&#x00A0;doc("foo")//message
&#x00A0;<br />TYPE&#x00A0;"customized-value"
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;(("b",&#x00A0;"string-value"),
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;("a",&#x00A0;"delimited-value"))
</div>
<!--l. 3329--><p class="nopar" >
<!--l. 3331--><p class="indent" >   <span 
class="cmr-10x-x-109">To remove a full-text index, use the following statement:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-154">
DROP&#x00A0;FULL-TEXT&#x00A0;INDEX&#x00A0;title-expr
</div>
<!--l. 3334--><p class="nopar" >
<!--l. 3336--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DROP</span></span></span> <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">FULL-TEXT</span></span></span> <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">INDEX</span></span></span> <span 
class="cmr-10x-x-109">statement removes the full-text index named</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">title-expr</span></span></span> <span 
class="cmr-10x-x-109">from the database.</span>
   <div class="newtheorem">
<!--l. 3339--><p class="noindent" ><span class="head">
<span 
class="cmbx-10x-x-109">Note</span><span 
class="cmbx-10x-x-109">&#x00A0;5</span> </span><span 
class="cmti-10x-x-109">In the current version of Sedna, query executor does not use full-text</span>
<span 
class="cmti-10x-x-109">indices automatically. You can enforce the executor to employ indices by using the</span>
<span 
class="cmti-10x-x-109">XQuery full-text search functions specified in section </span><a 
href="#x1-320002.2.3"><span 
class="cmti-10x-x-109">2.2.3</span><!--tex4ht:ref: sec:ft-fun --></a><span 
class="cmti-10x-x-109">.</span>
   </div>
<!--l. 3349--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.5.5   </span></span> <a 
 id="x1-570002.5.5"></a><span 
class="cmr-10x-x-109">Managing Modules</span></h5>
<!--l. 3350--><p class="noindent" ><span 
class="cmr-10x-x-109">XQuery allows putting functions in library modules, so that they can be shared</span>
<span 
class="cmr-10x-x-109">and imported by any query. A library module contains a module declaration</span>
<span 
class="cmr-10x-x-109">followed by variable and/or function declarations. The module declaration</span>
<span 
class="cmr-10x-x-109">specifies its target namespace URI which is used to identify the module in</span>
<span 
class="cmr-10x-x-109">the database. For more information on modules see the XQuery specification</span>
<span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:query-language"><span 
class="cmr-10x-x-109">3</span></a><span 
class="cmr-10x-x-109">]</span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 3357--><p class="indent" >   <span 
class="cmr-10x-x-109">Before a library module could be imported from an query, it is to be loaded into the</span>
<span 
class="cmr-10x-x-109">database. To load a module, use the following statement.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-155">
LOAD&#x00A0;MODULE&#x00A0;"path_to_file",&#x00A0;...,&#x00A0;"path_to_file"
</div>
<!--l. 3362--><p class="nopar" >
<!--l. 3364--><p class="indent" >   <span 
class="cmr-10x-x-109">Each </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">path_to_file</span></span></span> <span 
class="cmr-10x-x-109">specifies a path to the file. If only one parameter is</span>
<span 
class="cmr-10x-x-109">supplied, it refers to the file which contains the module definition. The module</span>
<span 
class="cmr-10x-x-109">definition can also be divided into several files. In this case all files must have a</span>
<span 
class="cmr-10x-x-109">module declaration with the same target namespace URI (otherwise an error is</span>
<span 
class="cmr-10x-x-109">raised).</span>
<!--l. 3370--><p class="indent" >   <span 
class="cmr-10x-x-109">For example, suppose that you have the following module stored in </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">math.xqlib</span></span></span><span 
class="cmr-10x-x-109">.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-156">
module&#x00A0;namespace&#x00A0;math&#x00A0;=&#x00A0;"http://example.org/math";
&#x00A0;<br />
&#x00A0;<br />declare&#x00A0;variable&#x00A0;$math:pi&#x00A0;as&#x00A0;xs:decimal&#x00A0;:=&#x00A0;3.1415926;
&#x00A0;<br />
&#x00A0;<br />declare&#x00A0;function&#x00A0;math:increment($num&#x00A0;as&#x00A0;xs:decimal)&#x00A0;as&#x00A0;xs:decimal&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;$num&#x00A0;+&#x00A0;1
&#x00A0;<br />};
&#x00A0;<br />
&#x00A0;<br />declare&#x00A0;function&#x00A0;math:square($num&#x00A0;as&#x00A0;xs:decimal)&#x00A0;as&#x00A0;xs:decimal&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;$num&#x00A0;*&#x00A0;$num
&#x00A0;<br />};
</div>
<!--l. 3385--><p class="nopar" >
<!--l. 3387--><p class="indent" >   <span 
class="cmr-10x-x-109">You can load this module as follows.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-157">
LOAD&#x00A0;MODULE&#x00A0;"math.xqlib"
</div>
<!--l. 3391--><p class="nopar" >
<!--l. 3393--><p class="indent" >   <span 
class="cmr-10x-x-109">Once an library module is loaded into the database, it can be imported into an</span>
<span 
class="cmr-10x-x-109">query using conventional XQuery module import </span><span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:query-language"><span 
class="cmr-10x-x-109">3</span></a><span 
class="cmr-10x-x-109">]</span></span><span 
class="cmr-10x-x-109">. For example, you can import the</span>
<span 
class="cmr-10x-x-109">above module as follows.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-158">
import&#x00A0;module&#x00A0;namespace&#x00A0;math&#x00A0;=&#x00A0;"http://example.org/math";
&#x00A0;<br />
&#x00A0;<br />math:increment(math:square($math:pi))
&#x00A0;<br />
</div>
<!--l. 3402--><p class="nopar" >
<!--l. 3405--><p class="indent" >   <span 
class="cmr-10x-x-109">To replace an already loaded module with new one, use the following statement.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-159">
LOAD&#x00A0;OR&#x00A0;REPLACE&#x00A0;MODULE&#x00A0;"path_to_file",&#x00A0;...,&#x00A0;"path_to_file"
</div>
<!--l. 3409--><p class="nopar" >
<!--l. 3411--><p class="indent" >   <span 
class="cmr-10x-x-109">To remove a library module from the database, use the following statement.</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-160">
DROP&#x00A0;MODULE&#x00A0;"target_namespace_URI"
</div>
<!--l. 3415--><p class="nopar" >
<!--l. 3417--><p class="indent" >   <span 
class="cmr-10x-x-109">It results in removing the library module with the given target namespace URI from</span>
<span 
class="cmr-10x-x-109">the database.</span>
<!--l. 3420--><p class="indent" >   <span 
class="cmr-10x-x-109">You can obtain information about modules loaded into the database by querying the</span>
<span 
class="cmr-10x-x-109">system collection named </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$modules</span></span></span> <span 
class="cmr-10x-x-109">as follows </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">collection("$modules")</span></span></span><span 
class="cmr-10x-x-109">.</span>
<!--l. 3428--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.5.6   </span></span> <a 
 id="x1-580002.5.6"></a><span 
class="cmr-10x-x-109">Retrieving Metadata</span></h5>
<!--l. 3431--><p class="noindent" ><span 
class="cmr-10x-x-109">You can retrieve various metadata about database objects (such as documents,</span>
<span 
class="cmr-10x-x-109">collections, indexes, etc.) by querying system documents and collections listed</span>
<span 
class="cmr-10x-x-109">below.</span>
<!--l. 3435--><p class="indent" >   <span 
class="cmr-10x-x-109">Names of the system documents and collections start with </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$</span></span></span> <span 
class="cmr-10x-x-109">symbol. The system</span>
<span 
class="cmr-10x-x-109">documents and collections (except the ones marked with * symbol) are not persistent</span>
<span 
class="cmr-10x-x-109">but generated on the fly. You can query these documents as usual but you cannot</span>
<span 
class="cmr-10x-x-109">update them. Also these documents are not listed in the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$documents</span></span></span> <span 
class="cmr-10x-x-109">system</span>
<span 
class="cmr-10x-x-109">document.</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$documents</span></span></span> <span 
class="cmr-10x-x-109">document &#8211; list of all stand-alone documents, collections and</span>
      <span 
class="cmr-10x-x-109">in-collection documents (except system meta-documents and collection, like</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$documents</span></span></span> <span 
class="cmr-10x-x-109">document itself);</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$collections</span></span></span> <span 
class="cmr-10x-x-109">document &#8211; list of all collections;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$modules</span></span></span> <span 
class="cmr-10x-x-109">document &#8211; contains list of loaded modules with theirs names;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$modules</span></span></span> <span 
class="cmr-10x-x-109">(*) collection &#8211; contains documents with precompiled definitions</span>
      <span 
class="cmr-10x-x-109">of XQuery modules;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$indexes</span></span></span> <span 
class="cmr-10x-x-109">document &#8211; list of indexes with information about them;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$ftindexes</span></span></span> <span 
class="cmr-10x-x-109">document  &#8211;  list  of  full-text  indexes  with  information  about</span>
      <span 
class="cmr-10x-x-109">them (this document is available if Sedna is build with </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SE_ENABLE_FTSEARCH</span></span></span>
      <span 
class="cmr-10x-x-109">enabled);</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$triggers</span></span></span> <span 
class="cmr-10x-x-109">document &#8211; list of triggers with information about them (this</span>
      <span 
class="cmr-10x-x-109">document is available if Sedna is build with </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">SE_ENABLE_TRIGGERS</span></span></span> <span 
class="cmr-10x-x-109">enabled);</span>
                                                                          

                                                                          
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$db_security_data</span></span></span> <span 
class="cmr-10x-x-109">(*) document&#8211; list of users and privileges on database</span>
      <span 
class="cmr-10x-x-109">objects;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$schema</span></span></span> <span 
class="cmr-10x-x-109">document &#8211; descriptive schema of all documents and collections</span>
      <span 
class="cmr-10x-x-109">with some schema-related information;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$errors</span></span></span> <span 
class="cmr-10x-x-109">document &#8211; list of all errors with descriptions;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$version</span></span></span> <span 
class="cmr-10x-x-109">document &#8211; version and build numbers;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$schema_&#x003C;name&#x003E;</span></span></span> <span 
class="cmr-10x-x-109">document &#8211; the descriptive schema of the document or</span>
      <span 
class="cmr-10x-x-109">collection named </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">&#x003C;name&#x003E;</span></span></span><span 
class="cmr-10x-x-109">;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$document_&#x003C;name&#x003E;</span></span></span> <span 
class="cmr-10x-x-109">document &#8211; statistical information about the document</span>
      <span 
class="cmr-10x-x-109">named </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">&#x003C;name&#x003E;</span></span></span><span 
class="cmr-10x-x-109">;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$collection_&#x003C;name&#x003E;</span></span></span>  <span 
class="cmr-10x-x-109">document   &#8211;   statistical   information   about   the</span>
      <span 
class="cmr-10x-x-109">collection named </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">&#x003C;name&#x003E;</span></span></span><span 
class="cmr-10x-x-109">.</span></li></ul>
<!--l. 3472--><p class="indent" >   <span 
class="cmr-10x-x-109">The statistical information in </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$document_&#x003C;name&#x003E;</span></span></span> <span 
class="cmr-10x-x-109">and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$collection_&#x003C;name&#x003E;</span></span></span>
<span 
class="cmr-10x-x-109">documents contains the following elements:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">total_schema_nodes</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the number of the nodes of the descriptive schema;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">total_schema_text_nodes</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the number of the attribute and text nodes of</span>
      <span 
class="cmr-10x-x-109">the descriptive schema;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">total_nodes</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the number of the nodes of the document (or collection);</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">schema_depth</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the maximal depth of the document (or collection);</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">total_desc_blk</span></span></span> <span 
class="cmr-10x-x-109">&#8211;  the  number  of  the  descriptor  blocks  occupied  by</span>
      <span 
class="cmr-10x-x-109">document (or collection);</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">total_str_blk</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the number of the text blocks occupied by document (or</span>
      <span 
class="cmr-10x-x-109">collection);</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">saturation</span></span></span> <span 
class="cmr-10x-x-109">&#8211; fill factor of the blocks (in percents);</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">total_innr_blk</span></span></span> <span 
class="cmr-10x-x-109">&#8211;  the  number  of  the  descriptor  blocks  occupied  by</span>
      <span 
class="cmr-10x-x-109">document (or collection) except first and last blocks in each chain of blocks;</span>
                                                                          

                                                                          
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">total_innr_size</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the size of the inner blocks;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">innr_blk_saturation</span></span></span> <span 
class="cmr-10x-x-109">&#8211; fill factor of the inner blocks (in percents);</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">strings</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the share of the string blocks (in percents);</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">descriptors</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the share of the descriptor blocks (in percents);</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">nid</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the share of the long labeling numbers&#8217; (</span><span 
class="cmmi-10x-x-109">&#x003E; </span><span 
class="cmr-10x-x-109">11) total size (in percents);</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">indirection</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the share of the indirection records&#8217; total size (in percents);</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">total_size</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the total size of the document (or collection), in MBs;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">string_size</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the total size of the string blocks, in MBs;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">descriptor_size</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the total size of the descriptor blocks, in MBs;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">nids_size</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the total size of the long labeling numbers, in MBs;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">free_space_in_str_blocks</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the total size of the free space in the string</span>
      <span 
class="cmr-10x-x-109">blocks;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">indirection_size</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the total size of the indirection records, in MBs;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">nids_size</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the share of the indirection records&#8217; total size (in percents);</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">STRINGS</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the histogram of the xml data by its size;</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">NID</span></span></span> <span 
class="cmr-10x-x-109">&#8211; the histogram of the labeling numbers its length;</span></li></ul>
<!--l. 3518--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.6   </span></span> <a 
 id="x1-590002.6"></a><span 
class="cmr-10x-x-109">XQuery Triggers</span></h4>
<!--l. 3520--><p class="noindent" ><span 
class="cmr-10x-x-109">XQuery triggers support in Sedna is provided as an XQuery extension. To create a</span>
<span 
class="cmr-10x-x-109">trigger into the Sedna database you have to issue the following </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">CREATE</span></span></span> <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">TRIGGER</span></span></span>
<span 
class="cmr-10x-x-109">statement:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-161">
CREATE&#x00A0;TRIGGER&#x00A0;trigger-name
&#x00A0;<br />(&#x00A0;BEFORE&#x00A0;|&#x00A0;AFTER&#x00A0;)&#x00A0;(INSERT&#x00A0;|&#x00A0;DELETE&#x00A0;|&#x00A0;REPLACE)
&#x00A0;<br />ON&#x00A0;path
&#x00A0;<br />(&#x00A0;FOR&#x00A0;EACH&#x00A0;NODE&#x00A0;|&#x00A0;FOR&#x00A0;EACH&#x00A0;STATEMENT&#x00A0;)
&#x00A0;<br />DO&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;Update-statement&#x00A0;($NEW,&#x00A0;$OLD,$WHERE);
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;.&#x00A0;.&#x00A0;.
&#x00A0;<br />&#x00A0;&#x00A0;Update-statement&#x00A0;($NEW,&#x00A0;$OLD,$WHERE);
&#x00A0;<br />&#x00A0;&#x00A0;XQuery-statement&#x00A0;($NEW,&#x00A0;$OLD,&#x00A0;$WHERE);
&#x00A0;<br />}
</div>
<!--l. 3535--><p class="nopar" >
<!--l. 3537--><p class="indent" >   <span 
class="cmr-10x-x-109">The </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DROP</span></span></span> <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">TRIGGER</span></span></span> <span 
class="cmr-10x-x-109">statement drops the trigger with the name which is the result of</span>
<span 
class="cmr-10x-x-109">the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">trigger-name-expression</span></span></span><span 
class="cmr-10x-x-109">:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-162">
DROP&#x00A0;TRIGGER&#x00A0;trigger-name-expression
</div>
<!--l. 3542--><p class="nopar" >
<!--l. 3544--><p class="indent" >   <span 
class="cmr-10x-x-109">Triggers can be defined to execute either </span><span 
class="cmti-10x-x-109">before </span><span 
class="cmr-10x-x-109">or </span><span 
class="cmti-10x-x-109">after </span><span 
class="cmr-10x-x-109">any </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">INSERT</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DELETE</span></span></span>
<span 
class="cmr-10x-x-109">or </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">REPLACE</span></span></span> <span 
class="cmr-10x-x-109">operation, either once per modified node (</span><span 
class="cmti-10x-x-109">node-level </span><span 
class="cmr-10x-x-109">triggers),</span>
<span 
class="cmr-10x-x-109">or once per XQuery statement (</span><span 
class="cmti-10x-x-109">statement-level </span><span 
class="cmr-10x-x-109">triggers). If a trigger event</span>
<span 
class="cmr-10x-x-109">occurs, the trigger&#8217;s action is called at the appropriate time to handle the</span>
<span 
class="cmr-10x-x-109">event.</span>
<!--l. 3551--><p class="noindent" ><span 
class="cmbx-10x-x-109">Create Trigger Parameters:</span>
      <ul class="itemize1">
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">trigger-name</span></span></span> <span 
class="cmr-10x-x-109">is the unique per database trigger name.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">ON</span><span 
class="cmtt-10x-x-109">&#x00A0;path</span></span></span> <span 
class="cmr-10x-x-109">is XPath expression without any filter expression (predicates) that</span>
      <span 
class="cmr-10x-x-109">identifies the nodes on which the trigger is set. That means that the trigger</span>
      <span 
class="cmr-10x-x-109">fires when corresponding modification (insertion, deletion or replacement) of</span>
      <span 
class="cmr-10x-x-109">those nodes occurs. This XPath expression is prohibited to have predicates</span>
      <span 
class="cmr-10x-x-109">and parent axes.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">FOR</span><span 
class="cmtt-10x-x-109">&#x00A0;EACH</span><span 
class="cmtt-10x-x-109">&#x00A0;NODE</span></span></span><span 
class="cmr-10x-x-109">/</span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">FOR</span><span 
class="cmtt-10x-x-109">&#x00A0;EACH</span><span 
class="cmtt-10x-x-109">&#x00A0;STATEMENT</span></span></span><span 
class="cmr-10x-x-109">:  these  key  words  mean  the  trigger</span>
      <span 
class="cmr-10x-x-109">created is a </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">node-level</span></span></span> <span 
class="cmr-10x-x-109">or </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">statement-level</span></span></span> <span 
class="cmr-10x-x-109">trigger. With a node-level</span>
      <span 
class="cmr-10x-x-109">trigger, the trigger action is invoked once for each node that is affected by the</span>
      <span 
class="cmr-10x-x-109">update statement that fired the trigger. In contrast, a statement-level trigger</span>
      <span 
class="cmr-10x-x-109">is invoked only once when an appropriate statement is executed, regardless</span>
      <span 
class="cmr-10x-x-109">of the number of nodes affected by that statement.</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">BEFORE</span></span></span><span 
class="cmr-10x-x-109">/</span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">AFTER</span></span></span><span 
class="cmr-10x-x-109">:     triggers     are     also     classified     as     </span><span 
class="cmti-10x-x-109">before</span><span 
class="cmr-10x-x-109">-triggers</span>
      <span 
class="cmr-10x-x-109">and </span><span 
class="cmti-10x-x-109">after</span><span 
class="cmr-10x-x-109">-triggers. </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">BEFORE</span></span></span> <span 
class="cmr-10x-x-109">keyword in </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">CREATE</span><span 
class="cmtt-10x-x-109">&#x00A0;TRIGGER</span></span></span> <span 
class="cmr-10x-x-109">statement means the</span>
      <span 
class="cmr-10x-x-109">trigger created is </span><span 
class="cmti-10x-x-109">before</span><span 
class="cmr-10x-x-109">-trigger; </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">AFTER</span></span></span> <span 
class="cmr-10x-x-109">keyword means the trigger created is</span>
      <span 
class="cmti-10x-x-109">after</span><span 
class="cmr-10x-x-109">-trigger. Statement-level-before triggers fire before the statement starts</span>
      <span 
class="cmr-10x-x-109">to do anything, while statement-level-after triggers fire at the very end of</span>
      <span 
class="cmr-10x-x-109">the statement. Node-level-before triggers fire immediately before a particular</span>
      <span 
class="cmr-10x-x-109">node is operated on, while node-level-after triggers fire immediately after</span>
      <span 
class="cmr-10x-x-109">the node is operated on (but before any statement-level-after trigger).</span>
      </li>
      <li class="itemize"><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DO</span></span></span><span 
class="cmr-10x-x-109">: trigger action is specified in braces </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">{}</span></span></span> <span 
class="cmr-10x-x-109">after the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DO</span></span></span> <span 
class="cmr-10x-x-109">key word. Action</span>
                                                                          

                                                                          
      <span 
class="cmr-10x-x-109">contains  zero  or  more  update  statements  and  an  XQuery  query.  It  is  a</span>
      <span 
class="cmr-10x-x-109">mandatory requirement that node-level trigger action ends with an XQuery</span>
      <span 
class="cmr-10x-x-109">query,  while  this  is  optional  for  actions  of  statement-level  triggers.  It  is</span>
      <span 
class="cmr-10x-x-109">prohibited to use prolog in statements of the trigger action.</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">Transition variables </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$NEW</span></span></span><span 
class="cmr-10x-x-109">, </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$OLD</span></span></span> <span 
class="cmr-10x-x-109">and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$WHERE</span></span></span> <span 
class="cmr-10x-x-109">are defined for each node-level trigger</span>
      <span 
class="cmr-10x-x-109">firing and can be used in each statement of the trigger action. These tree variables</span>
      <span 
class="cmr-10x-x-109">are defined as follows:</span>
           <ul class="itemize2">
           <li class="itemize"><span 
class="cmr-10x-x-109">For </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">INSERT</span></span></span><span 
class="cmr-10x-x-109">: </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$NEW</span></span></span> <span 
class="cmr-10x-x-109">is the node being inserted; </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$OLD</span></span></span> <span 
class="cmr-10x-x-109">is undefined; </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$WHERE</span></span></span>
           <span 
class="cmr-10x-x-109">is the parent node in case in </span><span 
class="cmti-10x-x-109">insert-into </span><span 
class="cmr-10x-x-109">statement and sibling node in</span>
           <span 
class="cmr-10x-x-109">case of </span><span 
class="cmti-10x-x-109">insert-preceding </span><span 
class="cmr-10x-x-109">and </span><span 
class="cmti-10x-x-109">insert-following </span><span 
class="cmr-10x-x-109">statements;</span>
           </li>
           <li class="itemize"><span 
class="cmr-10x-x-109">For </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DELETE</span></span></span><span 
class="cmr-10x-x-109">: </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$NEW</span></span></span> <span 
class="cmr-10x-x-109">is undefined; </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$OLD</span></span></span> <span 
class="cmr-10x-x-109">is the node being deleted; </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$WHERE</span></span></span>
           <span 
class="cmr-10x-x-109">is the parent of the deleted node;</span>
           </li>
           <li class="itemize"><span 
class="cmr-10x-x-109">For </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">REPLACE</span></span></span><span 
class="cmr-10x-x-109">: </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$NEW</span></span></span> <span 
class="cmr-10x-x-109">is the node being inserted during the replacement;</span>
           <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$OLD</span></span></span> <span 
class="cmr-10x-x-109">is the node being replaced; </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$WHERE</span></span></span> <span 
class="cmr-10x-x-109">is the parent of the replaced</span>
           <span 
class="cmr-10x-x-109">node.</span></li></ul>
      <!--l. 3600--><p class="noindent" ><span 
class="cmr-10x-x-109">You cannot use transition variables in statement-level triggers.</span></li></ul>
<!--l. 3603--><p class="indent" >   <span 
class="cmr-10x-x-109">XQuery statement in the trigger action of a node-level trigger can </span><span 
class="cmti-10x-x-109">return a node </span><span 
class="cmr-10x-x-109">to</span>
<span 
class="cmr-10x-x-109">the calling executor, if they choose. A node-level-trigger fired before an operation has</span>
<span 
class="cmr-10x-x-109">the following choices:</span>
      <ul class="itemize1">
      <li class="itemize"><span 
class="cmr-10x-x-109">It can return </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">empty</span><span 
class="cmtt-10x-x-109">&#x00A0;sequence</span></span></span> <span 
class="cmr-10x-x-109">to skip the operation for the current node.</span>
      <span 
class="cmr-10x-x-109">This instructs the executor to not perform the node-level operation that</span>
      <span 
class="cmr-10x-x-109">invoked the trigger (the insertion or replacement of a particular node).</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">For node-level </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">INSERT</span></span></span> <span 
class="cmr-10x-x-109">triggers only, the returned node becomes the node that</span>
      <span 
class="cmti-10x-x-109">will be inserted</span><span 
class="cmr-10x-x-109">. This allows the trigger to modify the node being inserted.</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">A node-level before trigger that does not intend to cause either of these</span>
      <span 
class="cmr-10x-x-109">behaviors must be careful to return as its result the same node that was</span>
      <span 
class="cmr-10x-x-109">passed in (that is, the </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">$NEW</span></span></span> <span 
class="cmr-10x-x-109">node for </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">INSERT</span></span></span> <span 
class="cmr-10x-x-109">and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">REPLACE</span></span></span> <span 
class="cmr-10x-x-109">triggers. For</span>
      <span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DELETE</span></span></span> <span 
class="cmr-10x-x-109">triggers its returned value is ignored in all cases except it is an empty</span>
      <span 
class="cmr-10x-x-109">sequence).</span></li></ul>
                                                                          

                                                                          
<!--l. 3621--><p class="indent" >   <span 
class="cmr-10x-x-109">The trigger action return value is ignored for node-level triggers fired after an</span>
<span 
class="cmr-10x-x-109">operation, and for all statement-level triggers, and so they may as well return empty</span>
<span 
class="cmr-10x-x-109">sequence.</span>
<!--l. 3625--><p class="indent" >   <span 
class="cmr-10x-x-109">If more than one trigger is defined for the same event on the same document, the</span>
<span 
class="cmr-10x-x-109">triggers will be fired in alphabetical order by trigger name. In the case of before triggers,</span>
<span 
class="cmr-10x-x-109">the possibly-modified node returned by each trigger becomes the input to the next</span>
<span 
class="cmr-10x-x-109">trigger. If any before trigger returns empty sequence, the operation is abandoned for</span>
<span 
class="cmr-10x-x-109">that node and subsequent triggers are not fired.</span>
<!--l. 3631--><p class="indent" >   <span 
class="cmr-10x-x-109">Typically, node-level-before triggers are used for checking or modifying the data that</span>
<span 
class="cmr-10x-x-109">will be inserted or updated. For example, a before trigger might be used to insert the</span>
<span 
class="cmr-10x-x-109">current time node as a child of the inserting node, or to check that two descendants of</span>
<span 
class="cmr-10x-x-109">the inserting node are consistent. Node-level-after triggers are most sensibly used to</span>
<span 
class="cmr-10x-x-109">propagate the updates to other documents, or make consistency checks against</span>
<span 
class="cmr-10x-x-109">other documents. The reason for this division of labor is that an after-trigger</span>
<span 
class="cmr-10x-x-109">can be certain it is seeing the final value of the node, while a before-trigger</span>
<span 
class="cmr-10x-x-109">cannot; there might be other before triggers firing after it. When designing your</span>
<span 
class="cmr-10x-x-109">trigger-application note, that node-level triggers are typically cheaper than</span>
<span 
class="cmr-10x-x-109">statement-level ones.</span>
<!--l. 3642--><p class="indent" >   <span 
class="cmr-10x-x-109">If a trigger function executes update-statement then these commands may fire other</span>
<span 
class="cmr-10x-x-109">triggers again (cascading triggers). Currently </span><span 
class="cmti-10x-x-109">trigger cascading level </span><span 
class="cmr-10x-x-109">in Sedna is limited</span>
<span 
class="cmr-10x-x-109">to 10.</span>
   <div class="newtheorem">
<!--l. 3646--><p class="noindent" ><span class="head">
<span 
class="cmbx-10x-x-109">Note</span><span 
class="cmbx-10x-x-109">&#x00A0;6</span> </span><span 
class="cmti-10x-x-109">Currently is it prohibited in a trigger action to update the same document</span>
<span 
class="cmti-10x-x-109">or collection that is being updated by the outer update statement that has fired this</span>
<span 
class="cmti-10x-x-109">trigger.</span>
   </div>
<!--l. 3652--><p class="indent" >   <hr class="figure"><div class="figure" 
>
                                                                          

                                                                          
<a 
 id="x1-590021"></a>
                                                                          

                                                                          
<div class="center" 
>
<!--l. 3653--><p class="noindent" >
<div class="tabular"> <table id="TBL-10" class="tabular" 
cellspacing="0" cellpadding="0" rules="groups" 
><colgroup id="TBL-10-1g"><col 
id="TBL-10-1"></colgroup><colgroup id="TBL-10-2g"><col 
id="TBL-10-2"></colgroup><colgroup id="TBL-10-3g"><col 
id="TBL-10-3"></colgroup><colgroup id="TBL-10-4g"><col 
id="TBL-10-4"></colgroup><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-10-1-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-1-1"  
class="td11">           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-1-2"  
class="td11">  <span 
class="cmti-10">update</span><span 
class="cmr-10">:   </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-1-3"  
class="td11">  <span 
class="cmti-10">update</span><span 
class="cmr-10">:   </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-1-4"  
class="td11">  <span 
class="cmti-10">update</span><span 
class="cmr-10">:   </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-10-2-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-2-1"  
class="td11">           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-2-2"  
class="td11">  <span 
class="cmr-10">INSERT  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-2-3"  
class="td11"> <span 
class="cmr-10">DELETE  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-2-4"  
class="td11"> <span 
class="cmr-10">REPLACE </span></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-10-3-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-3-1"  
class="td11"><span 
class="cmti-10">trigger event</span><span 
class="cmr-10">:</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-3-2"  
class="td11"><span 
class="cmr-10">trigger path</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-3-3"  
class="td11"> </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-3-4"  
class="td11"><span 
class="cmr-10">trigger path</span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-10-4-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-4-1"  
class="td11">  <span 
class="cmr-10">INSERT   </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-4-2"  
class="td11">    <span 
class="cmmi-10">&#x003E;</span><span 
class="cmr-10">=      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-4-3"  
class="td11">          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-4-4"  
class="td11">    <span 
class="cmmi-10">&#x003E;</span><span 
class="cmr-10">=      </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-10-5-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-5-1"  
class="td11">           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-5-2"  
class="td11"><span 
class="cmr-10">update path</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-5-3"  
class="td11">          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-5-4"  
class="td11"><span 
class="cmr-10">update path</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-10-6-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-6-1"  
class="td11"><span 
class="cmti-10">trigger event</span><span 
class="cmr-10">:</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-6-2"  
class="td11">          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-6-3"  
class="td11"><span 
class="cmr-10">trigger path</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-6-4"  
class="td11"><span 
class="cmr-10">trigger path</span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-10-7-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-7-1"  
class="td11">  <span 
class="cmr-10">DELETE   </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-7-2"  
class="td11">          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-7-3"  
class="td11">    <span 
class="cmmi-10">&#x003E;</span><span 
class="cmr-10">=      </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-7-4"  
class="td11">    <span 
class="cmmi-10">&#x003E;</span><span 
class="cmr-10">=      </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-10-8-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-8-1"  
class="td11">           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-8-2"  
class="td11">          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-8-3"  
class="td11"><span 
class="cmr-10">update path</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-8-4"  
class="td11"><span 
class="cmr-10">update path</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-10-9-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-9-1"  
class="td11"><span 
class="cmti-10">trigger event</span><span 
class="cmr-10">:</span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-9-2"  
class="td11">          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-9-3"  
class="td11">          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-9-4"  
class="td11"><span 
class="cmr-10">trigger path</span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-10-10-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-10-1"  
class="td11"> <span 
class="cmr-10">REPLACE  </span></td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-10-2"  
class="td11">          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-10-3"  
class="td11">          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-10-4"  
class="td11">    <span 
class="cmmi-10">&#x003E;</span><span 
class="cmr-10">=      </span></td>
</tr><tr  
 style="vertical-align:baseline;" id="TBL-10-11-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-11-1"  
class="td11">           </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-11-2"  
class="td11">          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-11-3"  
class="td11">          </td><td  style="white-space:nowrap; text-align:center;" id="TBL-10-11-4"  
class="td11"><span 
class="cmr-10">update path</span></td>
</tr><tr 
class="hline"><td><hr></td><td><hr></td><td><hr></td><td><hr></td></tr><tr  
 style="vertical-align:baseline;" id="TBL-10-12-"><td  style="white-space:nowrap; text-align:center;" id="TBL-10-12-1"  
class="td11">           </td></tr></table></div>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;1: </span><span  
class="content"> Update and trigger path lengths needed for trigger firing</span></div><!--tex4ht:label?: x1-590021 -->
</div>
                                                                          

                                                                          
<!--l. 3677--><p class="indent" >   </div><hr class="endfigure">
<!--l. 3679--><p class="indent" >   <span 
class="cmr-10x-x-109">Note also that hierarchy of the XML data sometimes can affect the trigger firing in a</span>
<span 
class="cmr-10x-x-109">complicated way. For example, if a node is deleted with all its descendant subtree, then</span>
<span 
class="cmr-10x-x-109">a </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">DELETE</span></span></span><span 
class="cmr-10x-x-109">-trigger set on the descendants of the deleting node is fired. In this situation</span>
<span 
class="cmti-10x-x-109">length of trigger path </span><span 
class="cmmi-10x-x-109">&#x003E;</span><span 
class="cmr-10x-x-109">= </span><span 
class="cmti-10x-x-109">length of update path</span><span 
class="cmr-10x-x-109">. In general, triggers fire according to the</span>
<span 
class="cmr-10x-x-109">table in figure </span><a 
href="#x1-590021"><span 
class="cmr-10x-x-109">1</span><!--tex4ht:ref: triggertab --></a><span 
class="cmr-10x-x-109">.</span>
   <div class="subsubsectionTOCS">
   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.6.1 </span><a 
href="#x1-600002.6.1"><span 
class="cmr-10x-x-109">Trigger Examples</span></a></span>
   </div>
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.6.1   </span></span> <a 
 id="x1-600002.6.1"></a><span 
class="cmr-10x-x-109">Trigger Examples</span></h5>
<!--l. 3692--><p class="noindent" ><span 
class="cmr-10x-x-109">The following trigger is set on insertion of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">person</span></span></span> <span 
class="cmr-10x-x-109">nodes. When some </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">person</span></span></span> <span 
class="cmr-10x-x-109">node is</span>
<span 
class="cmr-10x-x-109">inserted, the trigger analyzes its content and modifies it in the following way. If the</span>
<span 
class="cmr-10x-x-109">person is under 14 years old, the trigger inserts additional child node </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">age-group</span></span></span> <span 
class="cmr-10x-x-109">with</span>
<span 
class="cmr-10x-x-109">the text value &#8217;infant&#8217;: if the person is older than 14 years old - the trigger inserts</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">age-group</span></span></span> <span 
class="cmr-10x-x-109">node with value &#8217;adult&#8217;:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-163">
CREATE&#x00A0;TRIGGER&#x00A0;"tr1"
&#x00A0;<br />BEFORE&#x00A0;INSERT
&#x00A0;<br />ON&#x00A0;doc("auction")/site//person
&#x00A0;<br />FOR&#x00A0;EACH&#x00A0;NODE
&#x00A0;<br />DO&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;if($NEW/age&#x00A0;&#x003C;&#x00A0;14)
&#x00A0;<br />&#x00A0;&#x00A0;then
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;person&#x003E;{attribute&#x00A0;id&#x00A0;{$NEW/@id}}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;{$NEW/*}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;age-group&#x003E;infant&#x003C;/age-group&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/person&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;else
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;person&#x003E;{attribute&#x00A0;id&#x00A0;{$NEW/@id}}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;{$NEW/*}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;age-group&#x003E;adult&#x003C;/age-group&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/person&#x003E;;
&#x00A0;<br />}
</div>
<!--l. 3718--><p class="nopar" >
<!--l. 3720--><p class="indent" >   <span 
class="cmr-10x-x-109">The following trigger </span><span 
class="cmti-10x-x-109">tr2 </span><span 
class="cmr-10x-x-109">prohibits (throws exception) stake increase if the person</span>
<span 
class="cmr-10x-x-109">has already more than 3 open auctions:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-164">
CREATE&#x00A0;TRIGGER&#x00A0;"tr2"
&#x00A0;<br />BEFORE&#x00A0;INSERT
&#x00A0;<br />ON&#x00A0;doc("auction")/site/open_auctions/open_auction/bidder
&#x00A0;<br />FOR&#x00A0;EACH&#x00A0;NODE
&#x00A0;<br />DO&#x00A0;{
&#x00A0;<br />&#x00A0;if(($NEW/increase&#x00A0;&#x003E;&#x00A0;10.5)&#x00A0;and
&#x00A0;<br />&#x00A0;&#x00A0;(count($WHERE/../open_auction
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;[bidder/personref/@person=$NEW/personref/@person])&#x00A0;&#x003E;&#x00A0;3))
&#x00A0;<br />&#x00A0;then&#x00A0;error(xs:QName("tr2"),"The&#x00A0;increase&#x00A0;is&#x00A0;prohibited")
&#x00A0;<br />&#x00A0;else&#x00A0;($NEW);
&#x00A0;<br />}
</div>
<!--l. 3736--><p class="nopar" >
<!--l. 3738--><p class="indent" >   <span 
class="cmr-10x-x-109">The following trigger </span><span 
class="cmti-10x-x-109">tr3 </span><span 
class="cmr-10x-x-109">cancels </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">person</span></span></span> <span 
class="cmr-10x-x-109">node deletion if there are any open</span>
<span 
class="cmr-10x-x-109">auctions referenced by this person:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-165">
CREATE&#x00A0;TRIGGER&#x00A0;"tr3"
&#x00A0;<br />BEFORE&#x00A0;DELETE
&#x00A0;<br />ON&#x00A0;doc("auction")/site//person
&#x00A0;<br />FOR&#x00A0;EACH&#x00A0;NODE
&#x00A0;<br />DO&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;if(exists(
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;$WHERE//open_auction/bidder/personref/@person=$OLD/@id))
&#x00A0;<br />&#x00A0;&#x00A0;then&#x00A0;()
&#x00A0;<br />&#x00A0;&#x00A0;else&#x00A0;$OLD;
&#x00A0;<br />}
</div>
<!--l. 3753--><p class="nopar" >
<!--l. 3755--><p class="indent" >   <span 
class="cmr-10x-x-109">The next statement-level trigger </span><span 
class="cmti-10x-x-109">tr4 </span><span 
class="cmr-10x-x-109">maintains statistics in the document named</span>
<span 
class="cmti-10x-x-109">stat</span><span 
class="cmr-10x-x-109">. When this trigger is fired, the update operation is completed - that gives the</span>
<span 
class="cmr-10x-x-109">possibility to make aggregative checks on the updated data. After deletion of any node</span>
<span 
class="cmr-10x-x-109">in the </span><span 
class="cmti-10x-x-109">auction </span><span 
class="cmr-10x-x-109">document, the trigger refreshes statistics in </span><span 
class="cmti-10x-x-109">stat </span><span 
class="cmr-10x-x-109">and throws exception if</span>
<span 
class="cmr-10x-x-109">there are more than 50 persons left:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-166">
CREATE&#x00A0;TRIGGER&#x00A0;"tr4"
&#x00A0;<br />AFTER&#x00A0;DELETE
&#x00A0;<br />ON&#x00A0;doc("auction")//*
&#x00A0;<br />FOR&#x00A0;EACH&#x00A0;STATEMENT
&#x00A0;<br />DO&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;UPDATE&#x00A0;replace&#x00A0;$b&#x00A0;in&#x00A0;doc("stat")/stat&#x00A0;with
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;stat&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;open_auctions&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;{count(doc("auction")//open_auction)}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/open_auctions&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;closed_auctions&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;{count(doc("auction")//closed_auction)}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/closed_auctions&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;persons&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;{count(doc("auction")//person)}
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/persons&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;/stat&#x003E;;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;UPDATE&#x00A0;insert
&#x00A0;<br />&#x00A0;&#x00A0;if(count(doc("auction")//person)&#x00A0;&#x003C;&#x00A0;10)
&#x00A0;<br />&#x00A0;&#x00A0;then&#x00A0;&#x003C;warning&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;"Critical&#x00A0;number&#x00A0;of&#x00A0;person&#x00A0;left&#x00A0;in&#x00A0;the&#x00A0;auction"
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/warning&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;else&#x00A0;()
&#x00A0;<br />&#x00A0;&#x00A0;into&#x00A0;doc("stat")/stat;
&#x00A0;<br />}
</div>
<!--l. 3790--><p class="nopar" >
<!--l. 3796--><p class="noindent" >
   <h4 class="subsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.7   </span></span> <a 
 id="x1-610002.7"></a><span 
class="cmr-10x-x-109">Debug and Profile Facilities</span></h4>
<!--l. 3798--><p class="noindent" ><span 
class="cmr-10x-x-109">Sedna provides several tracing, debug and perfomance profiling tools that can help to</span>
<span 
class="cmr-10x-x-109">monitor and analyze queries and update statements:</span>
      <ul class="itemize1">
      <li class="itemize"><span 
class="cmbx-10x-x-109">Trace </span><span 
class="cmr-10x-x-109">&#8211; provides a query execution trace intended to be used in debugging</span>
      <span 
class="cmr-10x-x-109">queries (section </span><a 
href="#x1-620002.7.1"><span 
class="cmr-10x-x-109">2.7.1</span><!--tex4ht:ref: trace --></a><span 
class="cmr-10x-x-109">);</span>
                                                                          

                                                                          
      </li>
      <li class="itemize"><span 
class="cmbx-10x-x-109">Debug Mode </span><span 
class="cmr-10x-x-109">&#8211; provides stack of physical operations when error is raised</span>
      <span 
class="cmr-10x-x-109">(section </span><a 
href="#x1-630002.7.2"><span 
class="cmr-10x-x-109">2.7.2</span><!--tex4ht:ref: debug-mode --></a><span 
class="cmr-10x-x-109">);</span>
      </li>
      <li class="itemize"><span 
class="cmbx-10x-x-109">Explain Query </span><span 
class="cmr-10x-x-109">&#8211; shows complete physical execution plan of the query or</span>
      <span 
class="cmr-10x-x-109">update statement (section </span><a 
href="#x1-640002.7.3"><span 
class="cmr-10x-x-109">2.7.3</span><!--tex4ht:ref: explain --></a><span 
class="cmr-10x-x-109">);</span>
      </li>
      <li class="itemize"><span 
class="cmbx-10x-x-109">Profile Query </span><span 
class="cmr-10x-x-109">&#8211; creates complete physical execution plan of the query or</span>
      <span 
class="cmr-10x-x-109">update statement with profile information (execution time, number of calls,</span>
      <span 
class="cmr-10x-x-109">etc) for each physical operation (section </span><a 
href="#x1-650002.7.4"><span 
class="cmr-10x-x-109">2.7.4</span><!--tex4ht:ref: profile --></a><span 
class="cmr-10x-x-109">).</span></li></ul>
<!--l. 3817--><p class="noindent" >
   <div class="subsubsectionTOCS">
   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.7.1 </span><a 
href="#x1-620002.7.1"><span 
class="cmr-10x-x-109">Trace</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.7.2 </span><a 
href="#x1-630002.7.2"><span 
class="cmr-10x-x-109">Debug Mode</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.7.3 </span><a 
href="#x1-640002.7.3"><span 
class="cmr-10x-x-109">Explain Query</span></a></span>
<br />   <span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span class="subsubsectionToc" ><span 
class="cmr-10x-x-109">2.7.4 </span><a 
href="#x1-650002.7.4"><span 
class="cmr-10x-x-109">Profile Query</span></a></span>
   </div>
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.7.1   </span></span> <a 
 id="x1-620002.7.1"></a><span 
class="cmr-10x-x-109">Trace</span></h5>
<!--l. 3820--><p class="noindent" ><span 
class="cmr-10x-x-109">Sedna supports standard XQuery function </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">fn:trace</span></span></span> <span class="cite"><span 
class="cmr-10x-x-109">[</span><a 
href="#Xpaper:query-fo"><span 
class="cmr-10x-x-109">4</span></a><span 
class="cmr-10x-x-109">]</span></span> <span 
class="cmr-10x-x-109">providing user helper facility to</span>
<span 
class="cmr-10x-x-109">trace queries. While executing XQuery query using </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">fn:trace</span></span></span> <span 
class="cmr-10x-x-109">function intermediate</span>
<span 
class="cmr-10x-x-109">results are shown to the user.</span>
<!--l. 3824--><p class="indent" >   <span 
class="cmr-10x-x-109">For example in Sedna Terminal the query with </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">fn:trace</span></span></span> <span 
class="cmr-10x-x-109">function will provide the</span>
<span 
class="cmr-10x-x-109">following output. Trace information is marked with </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">##</span></span></span> <span 
class="cmr-10x-x-109">string:</span>
<!--l. 3828--><p class="noindent" ><span 
class="cmbx-10x-x-109">Query:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-167">
let&#x00A0;$r:=&#x00A0;trace(doc("region")/regions/*,&#x00A0;"##&#x00A0;")
&#x00A0;<br />return&#x00A0;$r[id_region="afr"]
</div>
<!--l. 3833--><p class="nopar" >
<!--l. 3836--><p class="noindent" ><span 
class="cmbx-10x-x-109">Output:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-168">
##&#x00A0;&#x003C;africa&#x003E;&#x003C;id_region&#x003E;afr&#x003C;/id_region&#x003E;&#x003C;/africa&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x003C;africa&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;id_region&#x003E;afr&#x003C;/id_region&#x003E;
&#x00A0;<br />&#x003C;/africa&#x003E;
&#x00A0;<br />
&#x00A0;<br />##&#x00A0;&#x003C;asia&#x003E;&#x003C;id_region&#x003E;asi&#x003C;/id_region&#x003E;&#x003C;/asia&#x003E;
&#x00A0;<br />##&#x00A0;&#x003C;australia&#x003E;&#x003C;id_region&#x003E;aus&#x003C;/id_region&#x003E;&#x003C;/australia&#x003E;
&#x00A0;<br />##&#x00A0;&#x003C;europe&#x003E;&#x003C;id_region&#x003E;eur&#x003C;/id_region&#x003E;&#x003C;/europe&#x003E;
&#x00A0;<br />##&#x00A0;&#x003C;namerica&#x003E;&#x003C;id_region&#x003E;nam&#x003C;/id_region&#x003E;&#x003C;/namerica&#x003E;
&#x00A0;<br />##&#x00A0;&#x003C;samerica&#x003E;&#x003C;id_region&#x003E;sam&#x003C;/id_region&#x003E;&#x003C;/samerica&#x003E;
</div>
<!--l. 3852--><p class="nopar" >
<!--l. 3854--><p class="indent" >   <span 
class="cmr-10x-x-109">If you want to use trace facility in your application working through Sedna API you</span>
<span 
class="cmr-10x-x-109">should set your own debug handler as it is shown in </span><a 
href="#x1-160001.2.6"><span 
class="cmr-10x-x-109">1.2.6</span><!--tex4ht:ref: exec-capi --></a> <span 
class="cmr-10x-x-109">section.</span>
<!--l. 3861--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.7.2   </span></span> <a 
 id="x1-630002.7.2"></a><span 
class="cmr-10x-x-109">Debug Mode</span></h5>
<!--l. 3864--><p class="noindent" ><span 
class="cmr-10x-x-109">In addition to trace facility provided by standard XQuery </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">fn:trace</span></span></span> <span 
class="cmr-10x-x-109">function (see</span>
<span 
class="cmr-10x-x-109">previous section, </span><a 
href="#x1-620002.7.1"><span 
class="cmr-10x-x-109">2.7.1</span><!--tex4ht:ref: trace --></a> <span 
class="cmr-10x-x-109">) debug mode can be turned on in Sedna Terminal (for</span>
<span 
class="cmr-10x-x-109">details see &#8221;Sedna Terminal&#8221; section of the Sedna&#8217;s Administration Guide)</span>
<span 
class="cmr-10x-x-109">or in your application using corresponding Sedna API functions (see </span><a 
href="#x1-130001.2.3"><span 
class="cmr-10x-x-109">1.2.3</span><!--tex4ht:ref: session-option-capi --></a>
<span 
class="cmr-10x-x-109">section).</span>
<!--l. 3870--><p class="indent" >   <span 
class="cmr-10x-x-109">Each query in Sedna is represented and executed internally as a tree of the physical</span>
<span 
class="cmr-10x-x-109">operations. Debug mode is mechanism that allows to get stack of the physical</span>
<span 
class="cmr-10x-x-109">operations after dynamic error was raised. It serves two goals:</span>
      <ul class="itemize1">
      <li class="itemize"><span 
class="cmr-10x-x-109">localize error in the query&#8217;s source code;</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">obtain information of the query execution process.</span></li></ul>
<!--l. 3879--><p class="indent" >   <span 
class="cmr-10x-x-109">Let us consider the following query to illustrate execution in the debug</span>
<span 
class="cmr-10x-x-109">mode:</span>
<!--l. 3882--><p class="noindent" ><span 
class="cmbx-10x-x-109">Query:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-169">
(:&#x00A0;In&#x00A0;this&#x00A0;query&#x00A0;dynamic&#x00A0;error&#x00A0;will&#x00A0;be&#x00A0;raised&#x00A0;&#x00A0;&#x00A0;:)
&#x00A0;<br />(:&#x00A0;due&#x00A0;to&#x00A0;"aaaa"&#x00A0;is&#x00A0;not&#x00A0;castable&#x00A0;to&#x00A0;xs:integer.&#x00A0;:)
&#x00A0;<br />declare&#x00A0;function&#x00A0;local:f($i&#x00A0;as&#x00A0;item())&#x00A0;as&#x00A0;xs:integer
&#x00A0;<br />{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;$i&#x00A0;cast&#x00A0;as&#x00A0;xs:integer
&#x00A0;<br />};
&#x00A0;<br />
&#x00A0;<br />for&#x00A0;$i&#x00A0;in&#x00A0;(1,2,3,"aaaa")
&#x00A0;<br />return&#x00A0;local:f($i)
</div>
<!--l. 3895--><p class="nopar" >
<!--l. 3898--><p class="noindent" ><span 
class="cmbx-10x-x-109">Output:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-170">
1
&#x00A0;<br />2
&#x00A0;<br />3
&#x00A0;<br />
&#x00A0;<br />&#x003C;stack&#x00A0;xmlns=&#8217;http://www.modis.ispras.ru/sedna&#8217;&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name=&#8217;PPCast&#8217;&#x00A0;line=&#8217;3&#8217;&#x00A0;column=&#8217;4&#8217;&#x00A0;calls=&#8217;7&#8217;/&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name=&#8217;PPFunCall&#8217;&#x00A0;line=&#8217;7&#8217;&#x00A0;column=&#8217;8&#8217;&#x00A0;calls=&#8217;7&#8217;/&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name=&#8217;PPReturn&#8217;&#x00A0;line=&#8217;6&#8217;&#x00A0;column=&#8217;5&#8217;&#x00A0;calls=&#8217;4&#8217;/&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name=&#8217;PPQueryRoot&#8217;&#x00A0;calls=&#8217;4&#8217;/&#x003E;
&#x00A0;<br />&#x003C;/stack&#x003E;
&#x00A0;<br />
&#x00A0;<br />SEDNA&#x00A0;Message:&#x00A0;ERROR&#x00A0;FORG0001
&#x00A0;<br />Invalid&#x00A0;value&#x00A0;for&#x00A0;cast/constructor.
&#x00A0;<br />Details:&#x00A0;Cannot&#x00A0;convert&#x00A0;to&#x00A0;xs:integer&#x00A0;type
&#x00A0;<br />Query&#x00A0;line:&#x00A0;3,&#x00A0;column:4
</div>
<!--l. 3918--><p class="nopar" >
<!--l. 3920--><p class="indent" >   <span 
class="cmr-10x-x-109">As you can see in the output above each item of the operations stack list consists of</span>
<span 
class="cmr-10x-x-109">the following parts:</span>
      <ul class="itemize1">
      <li class="itemize"><span 
class="cmr-10x-x-109">operation name (</span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">PPCast</span></span></span> <span 
class="cmr-10x-x-109">and </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">PPFunCall</span></span></span> <span 
class="cmr-10x-x-109">in the example);</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">calls counter - number of calls of the operation;</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">corresponding query and column numbers;</span>
      </li>
      <li class="itemize"><span 
class="cmr-10x-x-109">optional  additional  information  (qualified  name  of  the  function  in  the</span>
      <span 
class="cmr-10x-x-109">example).</span></li></ul>
<!--l. 3935--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.7.3   </span></span> <a 
 id="x1-640002.7.3"></a><span 
class="cmr-10x-x-109">Explain Query</span></h5>
<!--l. 3938--><p class="noindent" ><span 
class="cmr-10x-x-109">The explain statement has the following syntax:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-171">
EXPLAIN
&#x00A0;<br />{XQuery&#x00A0;or&#x00A0;Update&#x00A0;statement&#x00A0;to&#x00A0;explain}
</div>
<!--l. 3942--><p class="nopar" > <span 
class="cmr-10x-x-109">Each query in Sedna is represented and executed internally as a tree of the physical</span>
<span 
class="cmr-10x-x-109">operations. With the help of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">EXPLAIN</span></span></span> <span 
class="cmr-10x-x-109">statement you can obtain detailed query</span>
<span 
class="cmr-10x-x-109">execution plan which shows how Sedna executes this query.</span>
<!--l. 3948--><p class="noindent" ><span 
class="cmr-10x-x-109">The following query illustrates </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">EXPLAIN</span></span></span> <span 
class="cmr-10x-x-109">statement execution:</span>
<!--l. 3952--><p class="noindent" ><span 
class="cmbx-10x-x-109">Query:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-172">
explain
&#x00A0;<br />declare&#x00A0;function&#x00A0;local:fact($i&#x00A0;as&#x00A0;xs:integer)&#x00A0;as&#x00A0;xs:integer&#x00A0;{
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;if&#x00A0;($i&#x00A0;&#x003C;=&#x00A0;1)
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;then&#x00A0;1
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;else&#x00A0;$i&#x00A0;*&#x00A0;local:fact($i&#x00A0;-&#x00A0;1)
&#x00A0;<br />};
&#x00A0;<br />
&#x00A0;<br />local:fact(10)
</div>
<!--l. 3963--><p class="nopar" >
<!--l. 3966--><p class="noindent" ><span 
class="cmbx-10x-x-109">Output:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-173">
&#x003C;prolog&#x00A0;xmlns="http://www.modis.ispras.ru/sedna"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;function&#x00A0;id="0"&#x00A0;function-name="local:fact"&#x00A0;type="xs:integer"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;arguments&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;argument&#x00A0;descriptor="0"&#x00A0;type="xs:integer"/&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/arguments&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="PPIf"&#x00A0;position="2:5"&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="PPLMGeneralComparison"
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;comparison="le"&#x00A0;position="2:12"&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="PPVariable"&#x00A0;descriptor="0"
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;variable-name="i"&#x00A0;position="2:9"/&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="PPConst"&#x00A0;type="xs:integer"
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;value="1"&#x00A0;position="2:15"/&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/operation&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="PPConst"&#x00A0;type="xs:integer"
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;value="1"&#x00A0;position="3:10"/&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="PPCalculate"&#x00A0;position="4:10"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="BinaryOp"&#x00A0;operation="*"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="LeafAtomOp"&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="PPVariable"&#x00A0;descriptor="0"
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;variable-name="i"&#x00A0;position="4:10"/&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/operation&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="LeafAtomOp"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="PPFunCall"&#x00A0;id="0"
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;function-name="local:fact"&#x00A0;position="4:15"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="PPCalculate"&#x00A0;position="4:26"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="BinaryOp"&#x00A0;operation="-"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="LeafAtomOp"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="PPVariable"&#x00A0;descriptor="0"
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;variable-name="i"&#x00A0;position="4:26"/&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/operation&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="LeafAtomOp"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="PPConst"&#x00A0;type="xs:integer"
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;value="1"&#x00A0;position="4:31"/&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/operation&#x003E;
                                                                          

                                                                          
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/operation&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/operation&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/operation&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/operation&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/operation&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/operation&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/operation&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;/function&#x003E;
&#x00A0;<br />&#x003C;/prolog&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x003C;query&#x00A0;xmlns="http://www.modis.ispras.ru/sedna"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="PPQueryRoot"&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="PPFunCall"&#x00A0;id="0"
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;function-name="local:fact"&#x00A0;position="7:1"&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;operation&#x00A0;name="PPConst"&#x00A0;type="xs:integer"
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;value="10"&#x00A0;position="7:12"/&#x003E;
&#x00A0;<br />
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x003C;/operation&#x003E;
&#x00A0;<br />&#x00A0;&#x00A0;&#x003C;/operation&#x003E;
&#x00A0;<br />&#x003C;/query&#x003E;
</div>
<!--l. 4033--><p class="nopar" >
<!--l. 4035--><p class="indent" >   <span 
class="cmr-10x-x-109">Explain output consists of two parts (just like any XQuery query): prolog and query</span>
<span 
class="cmr-10x-x-109">body explanations. Prolog part includes complete information about all declarations:</span>
<span 
class="cmr-10x-x-109">namespaces, functions, global variables with complete physical plan for each user</span>
<span 
class="cmr-10x-x-109">defined function and global variable. Query body explanation part describes physical</span>
<span 
class="cmr-10x-x-109">tree of the query.</span>
<!--l. 4041--><p class="indent" >   <span 
class="cmr-10x-x-109">For each physical operation </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">EXPLAIN</span></span></span> <span 
class="cmr-10x-x-109">returns: name of the operation (</span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">PPConst</span></span></span><span 
class="cmr-10x-x-109">,</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">PPFunCall</span></span></span><span 
class="cmr-10x-x-109">, etc), corresponding position in the source query (e.g. 4:31 means that</span>
<span 
class="cmr-10x-x-109">operation </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">PPConst</span></span></span> <span 
class="cmr-10x-x-109">corresponds to the &#8217;1&#8217; atomic at the line 4, column 26). Output may</span>
<span 
class="cmr-10x-x-109">also contain additional information depending on the operation type (for example,</span>
<span 
class="cmr-10x-x-109">variable name for some </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">PPVariable</span></span></span> <span 
class="cmr-10x-x-109">operations).</span>
<!--l. 4052--><p class="noindent" >
   <h5 class="subsubsectionHead"><span class="titlemark"><span 
class="cmr-10x-x-109">2.7.4   </span></span> <a 
 id="x1-650002.7.4"></a><span 
class="cmr-10x-x-109">Profile Query</span></h5>
<!--l. 4055--><p class="noindent" ><span 
class="cmr-10x-x-109">The profile statement has the following syntax:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-174">
PROFILE
&#x00A0;<br />{XQuery&#x00A0;or&#x00A0;Update&#x00A0;statement&#x00A0;to&#x00A0;profile}
</div>
<!--l. 4059--><p class="nopar" > <span 
class="cmr-10x-x-109">Each query in Sedna is represented and executed internally as a tree of the physical</span>
<span 
class="cmr-10x-x-109">operations. With the help of </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">PROFILE</span></span></span> <span 
class="cmr-10x-x-109">statement you can obtain detailed tree of physical</span>
<span 
class="cmr-10x-x-109">operation and execution time for each of them.</span>
<!--l. 4065--><p class="noindent" ><span 
class="cmr-10x-x-109">The following query illustrates </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">PROFILE</span></span></span> <span 
class="cmr-10x-x-109">statement execution:</span>
<!--l. 4069--><p class="noindent" ><span 
class="cmbx-10x-x-109">Query:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-175">
profile&#x00A0;fn:doc(&#8217;TestSources/XMarkAuction.xml&#8217;)//
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;person[@id&#x00A0;=&#x00A0;"person0"]/name
</div>
<!--l. 4074--><p class="nopar" >
<!--l. 4077--><p class="noindent" ><span 
class="cmbx-10x-x-109">Output:</span>
   <div class="alltt">
<!--l. 4081--><p class="noindent" ><div class="obeylines-v">
<span 
class="cmtt-10x-x-109">&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPQueryRoot"</span><span 
class="cmtt-10x-x-109">&#x00A0;time="13.426"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="1"&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPAxisChild"</span><span 
class="cmtt-10x-x-109">&#x00A0;step="child::element(name)"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;time="13.426"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="2"&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPReturn"</span><span 
class="cmtt-10x-x-109">&#x00A0;time="13.426"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="2"&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x003C;operation</span><span 
class="cmitt-10x-x-109">&#x00A0;name="PPAbsPath"</span><span 
class="cmitt-10x-x-109">&#x00A0;root="document(auction)"</span>
<br /><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;path="descendant-or-self::node()"</span>
<br /><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;time="12.772"</span><span 
class="cmitt-10x-x-109">&#x00A0;calls="85405"/&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPPred1"</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.530"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="85405"&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPAxisChild"</span><span 
class="cmtt-10x-x-109">&#x00A0;step="child::element(person)"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.461"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="86168"&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPVariable"</span><span 
class="cmtt-10x-x-109">&#x00A0;descr="0"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.380"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="170808"/&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;/operation&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPEQLGeneralComparison"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;comparison="eq"</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.013"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="1528"&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPAxisAttribute"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;step="attribute::attribute(id)"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.001"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="1527"&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPVariable"</span><span 
class="cmtt-10x-x-109">&#x00A0;descr="1"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.001"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="1527"/&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;/operation&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPConst"</span>
                                                                          

                                                                          
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;type="xs:string"</span><span 
class="cmtt-10x-x-109">&#x00A0;value="person0"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.001"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="1527"/&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;/operation&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;/operation&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;/operation&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;/operation&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x003C;/operation&#x003E;</span>
</div>
</div>
<!--l. 4122--><p class="indent" >   <span 
class="cmr-10x-x-109">Profiling output consists of two parts (just like any XQuery query): prolog and</span>
<span 
class="cmr-10x-x-109">query body explanations. Prolog part includes complete profile information for global</span>
<span 
class="cmr-10x-x-109">variables and user defined functions. Query body profile part describes physical tree of</span>
<span 
class="cmr-10x-x-109">the query and provides execution time and number of calls for each physical</span>
<span 
class="cmr-10x-x-109">operation.</span>
<!--l. 4128--><p class="indent" >   <span 
class="cmr-10x-x-109">For each physical operation </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">PROFILE</span></span></span> <span 
class="cmr-10x-x-109">returns: name of the operation (</span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">PPConst</span></span></span><span 
class="cmr-10x-x-109">,</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">PPFunCall</span></span></span><span 
class="cmr-10x-x-109">, etc), corresponding position in the source query (e.g. 4:31 means that</span>
<span 
class="cmr-10x-x-109">operation </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">PPConst</span></span></span> <span 
class="cmr-10x-x-109">corresponds to the &#8217;1&#8217; atomic at the line 4, column 26), execution</span>
<span 
class="cmr-10x-x-109">time of this operation and number of calls. Output may also contain additional</span>
<span 
class="cmr-10x-x-109">information depending on the operation type (for example, variable name for some</span>
<span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">PPVariable</span></span></span> <span 
class="cmr-10x-x-109">operations).</span>
<!--l. 4135--><p class="indent" >   <span 
class="cmr-10x-x-109">In above example you can see that </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">PPAbsPath</span></span></span> <span 
class="cmr-10x-x-109">operation takes almost all time</span>
<span 
class="cmr-10x-x-109">(12.772 seconds of 13.426 total) and was called 12772 times. Profiling in this case shows</span>
<span 
class="cmr-10x-x-109">that </span><span class="obeylines-h"><span class="verb"><span 
class="cmtt-10x-x-109">//</span></span></span> <span 
class="cmr-10x-x-109">may be very hard to execute and it is much better to use &#8221;single&#8221; XPath steps</span>
<span 
class="cmr-10x-x-109">everywhere it is possible:</span>
<!--l. 4141--><p class="noindent" ><span 
class="cmbx-10x-x-109">Query:</span>
                                                                          

                                                                          
   <div class="verbatim" id="verbatim-176">
profile&#x00A0;fn:doc(&#8217;TestSources/XMarkAuction.xml&#8217;)/
&#x00A0;<br />&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;&#x00A0;site/people/person[@id&#x00A0;=&#x00A0;"person0"]/name
</div>
<!--l. 4146--><p class="nopar" >
<!--l. 4149--><p class="noindent" ><span 
class="cmbx-10x-x-109">Output:</span>
   <div class="alltt">
<!--l. 4153--><p class="noindent" ><div class="obeylines-v">
<span 
class="cmtt-10x-x-109">&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPQueryRoot"</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.018"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="1"&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPAxisChild"</span><span 
class="cmtt-10x-x-109">&#x00A0;step="child::element(name)"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.018"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="2"&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPReturn"</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.018"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="2"&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;produces&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;variable</span><span 
class="cmtt-10x-x-109">&#x00A0;descriptor="0"/&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;/produces&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x003C;operation</span><span 
class="cmitt-10x-x-109">&#x00A0;name="PPAbsPath"</span>
<br /><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;root="document(auction)"</span>
<br /><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;path="child::element(site)/child::element(people)"</span>
<br /><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;</span><span 
class="cmitt-10x-x-109">&#x00A0;time="0.001"</span><span 
class="cmitt-10x-x-109">&#x00A0;calls="2"/&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPPred1"</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.017"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="2"&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;produces&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;variable</span><span 
class="cmtt-10x-x-109">&#x00A0;descriptor="1"/&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;/produces&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPAxisChild"</span><span 
class="cmtt-10x-x-109">&#x00A0;step="child::element(person)"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.001"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="765"&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPVariable"</span><span 
class="cmtt-10x-x-109">&#x00A0;descr="0"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.000"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="2"/&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;/operation&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPEQLGeneralComparison"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;comparison="eq"</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.013"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="1528"&#x003E;</span>
<br />
                                                                          

                                                                          
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPAxisAttribute"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;step="attribute::attribute(id)"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.005"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="1527"&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPVariable"</span><span 
class="cmtt-10x-x-109">&#x00A0;descr="1"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.003"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="1527"/&#x003E;</span>
<br />
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;/operation&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;operation</span><span 
class="cmtt-10x-x-109">&#x00A0;name="PPConst"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;type="xs:string"</span><span 
class="cmtt-10x-x-109">&#x00A0;value="person0"</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;time="0.000"</span><span 
class="cmtt-10x-x-109">&#x00A0;calls="1527"/&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;/operation&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;/operation&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;/operation&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x00A0;</span><span 
class="cmtt-10x-x-109">&#x00A0;&#x003C;/operation&#x003E;</span>
<br /><span 
class="cmtt-10x-x-109">&#x003C;/operation&#x003E;</span>
</div>
</div>
<!--l. 4203--><p class="indent" >
                                                                          

                                                                          
   <h3 class="likesectionHead"><a 
 id="x1-660002.7.4"></a><span 
class="cmr-10x-x-109">References</span></h3>
<!--l. 4208--><p class="noindent" >
   <div class="thebibliography">
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[1]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span><a 
 id="Xdoc:admin"></a><span 
class="cmr-10x-x-109">&#8220;Sedna                             Administration                             Guide&#8221;,</span>
   <a 
href="http://modis.ispras.ru/sedna/adminguide/AdminGuide.html" class="url" ><span 
class="cmtt-10x-x-109">http://modis.ispras.ru/sedna/adminguide/AdminGuide.html</span></a>
   </p>
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[2]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span><a 
 id="Xpaper:data-model"></a><span 
class="cmr-10x-x-109">&#8220;XQuery  1.0  and  XPath  2.0  Data  Model&#8221;,  W3C  Recommendation,</span>
   <a 
href="http://www.w3.org/TR/xpath-datamodel/" class="url" ><span 
class="cmtt-10x-x-109">http://www.w3.org/TR/xpath-datamodel/</span></a>
   </p>
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[3]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span><a 
 id="Xpaper:query-language"></a><span 
class="cmr-10x-x-109">&#8220;XQuery  1.0:  An  XML  Query  Language&#8221;,  W3C  Recommendation,</span>
   <a 
href="http://www.w3.org/TR/xquery/" class="url" ><span 
class="cmtt-10x-x-109">http://www.w3.org/TR/xquery/</span></a>
   </p>
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[4]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span><a 
 id="Xpaper:query-fo"></a><span 
class="cmr-10x-x-109">&#8220;XQuery   1.0   and   XPath   2.0   Functions   and   Operators&#8221;,   W3C</span>
   <span 
class="cmr-10x-x-109">Recommendation, </span><a 
href="http://www.w3.org/TR/xpath-functions/" class="url" ><span 
class="cmtt-10x-x-109">http://www.w3.org/TR/xpath-functions/</span></a>
   </p>
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[5]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span><a 
 id="Xpaper:query-serialization"></a><span 
class="cmr-10x-x-109">&#8220;XSLT  2.0  and  XQuery  1.0  Serialization&#8221;,  W3C  Recommendation,</span>
   <a 
href="http://www.w3.org/TR/xslt-xquery-serialization/" class="url" ><span 
class="cmtt-10x-x-109">http://www.w3.org/TR/xslt-xquery-serialization/</span></a>
   </p>
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[6]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span><a 
 id="Xpaper:query-update"></a><span 
class="cmr-10x-x-109">Patrick</span>
   <span 
class="cmr-10x-x-109">Lehti. &#8220;Design and Implementation of a Data Manipulation Processor for a</span>
   <span 
class="cmr-10x-x-109">XML Query Language&#8221;, </span><a 
href="http://www.lehti.de/beruf/diplomarbeit.pdf" class="url" ><span 
class="cmtt-10x-x-109">http://www.lehti.de/beruf/diplomarbeit.pdf</span></a>
   </p>
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[7]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span><a 
 id="Xlib:pcre-lib"></a><span 
class="cmr-10x-x-109">&#8220;PCRE - Perl Compatible Regular Expressions&#8221;, </span><a 
href="http://www.pcre.org/" class="url" ><span 
class="cmtt-10x-x-109">http://www.pcre.org/</span></a>
   </p>
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[8]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span><a 
 id="Xpaper:sedna-overview"></a><span 
class="cmr-10x-x-109">Maxim                                  Grinev,                                  Andrey</span>
   <span 
class="cmr-10x-x-109">Fomichev, Sergey Kuznetsov, Kostantin Antipin, Alexander Boldakov, Dmitry</span>
   <span 
class="cmr-10x-x-109">Lizorkin, Leonid Novak, Maria Rekouts, Peter Pleshachkov. &#8220;Sedna: A Native</span>
   <span 
class="cmr-10x-x-109">XML DBMS&#8221;, </span><a 
href="http://www.modis.ispras.ru/publications.htm" class="url" ><span 
class="cmtt-10x-x-109">http://www.modis.ispras.ru/publications.htm</span></a>
                                                                          

                                                                          
   </p>
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[9]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span><a 
 id="Xpaper:sedna-api"></a><span 
class="cmr-10x-x-109">Rekouts                               Maria.                               &#8220;Application</span>
   <span 
class="cmr-10x-x-109">Programming Interface for XML DBMS: design and implementation proposal&#8221;,</span>
   <a 
href="http://www.modis.ispras.ru/publications.htm" class="url" ><span 
class="cmtt-10x-x-109">http://www.modis.ispras.ru/publications.htm</span></a>
   </p>
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[10]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span><a 
 id="Xpaper:scheme-ql"></a><span 
class="cmr-10x-x-109">Noel         Welsh,         Francisco         Solsona,         Ian         Glover.</span>
   <span 
class="cmr-10x-x-109">&#8220;SchemeUnit and SchemeQL: Two little languages&#8221;, Scheme Workshop 2002,</span>
   <a 
href="http://schematics.sourceforge.net/schemeunit-schemeql.ps" class="url" ><span 
class="cmtt-10x-x-109">http://schematics.sourceforge.net/schemeunit-schemeql.ps</span></a>
   </p>
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[11]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span><a 
 id="Xpaper:sxml"></a><span 
class="cmr-10x-x-109">Oleg       Kiselyov.       &#8220;SXML       Specification,       Revision       3.0&#8221;,</span>
   <a 
href="http://www.okmij.org/ftp/Scheme/SXML.html" class="url" ><span 
class="cmtt-10x-x-109">http://www.okmij.org/ftp/Scheme/SXML.html</span></a>
   </p>
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[12]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span>
   <a 
 id="Xpaper:srfi-12"></a><span 
class="cmr-10x-x-109">William Clinger, R.</span><span 
class="cmr-10x-x-109">&#x00A0;Kent Dybvig, Matthew Flatt, and Marc Feeley. &#8220;SRFI-12:</span>
   <span 
class="cmr-10x-x-109">Exception Handling&#8221;, </span><a 
href="http://srfi.schemers.org/srfi-12/srfi-12.html" class="url" ><span 
class="cmtt-10x-x-109">http://srfi.schemers.org/srfi-12/srfi-12.html</span></a>
   </p>
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[13]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span><a 
 id="Xpaper:chicken"></a><span 
class="cmr-10x-x-109">Felix  L.</span><span 
class="cmr-10x-x-109">&#x00A0;Winkelmann.  &#8220;Chicken  &#8211;  A  practical  and  portable  Scheme</span>
   <span 
class="cmr-10x-x-109">system&#8221;, </span><a 
href="http://www.call-with-current-continuation.org" class="url" ><span 
class="cmtt-10x-x-109">http://www.call-with-current-continuation.org</span></a>
   </p>
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[14]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span><a 
 id="Xpaper:sxpath"></a><span 
class="cmr-10x-x-109">Kirill     Lisovsky,     Dmitry     Lizorkin.     &#8220;XML     Path     Language</span>
   <span 
class="cmr-10x-x-109">(XPath)    and    its    functional    implementation    SXPath&#8221;,    Russian</span>
   <span 
class="cmr-10x-x-109">Digital     Libraries     Journal     ,     2003,     Volume     6,     Issue     4,</span>
   <a 
href="http://www.elbib.ru/index.phtml?page=elbib/eng/journal/2003/part4/LL" class="url" ><span 
class="cmtt-10x-x-109">http://www.elbib.ru/index.phtml?page=elbib/eng/journal/2003/part4/LL</span></a>
   </p>
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[15]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span><a 
 id="Xlink:dtsearch-engine"></a><span 
class="cmr-10x-x-109">dtSearch                     Engine                     home                     page,</span>
   <a 
href="http://www.dtsearch.com/PLF\_engine\_2.html" class="url" ><span 
class="cmtt-10x-x-109">http://www.dtsearch.com/PLF\_engine\_2.html</span></a>
   </p>
   <p class="bibitem" ><span class="biblabel">
 <span 
class="cmr-10x-x-109">[16]</span><span class="bibsp"><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span><span 
class="cmr-10x-x-109">&#x00A0;</span></span></span><a 
 id="Xdoc:dtsearch"></a><span 
class="cmr-10x-x-109">dtSearch Web Help </span><a 
href="http://support.dtsearch.com/webhelp/dtsearch" class="url" ><span 
class="cmtt-10x-x-109">http://support.dtsearch.com/webhelp/dtsearch</span></a>
                                                                          

                                                                          
</p>
   </div>
   </td></tr></table><p style="margin-bottom:15px;"/><table width="843" align="center" cellpadding="0" cellspacing="0" class="ver9"><tr ><td><div id="footer"><div id="copyright">&copy; 2003-2012 Institute for System Programming RAS</div><ul><li><a href="/">Home</a></li><li><a href="/documentation.html">Documentation</a></li><li class="last"><a href="/download.html">Download</a></li></ul></div></td></tr></table><p style="margin-bottom:15px;"/> 
</body></html> 

                                                                          


